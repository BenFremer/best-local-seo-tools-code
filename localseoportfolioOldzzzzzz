<?php

/*
As is permitted by law:
1) This code is copyrighted by Ben Fremer
2) Modification of this code or redistribution of a modified derivitative of this code without permission is prohibted with the exception of modifying the arguments of the register_post type and the register_taxonomy functions (you are permitted to modify that section of the code).

Ben Fremer offers this code with NO WARRANTY. IN NO EVENT SHALL BenFremer or the corporation he sells / offers the plugin and / or plugin subscriptions through be liable to you or any other person or entity for any direct, indirect, incidental, special, punitive, or consequential damages whatsover arising out of your downloading or use of the plugin or subscription services. The aforementioned plugin and services are furnished without any warranty whatsoever, and is not responsible for any direct, indirect or consequential damages that may be incurred by its use. Warranties of merchantability, fitness for any particular purpose, title, and non-infringement, are specifically negated.

Plugin Name: InstaWow Local SEO
Plugin URI: http://www.instawowlocalseo.com
Description: A professionally search engine optimized portfolio plugin that helps you rank in search engines for all the cities that you serve while showcasing your work!
Version: 1.0
Author URI: https://profiles.wordpress.org/benfremer
*/


global $wpdb;


// Maybe implement this way instead -- http://wordpress.stackexchange.com/questions/107113/output-before-and-after-the-loop
/*
if(is_tax('servicesportfolio') && get_option('lsp-enable-categories')=="yes") {
  global $wp_query;
  $wp_query->is_single = true;
}
*/


add_filter( 'get_the_archive_title', 'no_singles_title',99999 );
//add_action('wp', 'no_singles_title');
function no_singles_title($title){
  if((is_tax('servicesportfolio') || is_tax('industriesportfolio')) && get_option('lsp-enable-categories')=="yes" && get_option('lsp-preview-urls')!="yes") {
  global $is_single;
  $is_single = true;
  global $wp_query;
  $wp_query->is_single = true;
  //$title = "testering";
    //return
    //$title = wp_strip_all_tags($title);
  return $title;
  }
  return $title;
}





add_filter( 'the_content', 'singles_excerpt',99999 );
//add_action('wp', 'no_singles_title');
function singles_excerpt($content){
  global $post;
  if((is_tax('servicesportfolio') || is_tax('industriesportfolio') || $post->ID == get_option('lsp-ptemplate-id') ) && get_option('lsp-preview-urls')=="yes") {
    //return "HELLO". $content;
    return wp_trim_words( $content , 55 );
  }
  return $content;
}




add_filter('wpseo_opengraph_title','mysite_ogtitle',999);
function mysite_ogtitle($title){
  return keyphrase_one_title( $title );
}




function lsp_load_plugin_textdomain(){
  load_plugin_textdomain('lsp_text_domain',FALSE, basename( dirname( __FILE__  )  ).''  );
}
add_action('plugins_loaded','lsp_load_plugin_textdomain');


function curlfallback($url){
  $fHolder = "";
  $fHolder = wp_remote_retrieve_body(wp_remote_get($url));
  if($fHolder) return $fHolder;
  $fHolder = file_get_contents($url);
  if($fHolder) return $fHolder;

}


function custom_rewrite_tagp() {
  add_rewrite_tag('%portfolioquery%', '([^&]+)');
  add_rewrite_tag('%portfoliovalue%', '([^&]+)');

}
add_action('init', 'custom_rewrite_tagp', 10, 0);


function custom_rewrite_rule_portfolio() {
      // add_rewrite_rule('^localportfolio/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&portfolioquery='.$matches[1].'&portfoliovalue='.$matches[2],'top');
}
add_action('init', 'custom_rewrite_rule_portfolio', 10, 0);




//add_rewrite_rule('^localportfolio/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&portfolioquery=$matches[1]&portfoliovalue=$matches[2]','top');



function lsp_projects_endpoint(){
  add_rewrite_rule('^lsp_projects/([^/]*)/?','index.php?lsp_portfolio=$matches[1]','top');
//  add_rewrite_rule('lsp_projects/([^&]+)/',,'top');
}
add_action('init','lsp_projects_endpoint',10,0);

function lsp_projects_endpoint2(){
  add_rewrite_tag('%lsp_portfolio%','([^&]+)');
}
add_action('init','lsp_projects_endpoint2',10,0);

function lsp_projects_print(){
  if($_GET['portfolioquery']){
//    echo "hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi hi ";

    $k = "";
    $k = $_GET['portfolioquery'];
    if($k==1)$k="";

    global $wpdb;
    $query2 = "SELECT a.meta_value as city, b.meta_value as state, d.meta_value as country FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$k)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND d.meta_key='lsp_post_country' AND a.post_id = b.post_id AND b.post_id = c.post_id";
//              echo $query2;
              //  $query2 = $wpdb->prepare($query2);
              global $wpdb;
              $citystates = $wpdb->get_results($query2);
              $projectsCounter = 0;
              $projectsString .= "";
              foreach ($citystates as $citystate) {
                if($projectsCounter>100) break;
                $projectArray[$projectsCounter]= $citystate->city.",".$citystate->state;
                $projectsString .= $citystate->city.",".$citystate->state.",".$citystate->country."|";
                $projectsCounter++;
               // echo $projectsCounter;
              }

    echo $projectsString;



  //  echo "HELLO2";
    die();
  }
}
add_action('template_redirect','lsp_projects_print');




function my_title($title,$separator,$position) {
  global $post;
  //echo $post->ID;
  if(get_option('lsp-ptemplate-id') == $post->ID ){
   remove_action('wp_head','jetpack_og_tags'); // JetPack
   if (defined('WPSEO_VERSION')) { // Yoast SEO
    global $wpseo_front;
    remove_action('wp_head',array($wpseo_front,'head'),1);
   }
   if (defined('AIOSEOP_VERSION')) { // All-In-One SEO
    global $aiosp;
    remove_action('wp_head',array($aiosp,'wp_head'));
   }
    remove_action('wp_head','rel_canonical');
    remove_action('wp_head','index_rel_link');
    remove_action('wp_head','start_post_rel_link');
    remove_action('wp_head','adjacent_posts_rel_link_wp_head');
    add_action('wp_head','my_head',0);
  // do whatever you need to $title here
  }
  return $title;
}
add_filter('wp_title','my_title',20,3); 


function fixyoast2(){
  return "";
}

function fixyoast(){
global $post;
//echo $post->ID;
if(get_option('lsp-ptemplate-id') == $post->ID )
{


remove_action('wp_head', 'wp_shortlink_wp_head');
  remove_action( 'wp_head', 'feed_links_extra', 3 ); 
remove_action( 'wp_head', 'feed_links', 2 );
remove_action( 'wp_head', 'rsd_link'); 
remove_action( 'wp_head', 'wlwmanifest_link'); 
remove_action( 'wp_head', 'index_rel_link');
remove_action( 'wp_head', 'parent_post_rel_link'); 
remove_action( 'wp_head', 'start_post_rel_link'); 
remove_action( 'wp_head', 'adjacent_posts_rel_link'); 
remove_action( 'wp_head', 'wp_generator'); 




  add_filter( 'wpseo_canonical', '__return_false' );
  add_filter( 'wpseo_title', '__return_false',99);
  add_filter( 'wpseo_metadesc', '__return_false' );
  remove_action('wp_head','wpseo_opengraph',20);
}
}
add_action('wp_head','fixyoast',1);




global $mylanguage;
$languageHolder = explode('-',get_bloginfo('language'));
$mylanguage = $languageHolder[0];
function headermeta(){
  global $post;
  if(get_option('lsp-ptemplate-id') == $post->ID ){
 
    //take off yoast
   

    $currentSlugArray = explode("/",$_SERVER["REQUEST_URI"]);
    if($currentSlugArray[4]) $currentSlug = $currentSlugArray[2];
      else $currentSlug = $currentSlugArray[1];
    $currentTerm = str_replace("-"," ",$currentSlug);
        global $wp_query;

        echo"<meta name='description' value=".'"'.ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))) . " ". ucwords($currentTerm) ." - ".ucwords($currentTerm). __(' for ','lsp_text_domain') . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))).'"'.">";
        echo"<meta name='keywords' value=".'"'.ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))) . " ". ucwords($currentTerm) ." - ".ucwords($currentTerm). __(' for ','lsp_text_domain') . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))).'"'.">";

  }
}
add_action('wp_head','headermeta');


function footerscript(){

update_option('lsp_content',"");

echo "<script type='text/javascript'>
var mystr = window.location.href;
if(mystr.indexOf('edit.php?post_type=localproject')>-1){

  jQuery('td[data-colname=SEO]').hide();
  jQuery('#wpseo-score').html('');

}

</script>";

  
echo "
<script type='text/javascript'>
jQuery(document).ready(function(){

jQuery('#menu-posts-localproject a:nth-child(3)').hide();

jQuery('#menu-posts-localproject a:nth-child(3)').hide();

jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(7)').removeClass('current');
jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(8)').removeClass('current');
jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(9)').removeClass('current');


jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(7) a').attr('href','http://www.instawowlocalseo.com/#comparison');
jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(8) a').attr('href','http://www.instawowlocalseo.com/?page_id=83');
jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(9) a').attr('href','http://www.instawowlocalseo.com/?page_id=146');

jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(7) a').attr('target','_blank');
jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(8) a').attr('target','_blank');
jQuery('#menu-posts-localproject .wp-submenu:nth-child(2) li:nth-child(9) a').attr('target','_blank');

});

jQuery('#menu-posts-localproject li:nth-child(4)').hide();
jQuery('#menu-posts-localproject li:nth-child(5)').hide();

jQuery('#tagsdiv-industriesportfolio').prependTo('#side-sortables');
jQuery('#tagsdiv-servicesportfolio').prependTo('#side-sortables');

  </script> ";
}
add_filter('admin_footer_text','footerscript');

//if((get_option('lsp-ptemplate-id')==$_GET['post']) && (get_option('lsp-ptemplate-id')!=""))die("This page is required for the Local SEO Portfolio plugin and cannot/probably should not be edited or removed except through the plugin settings.");


global $premium;
$premium = 0;
if(get_option('lsp-api-key'))$premium = 1;
global $title_string;
$title_string = __( 'DO NOT DELETE OR RENAME THIS please - It is required for the Local SEO Portfolio Plugin to work and is otherwise hidden', 'lsp_text_domain' );
add_filter('wp_list_pages_excludes','lsp_exclude');
function lsp_exclude($output = ''){
  array_push($output,get_option('lsp-ptemplate-id'));
  return $output;
}

function custom_rewrite_tag() {
  add_rewrite_tag('%city%', '([^&]+)');
  add_rewrite_tag('%state%', '([^&]+)');
  add_rewrite_tag('%country%', '([^&]+)');
}
add_action('init', 'custom_rewrite_tag', 10, 0);


function custom_rewrite_rule() {
  if(get_option('lsp-keyphrase-override')){
    //if(strstr(get_option('lsp-set-type'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
 //   if(strstr(get_option('lsp-set-type'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
  //  else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule', 10, 0);

function custom_rewrite_rule2() {
  if(get_option('lsp-keyphrase-override2')){
    //if(strstr(get_option('lsp-set-type2'),"international"))
     add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override2')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override2')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
//    if(strstr(get_option('lsp-set-type2'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase2')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
  //  else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase2')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule2', 10, 0);

function custom_rewrite_rule3() {
  if(get_option('lsp-keyphrase-override3')){
    //if(strstr(get_option('lsp-set-type3'),"international")) 
    add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override3')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override3')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type3'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase3')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase3')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule3', 10, 0);

function custom_rewrite_rule4() {
  if(get_option('lsp-keyphrase-override4')){
    //if(strstr(get_option('lsp-set-type4'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override4')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override4')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type4'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase4')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase4')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule4', 10, 0);

function custom_rewrite_rule5() {
  if(get_option('lsp-keyphrase-override5')){
    //if(strstr(get_option('lsp-set-type5'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override5')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override5')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type5'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase5')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase5')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule5', 10, 0);

function custom_rewrite_rule6() {
  if(get_option('lsp-keyphrase-override6')){
    //if(strstr(get_option('lsp-set-type6'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override6')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override6')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type6'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase6')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase6')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule6', 10, 0);

function custom_rewrite_rule7() {
  if(get_option('lsp-keyphrase-override7')){
    //if(strstr(get_option('lsp-set-type7'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override7')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override7')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type7'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase7')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase7')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule7', 10, 0);

function custom_rewrite_rule8() {
  if(get_option('lsp-keyphrase-override8')){
    //if(strstr(get_option('lsp-set-type8'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override8')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override8')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type8'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase8')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase8')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule8', 10, 0);

function custom_rewrite_rule9() {
  if(get_option('lsp-keyphrase-override9')){
    //if(strstr(get_option('lsp-set-type9'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override9')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override9')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type9'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase9')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase9')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule9', 10, 0);

function custom_rewrite_rule10() {
  if(get_option('lsp-keyphrase-override10')){
    //if(strstr(get_option('lsp-set-type10'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase-override10')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase-override10')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }else{
    //if(strstr(get_option('lsp-set-type10'),"international")) 
      add_rewrite_rule('^([^/]*)/'.str_replace(' ','-',get_option('lsp-keyphrase10')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&country=$matches[1]&city=$matches[2]&state=$matches[3]','top');
    //else add_rewrite_rule('^'.str_replace(' ','-',get_option('lsp-keyphrase10')).'/([^/]*)/([^/]*)/?','index.php?page_id='.get_option('lsp-ptemplate-id').'&city=$matches[1]&state=$matches[2]','top');
  }
}
add_action('init', 'custom_rewrite_rule10', 10, 0);

function keyphrase_one_page_title( $title ) {

  $currentSlugArray = explode("/",$_SERVER["REQUEST_URI"]);
	if($currentSlugArray[4]) $currentSlug = $currentSlugArray[2];
    else $currentSlug = $currentSlugArray[1];
	$currentTerm = str_replace("-"," ",$currentSlug);

    if ( get_the_ID() == get_option('lsp-ptemplate-id') && ( (get_option('lsp-keyphrase') == $currentTerm) || (get_option('lsp-keyphrase2') == $currentTerm) || (get_option('lsp-keyphrase3') == $currentTerm) || (get_option('lsp-keyphrase4') == $currentTerm) || (get_option('lsp-keyphrase5') == $currentTerm) || (get_option('lsp-keyphrase6') == $currentTerm) || (get_option('lsp-keyphrase7') == $currentTerm) || (get_option('lsp-keyphrase8') == $currentTerm) || (get_option('lsp-keyphrase9') == $currentTerm) || (get_option('lsp-keyphrase10') == $currentTerm) || (get_option('lsp-keyphrase-override') == $currentTerm) || (get_option('lsp-keyphrase-override2') == $currentTerm) || (get_option('lsp-keyphrase-override3') == $currentTerm) || (get_option('lsp-keyphrase-override4') == $currentTerm) || (get_option('lsp-keyphrase-override5') == $currentTerm) || (get_option('lsp-keyphrase-override6') == $currentTerm) || (get_option('lsp-keyphrase-override7') == $currentTerm) || (get_option('lsp-keyphrase-override8') == $currentTerm) || (get_option('lsp-keyphrase-override9') == $currentTerm) || (get_option('lsp-keyphrase-override10') == $currentTerm))) {
        global $wp_query;
        ///THISNEEDSWORK FOR lowercase URL's & i18n
        //return ucwords(str_replace("-"," ",$wp_query->query_vars['city'])) . ", " . ucwords(str_replace("-"," ",$wp_query->query_vars['state'])) . " ". ucwords($currentTerm);
    
      if(($wp_query->query_vars['city']!="list") && ($wp_query->query_vars['state']!="list")) return ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))) . " ". ucwords($currentTerm) . "";
      else return ucwords($currentTerm);
    }
/*
  if($currentSlugArray[2]=="list" && $currentSlugArray[3]=="all"){
    $title = $currentTerm. "";
  }*/

    return $title;
}
add_filter( 'wp_title', 'keyphrase_one_page_title', 9999, 1 );

function keyphrase_one_title( $title ) {
  ///THISNEEDSWORK FOR lowercase URL's & i18n\\

  if(in_the_loop()){


$currentSlugArray = explode("/",$_SERVER["REQUEST_URI"]);
  if($currentSlugArray[4]) $currentSlug = $currentSlugArray[2];
    else $currentSlug = $currentSlugArray[1];
  $currentTerm = str_replace("-"," ",$currentSlug);

    if ( get_the_ID() == get_option('lsp-ptemplate-id') && ( (get_option('lsp-keyphrase') == $currentTerm) || (get_option('lsp-keyphrase2') == $currentTerm) || (get_option('lsp-keyphrase3') == $currentTerm) || (get_option('lsp-keyphrase4') == $currentTerm) || (get_option('lsp-keyphrase5') == $currentTerm) || (get_option('lsp-keyphrase6') == $currentTerm) || (get_option('lsp-keyphrase7') == $currentTerm) || (get_option('lsp-keyphrase8') == $currentTerm) || (get_option('lsp-keyphrase9') == $currentTerm) || (get_option('lsp-keyphrase10') == $currentTerm) || (get_option('lsp-keyphrase-override') == $currentTerm) || (get_option('lsp-keyphrase-override2') == $currentTerm) || (get_option('lsp-keyphrase-override3') == $currentTerm) || (get_option('lsp-keyphrase-override4') == $currentTerm) || (get_option('lsp-keyphrase-override5') == $currentTerm) || (get_option('lsp-keyphrase-override6') == $currentTerm) || (get_option('lsp-keyphrase-override7') == $currentTerm) || (get_option('lsp-keyphrase-override8') == $currentTerm) || (get_option('lsp-keyphrase-override9') == $currentTerm) || (get_option('lsp-keyphrase-override10') == $currentTerm))) {
        global $wp_query;
        ///THISNEEDSWORK FOR lowercase URL's & i18n
        //return ucwords(str_replace("-"," ",$wp_query->query_vars['city'])) . ", " . ucwords(str_replace("-"," ",$wp_query->query_vars['state'])) . " ". ucwords($currentTerm);
    
      if(($wp_query->query_vars['city']!="list") && ($wp_query->query_vars['state']!="list")) return ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))) . " ". ucwords($currentTerm) . "";
      else return ucwords($currentTerm);
    }
/*
  if($currentSlugArray[2]=="list" && $currentSlugArray[3]=="all"){
    $title = $currentTerm. "";
  }*/

    return $title;





    

    /*  	$currentSlugArray = explode("/",$_SERVER["REQUEST_URI"]);
        if($currentSlugArray[4]) $currentSlug = $currentSlugArray[2];
          else $currentSlug = $currentSlugArray[1];
      	$currentTerm = str_replace("-"," ",$currentSlug);
        if ( get_the_ID() == get_option('lsp-ptemplate-id') && (get_option('lsp-keyphrase') == $currentTerm || get_option('lsp-keyphrase2') == $currentTerm || get_option('lsp-keyphrase3') == $currentTerm || get_option('lsp-keyphrase4') == $currentTerm || get_option('lsp-keyphrase5') == $currentTerm || get_option('lsp-keyphrase6') == $currentTerm || get_option('lsp-keyphrase7') == $currentTerm || get_option('lsp-keyphrase8') == $currentTerm || get_option('lsp-keyphrase9') == $currentTerm || get_option('lsp-keyphrase10') == $currentTerm  || get_option('lsp-keyphrase-override') == $currentTerm || get_option('lsp-keyphrase-override2') == $currentTerm || get_option('lsp-keyphrase-override3') == $currentTerm || get_option('lsp-keyphrase-override4') == $currentTerm || get_option('lsp-keyphrase-override5') == $currentTerm || get_option('lsp-keyphrase-override6') == $currentTerm || get_option('lsp-keyphrase-override7') == $currentTerm || get_option('lsp-keyphrase-override8') == $currentTerm || get_option('lsp-keyphrase-override9') == $currentTerm || get_option('lsp-keyphrase-override10') == $currentTerm ) && (strstr($title,__("Local SEO Portfolio",'lsp_text_domain')))){
      //  if ( get_the_ID() == get_option('lsp-ptemplate-id') && (get_option('lsp-keyphrase') == $currentTerm || get_option('lsp-keyphrase2') == $currentTerm || get_option('lsp-keyphrase3') == $currentTerm || get_option('lsp-keyphrase4') == $currentTerm || get_option('lsp-keyphrase5') == $currentTerm || get_option('lsp-keyphrase6') == $currentTerm || get_option('lsp-keyphrase7') == $currentTerm || get_option('lsp-keyphrase8') == $currentTerm || get_option('lsp-keyphrase9') == $currentTerm || get_option('lsp-keyphrase10') == $currentTerm  || get_option('lsp-keyphrase-override') == $currentTerm || get_option('lsp-keyphrase-override2') == $currentTerm || get_option('lsp-keyphrase-override3') == $currentTerm || get_option('lsp-keyphrase-override4') == $currentTerm || get_option('lsp-keyphrase-override5') == $currentTerm || get_option('lsp-keyphrase-override6') == $currentTerm || get_option('lsp-keyphrase-override7') == $currentTerm || get_option('lsp-keyphrase-override8') == $currentTerm || get_option('lsp-keyphrase-override9') == $currentTerm || get_option('lsp-keyphrase-override10') == $currentTerm ) && (strstr($title,__( 'DO NOT DELETE OR RENAME THIS please - It is required for the Local SEO Portfolio Plugin to work and is otherwise hidden', 'lsp_text_domain' )))){
       
            global $wp_query;

            if(($wp_query->query_vars['city']!="list") && ($wp_query->query_vars['state']!="list")) return ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['city']))) . ", " . ucwords(str_replace("-"," ",urldecode($wp_query->query_vars['state']))) . " ". ucwords($currentTerm) . "";
            else return ucwords($currentTerm);

        }
      //  return "debugging";

        return $title;*/
      }

      return $title;
}
add_filter( 'the_title', 'keyphrase_one_title', 9999, 1 );

global $runner;
global $pageContent;
$pageContent ="";
$runner = 0;
function keyphrase_one_content($content) {
  global $runner;
  global $pageContent;
  //echo 'hi'.$content;
//  if ($runner!=1) return $content;
  $runner++;
  // if this is the portfolio one slug
  $currentSlug = "";
  $functionPhrase = "";
	$currentSlugArray = explode("/",$_SERVER["REQUEST_URI"]);
  if($currentSlugArray[4]){
    $currentSlug = $currentSlugArray[2];
  }else{
    $currentSlug = $currentSlugArray[1];
	}
  $currentTerm = str_replace("-"," ",$currentSlug);

  $functionCountry = strtoupper($currentSlugArray[1]);


//  if($currentSlugArray[4]) $functionCountry = $currentSlugArray[4];

	global $wp_query;
    if( get_the_ID() == get_option('lsp-ptemplate-id') && (  ($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase')))  ||  ($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase2')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase3')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase4')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase5')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase6')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase7')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase8')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase9')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase10')))    )  && $wp_query->query_vars['city'] && $wp_query->query_vars['state']) {
      
      global $pageContent;
      if($pageContent=="")$pageContent = do_shortcode(get_localportfolio_content($currentTerm,str_replace("-"," ",urldecode($wp_query->query_vars['city'])),str_replace("-"," ",urldecode($wp_query->query_vars['state'])),$functionCountry));
      return $pageContent;
 //    return do_shortcode(get_localportfolio_content($currentTerm,str_replace("-"," ",$wp_query->query_vars['city']),str_replace("-"," ",$wp_query->query_vars['state']),$functionCountry));
    }

    if(get_option('lsp-keyphrase-override') == $currentTerm) $phraseNum = 1;
    if(get_option('lsp-keyphrase-override2') == $currentTerm) $phraseNum = 2;
    if(get_option('lsp-keyphrase-override3') == $currentTerm) $phraseNum = 3;
    if(get_option('lsp-keyphrase-override4') == $currentTerm) $phraseNum = 4;
    if(get_option('lsp-keyphrase-override5') == $currentTerm) $phraseNum = 5;
    if(get_option('lsp-keyphrase-override6') == $currentTerm) $phraseNum = 6;
    if(get_option('lsp-keyphrase-override7') == $currentTerm) $phraseNum = 7;
    if(get_option('lsp-keyphrase-override8') == $currentTerm) $phraseNum = 8;
    if(get_option('lsp-keyphrase-override9') == $currentTerm) $phraseNum = 9;
    if(get_option('lsp-keyphrase-override10') == $currentTerm) $phraseNum = 10;

  
    if( get_the_ID() == get_option('lsp-ptemplate-id') && (  ($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override')))  ||  ($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override2')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override3')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override4')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override5')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override6')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override7')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override8')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override9')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override10'))) ||   ($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override')))  ||  ($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override2')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override3')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override4')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override5')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override6')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override7')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override8')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override9')))  ||($currentSlug == str_replace(" ","-",get_option('lsp-keyphrase-override10')))   )  && $wp_query->query_vars['city'] && $wp_query->query_vars['state']) {
     
//     if($phraseNum==1)return do_shortcode(get_localportfolio_content(get_option('lsp-keyphrase'),str_replace("-"," ",$wp_query->query_vars['city']),str_replace("-"," ",$wp_query->query_vars['state']),$functionCountry));
//     if($phraseNum>1)return do_shortcode(get_localportfolio_content(get_option('lsp-keyphrase'.$phraseNum),str_replace("-"," ",$wp_query->query_vars['city']),str_replace("-"," ",$wp_query->query_vars['state']),$functionCountry));
    
     global $pageContent;
     if($phraseNum==1 && $pageContent == "")$pageContent = do_shortcode(get_localportfolio_content(get_option('lsp-keyphrase'),str_replace("-"," ",urldecode($wp_query->query_vars['city'])),str_replace("-"," ",urldecode($wp_query->query_vars['state'])),$functionCountry));
     if($phraseNum>1 && $pageContent == "")$pageContent = do_shortcode(get_localportfolio_content(get_option('lsp-keyphrase'.$phraseNum),str_replace("-"," ",urldecode($wp_query->query_vars['city'])),str_replace("-"," ",urldecode($wp_query->query_vars['state'])),$functionCountry));

    }

  // otherwise returns the database content
  global $pageContent;
  if($pageContent!="") return $pageContent;
  else return $content;
}
add_filter( 'the_content', 'keyphrase_one_content',9999999 );




//done: Update the 2 functions below to use the geoservice
function lsp_get_content() {
  global $post;
  if( (get_option('lsp-city')!="") && (get_option('lsp-publish-now')=='yes') && (get_option('lsp-ptemplate-id')!= $post->ID) && (is_home() || is_front_page() || ((get_option('lsp-cities-all-pages')!='no')))){

    $total_cities = get_option('lsp-max-cities');

    $total_portfolios = 0;

    if (get_option('lsp-keyphrase') && get_option('lsp-publish-now') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase2') && get_option('lsp-publish-now2') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase3') && get_option('lsp-publish-now3') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase4') && get_option('lsp-publish-now4') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase5') && get_option('lsp-publish-now5') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase6') && get_option('lsp-publish-now6') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase7') && get_option('lsp-publish-now7') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase8') && get_option('lsp-publish-now8') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase9') && get_option('lsp-publish-now9') == "yes") $total_portfolios+=1;
    if (get_option('lsp-keyphrase10') && get_option('lsp-publish-now10') == "yes") $total_portfolios+=1;

    $cities_per_portfolio = $total_cities / $total_portfolios;

    $cities_per_portfolio = round($cities_per_portfolio);

    $lsp_content = "";


//  	if($total_portfolios ==1){
    if(0){
      $lsp_content .= "<div style='background:#".get_option('lsp-homepage-footer-links-background-color')."'><font color='#".get_option('lsp-text-color')."'><br><br>".__("You can see who we've worked with near you that you might know by browsing our hierarchical portfolio directory below. Cities we serve include ","lsp_text_domain");
      //$lsp_content .= $cities_per_portfolio;
        ///INSERT LATEST
      //
      global $wpdb;
      $query2 = "SELECT a.meta_value as city, b.meta_value as state, d.meta_value as country FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND d.meta_key='lsp_post_country' AND a.post_id = b.post_id AND b.post_id = c.post_id";

      //OLD Changed to make it show all when only one portfolio
//      $query2 = "SELECT a.meta_value as city, b.meta_value as state, d.meta_value as country FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$k)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND d.meta_key='lsp_post_country' AND a.post_id = b.post_id AND b.post_id = c.post_id";
      //$query2 = "SELECT a.meta_value as city, b.meta_value as state FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase')."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND a.post_id = b.post_id AND b.post_id = c.post_id";
      //echo $query2;
      //  $query2 = $wpdb->prepare($query2);
      global $wpdb;
      $citystates = $wpdb->get_results($query2);
      $projectsCounter = 0;
      $projectsString .= "";
      foreach ($citystates as $citystate) {
        if($projectsCounter>100) break;
        $projectArray[$projectsCounter]= $citystate->city.",".$citystate->state;
        $projectsString .= $citystate->city.",".$citystate->state.",".$citystate->country."|";
        $projectsCounter++;
      }

//      echo $projectsString;




      $geo_string = curlfallback('http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&city='.urlencode(get_option('lsp-city')).'&state='.urlencode(get_option('lsp-state')).'&request=cities'.'&radius='.get_option('lsp-radius').'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit')).'&splimit='.urlencode(get_option('lsp-state-population-limit')).'&nplimit='.urlencode(get_option('lsp-national-population-limit')).'&iplimit='.urlencode(get_option('lsp-international-population-limit')).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit')).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit')).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit')).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit')).'&addcities='.urlencode(get_option('lsp-add-cities')).'&excludecities='.urlencode(get_option('lsp-exclude-cities')).'&addstates='.urlencode(get_option('lsp-add-states')).'&excludestates='.urlencode(get_option('lsp-exclude-states')).'&addcountries='.urlencode(get_option('lsp-add-countries')).'&localfocus='.urlencode(get_option('lsp-local-focus')).'&statefocus='.urlencode(get_option('lsp-state-focus')).'&countryfocus='.urlencode(get_option('lsp-country-focus')).'&internationalfocus='.urlencode(get_option('lsp-international-focus')).'&projectsString='.urlencode($projectsString));




      //'&exclude='.urlencode(get_option('lsp-exclude-cities')).'&localLimit='.urlencode(get_option('lsp-local-population-limit')).'&nationalLimit='.urlencode(get_option('lsp-national-population-limit')).'&internationalLimit='.urlencode(get_option('lsp-international-population-limit'))

     // $lsp_content .= $geo_string;
     // $lsp_content .= 'http://www.instawowlocalseo.com/?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'?key='.get_option('lsp-api-key').'&city='.urlencode(get_option('lsp-city')).'&state='.urlencode(get_option('lsp-state')).'&request=cities'.'&radius='.get_option('lsp-radius').'&exclude='.urlencode(get_option('lsp-exclude-cities')).'&count='.$cities_per_portfolio;
      /// INSERT HERE ALSO UGH
      $geo_array = explode("|",$geo_string);
      $geo_string_final = "";

      $main_portfolio_term = get_option('lsp-keyphrase');
      if(get_option('lsp-keyphrase-override')) $main_portfolio_term = get_option('lsp-keyphrase-override');
      $len = count($geo_array);
      $i = 0;
      foreach ($geo_array as $geo){
        $explodedgeo = explode(",",$geo);
        if($geo=="")break;
        if($i != $len -2){
          $geo_string_final .= '<a href="'. home_url()."/";
          $geo_string_final .= strtolower(trim($explodedgeo[3]))."/";
          $geo_string_final .= str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'."<font color='".get_option('lsp-link-color')."'>".$explodedgeo[0].'</font></a>, ';
        }
        else{
          if($len==2)$geo_string_final .= ' <a href="'. home_url()."/";
          else $geo_string_final .= ' and <a href="'. home_url()."/";
          $geo_string_final .= strtolower(trim($explodedgeo[3]))."/";
          $geo_string_final .= str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'."<font color='".get_option('lsp-link-color')."'>".$explodedgeo[0].'</font></a>.';
        }
        $i++;
      }
      $lsp_content .= $geo_string_final;
      $lsp_content .= "</font></div>";
    	return $lsp_content;
    }

    //if($total_portfolios > 1){





    if(get_option('lsp-footer-links')!='no'){
      if(get_option('lsp_content')) return get_option('lsp_content');

      $classString = "";
      $bgString = "";
      if(get_option('lsp-add-classes'))$classString = " class='".get_option('lsp-add-classes')."'";
      if(get_option('lsp-homepage-footer-links-background-color')) $bgString = " style='background:#".get_option('lsp-homepage-footer-links-background-color')."'";

      $lsp_content .= "<div".$bgString.$classString."><font color='".get_option('lsp-text-color')."'><br><br>";
      for($i=1; $i<=$total_portfolios; $i++){
          if($i==1){ 
            if(get_option('lsp-footer-intro')=="") $lsp_content .= __("You can see who we've worked with near you that you might know by browsing our hierarchical portfolio directory below. ",'lsp_text_domain');
            else $lsp_content .= get_option('lsp-footer-intro');




          }
          if($i==1)$lsp_content .= __("For ",'lsp_text_domain').get_option('lsp-keyphrase').__(", cities we serve include ","lsp_text_domain");

          if($i>1)$lsp_content .= __("For ",'lsp_text_domain').get_option('lsp-keyphrase'.$i).__(", cities we serve include ","lsp_text_domain");


          if($i==1){
            if(get_option('lsp-keyphrase-override')) $main_portfolio_term = get_option('lsp-keyphrase-override');
            else $main_portfolio_term = get_option('lsp-keyphrase');

          }
          
          if($i>1){
            if(get_option('lsp-keyphrase-override'.$i)) $main_portfolio_term = get_option('lsp-keyphrase-override'.$i);
            else $main_portfolio_term = get_option('lsp-keyphrase'.$i);

          }
          ///INSERT LATEST
          $k = "";
          if($i>1)$k=$i;

              global $wpdb;
              $query2 = "SELECT a.meta_value as city, b.meta_value as state, d.meta_value as country FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$k)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND d.meta_key='lsp_post_country' AND a.post_id = b.post_id AND b.post_id = c.post_id";
//              echo $query2;
              //  $query2 = $wpdb->prepare($query2);
              global $wpdb;
              $citystates = $wpdb->get_results($query2);
              $projectsCounter = 0;
              $projectsString .= "";
              foreach ($citystates as $citystate) {
                if($projectsCounter>100) break;
                $projectArray[$projectsCounter]= $citystate->city.",".$citystate->state;
                $projectsString .= $citystate->city.",".$citystate->state.",".$citystate->country."|";
                $projectsCounter++;
               // echo $projectsCounter;
              }

               //echo $projectsString;

           $z = "1";
           if($i>1)$z=$i;
            $projectsString = site_url()."/?portfolioquery=".$z;

          $blah = 0;
          $blah = $_SERVER['HTTP_REFERER'] ."|". site_url();

          ///NEEDSWORK -- needs $onlyCities etc. variables calculated above
//          echo 'http://www.instawowlocalseo.com/?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'?key='.get_option('lsp-api-key').'&city='.urlencode(get_option('lsp-city')).'&state='.urlencode(get_option('lsp-state')).'&request=cities'.'&radius='.get_option('lsp-radius').'&exclude='.urlencode(get_option('lsp-exclude-cities')).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit')).'&splimit='.urlencode(get_option('lsp-state-population-limit')).'&nplimit='.urlencode(get_option('lsp-national-population-limit')).'&iplimit='.urlencode(get_option('lsp-international-population-limit')).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit')).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit')).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit')).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit')).'&addcities='.urlencode(get_option('lsp-add-cities')).'&excludecities='.urlencode(get_option('lsp-exclude-cities')).'&addstates='.urlencode(get_option('lsp-add-states')).'&excludestates='.urlencode(get_option('lsp-exclude-states')).'&addcountries='.urlencode(get_option('lsp-add-countries')).'&localfocus='.urlencode(get_option('lsp-local-focus')).'&statefocus='.urlencode(get_option('lsp-state-focus')).'&countryfocus='.urlencode(get_option('lsp-country-focus')).'&internationalfocus='.urlencode(get_option('lsp-international-focus'));
          if($i==1)$holder = 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode(get_option('lsp-set-type')).'&city='.urlencode(get_option('lsp-city')).'&state='.urlencode(get_option('lsp-state')).'&request=cities'.'&radius='.get_option('lsp-radius').'&exclude='.urlencode(get_option('lsp-exclude-cities')).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit')).'&splimit='.urlencode(get_option('lsp-state-population-limit')).'&nplimit='.urlencode(get_option('lsp-national-population-limit')).'&iplimit='.urlencode(get_option('lsp-international-population-limit')).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit')).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit')).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit')).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit')).'&addcities='.urlencode(get_option('lsp-add-cities')).'&excludecities='.urlencode(get_option('lsp-exclude-cities')).'&addstates='.urlencode(get_option('lsp-add-states')).'&excludestates='.urlencode(get_option('lsp-exclude-states')).'&addcountries='.urlencode(get_option('lsp-add-countries')).'&localfocus='.urlencode(get_option('lsp-local-focus')).'&statefocus='.urlencode(get_option('lsp-state-focus')).'&countryfocus='.urlencode(get_option('lsp-country-focus')).'&internationalfocus='.urlencode(get_option('lsp-state-focus')).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;
          ///INSERT LATEST
 //         echo 'http://www.instawowlocalseo.com/?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'?key='.get_option('lsp-api-key').'&city='.urlencode(get_option('lsp-city'.$i)).'&state='.urlencode(get_option('lsp-state'.$i)).'&request=cities'.'&radius='.get_option('lsp-radius'.$i).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i));
          if($i>1)$holder = 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode(get_option('lsp-set-type'.$i)).'&city='.urlencode(get_option('lsp-city'.$i)).'&state='.urlencode(get_option('lsp-state'.$i)).'&request=cities'.'&radius='.get_option('lsp-radius'.$i).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-state-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;
         // echo $holder;
          
          //echo "testing1";
          $geo_string = curlfallback($holder);
          //echo $geo_string;
          //echo "testing2";
          //echo file_get_contents('http://www.instawowlocalseo.com/index3.php?lang=en&key=test&setType=local&city=Roswell&state=Georgia&request=cities&radius=20&exclude=&count=90&lplimit=&splimit=&nplimit=&iplimit=&lpmaxlimit=&spmaxlimit=&npmaxlimit=&ipmaxlimit=&addcities=&excludecities=&addstates=&excludestates=&addcountries=&localfocus=&statefocus=&countryfocus=&internationalfocus=&onlycities=&onlystates=&onlycountries=&projectsString=http%3A%2F%2Fmarketingagencyatlanta.net%2F%3Fportfolioquery%3D1&huh=http://marketingagencyatlanta.net/2016/01/22/hello-world/|http://marketingagencyatlanta.net');
          $geo_array = explode("|",$geo_string);
          $geo_string_final = "";

          
          $len = count($geo_array);
          $j = 0;
          foreach ($geo_array as $geo){
//            echo "testering" . $geo;
            $explodedgeo = explode(",",$geo);
            if($geo=="")break;
            if($j != $len -2){
              $geo_string_final .= '<a href="'. home_url()."/";
              $geo_string_final .= strtolower(trim($explodedgeo[3]))."/";
              $geo_string_final .= str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].'</a>, ';
            }
            else{
              if($len==2)$geo_string_final .= ' <a href="'. home_url()."/";
              else $geo_string_final .= __(' and ','lsp_text_domain').'<a href="'. home_url()."/";
              $geo_string_final .= strtolower(trim($explodedgeo[3]))."/";
              $geo_string_final .= str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].'</a>. ';
            }
            $j++;
          }
          $lsp_content .= $geo_string_final;            

      }
      $lsp_content .= "</font></div>";
      update_option('lsp_content',$lsp_content);
      return $lsp_content;
    }

  }else return "";
}
function lsp_print_content() {
	$chosen = lsp_get_content();
	echo "<center><div style='z-index:99;position:relative;'>$chosen";
//  if((get_the_ID() == get_option('lsp-ptemplate-id')) && $chosen=="" && get_option('lsp-hide-attribution')!="yes") echo __("Powered by ","lsp_text_domain")."<a href='http://www.instawowlocalseo.com' target='_blank'>".__("Local SEO Portfolio","lsp_text_domain")."</a>";
  echo "</div></center>";
  //if(function_exists('twentyfifteen_credits')) echo "IT EXISTS";
  //$my_theme = wp_get_theme();
  //echo $my_theme->get( 'Name' );
}
$my_theme = wp_get_theme();
if($my_theme->get( 'Name' ) == 'Twenty Fifteen' ){
  add_action( 'twentyfifteen_credits', 'lsp_print_content' );
}else if($my_theme->get( 'Name' ) == 'Twenty Fourteen'){
  add_action( 'twentyfourteen_credits', 'lsp_print_content' );
}else{
  add_action( 'wp_footer', 'lsp_print_content' );
}




/**
 * Admin menu & options / form for the plugin
 */
add_action( 'admin_menu', 'lsp_menu' );
function lsp_menu() {
	add_options_page( __("Local SEO Portfolio Options","lsp_text_domain"), __("Local SEO Portfolio","lsp_text_domain"), 'manage_options', 'localseoportfolio', 'lsp_options' );
}

//huh?: Fill out this function...huh?
function lsp_connector(){
  $lspConnector = "";
  echo $lspConnector;
}

function lsp_options() {
/*
	if ( !current_user_can( 'lsp_manage_options' ) )  {
		wp_die( __( 'You do not have sufficient permissions to access this page.' ) );
	}*/

  if(get_option('lsp-form-header')=="") update_option('lsp-form-header',__('Get a Quote!','lsp_text_domain'));





	// probably hidden
	$lsp_ptemplate_id = get_option('lsp-ptemplate-id');
  // probably hidden
  $lsp_homepage_text = get_option('lsp-homepage-text');
  // probably hidden
  $lsp_api_key = get_option('lsp-api-key');
  // premium
  $lsp_mozrank = get_option( 'lsp-mozrank' );
  // premium
  $lsp_autoadjust = get_option( 'lsp-autoadjust' );
  // premium


  $lsp_add_classes = get_option( 'lsp-add-classes' );
  $lsp_footer_intro = get_option( 'lsp-footer-intro' );
  $lsp_linking_sentence = get_option( 'lsp-linking-sentence' );
  $lsp_served_sentence = get_option( 'lsp-served-sentence' );
  $lsp_portfolio_format = get_option( 'lsp-portfolio-format' );
  $lsp_footer_links = get_option( 'lsp-footer-links' );
   

  $lsp_enable_categories = get_option( 'lsp-enable-categories' );
  $lsp_preview_urls = get_option( 'lsp-preview-urls' );


  $lsp_use_widget = get_option( 'lsp-use-widget' );

  $lsp_text_color = get_option( 'lsp-text-color' );
  $lsp_link_color = get_option( 'lsp-link-color' );
  $lsp_header_color = get_option( 'lsp-header-color' );
  $lsp_homepage_footer_links_background_color = get_option( 'lsp-homepage-footer-links-background-color' );

  $lsp_hide_attribution = get_option( 'lsp-hide-attribution' );

  $lsp_cities_all_pages = get_option('lsp-cities-all-pages');
  $lsp_show_all_projects = get_option('lsp-show-all-projects');

  $lsp_max_cities = get_option('lsp-max-cities');
  $lsp_how_far = get_option('lsp-how-far');
  $lsp_hide_headlines = get_option('lsp-hide-headlines');
	$lsp_intro_text = get_option('lsp-intro-text');
  $lsp_city = get_option( 'lsp-city' );
  $lsp_state = get_option( 'lsp-state' );
  $lsp_keyphrase = get_option( 'lsp-keyphrase' );
  $lsp_keyphrase_override = get_option( 'lsp-keyphrase-override' );
  $lsp_radius = get_option( 'lsp-radius' );
  $lsp_only_match_cities = get_option( 'lsp-only-match-cities' );
  $lsp_publish_now = get_option( 'lsp-publish-now' );

  $lsp_smart_settings = get_option( 'lsp-smart-settings' );
  $lsp_local_focus = get_option( 'lsp-local-focus' );
  $lsp_state_focus = get_option( 'lsp-state-focus' );
  $lsp_country_focus = get_option( 'lsp-country-focus' );




  $lsp_local_max_limit = get_option( 'lsp-local-max-limit' );
  $lsp_national_max_limit = get_option( 'lsp-national-max-limit' );
  $lsp_international_max_limit = get_option( 'lsp-international-max-limit' );


  $lsp_contact_form = get_option('lsp-contact-form');
  $lsp_email_addresses = get_option('lsp-email-addresses');
  $lsp_form_header = get_option('lsp-form-header');
  $lsp_footer_classes = get_option('lsp-footer-classes');
  $lsp_smaller_cities_text = get_option('lsp-smaller-cities-text');


  $lsp_smaller_cities = get_option( 'lsp-smaller-cities' );

  // premium
  $lsp_set_type = get_option( 'lsp-set-type' );
  // premium
  $lsp_exclude_cities = get_option( 'lsp-exclude-cities' );
  // premium
  $lsp_add_cities = get_option( 'lsp-add-cities' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations = get_option( 'lsp-abbreviations' );
  // premium
  $lsp_exclude_states = get_option( 'lsp-exclude-states' );
  // premium
  $lsp_add_states = get_option( 'lsp-add-states' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit = get_option( 'lsp-local-population-limit' );
  // premium
  $lsp_national_population_limit = get_option( 'lsp-national-population-limit' );
  // premium
  $lsp_international_population_limit = get_option( 'lsp-international-population-limit' );
  // premium
  $lsp_exclude_countries = get_option( 'lsp-exclude-countries' );
  // premium
  $lsp_add_countries = get_option( 'lsp-add-countries' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities2 = get_option('lsp-max-cities2');
  $lsp_how_far2 = get_option('lsp-how-far2');
  $lsp_hide_headlines2 = get_option('lsp-hide-headlines2');
  $lsp_intro_text2 = get_option('lsp-intro-text2');
  $lsp_city2 = get_option( 'lsp-city2' );
  $lsp_state2 = get_option( 'lsp-state2' );
  $lsp_keyphrase2 = get_option( 'lsp-keyphrase2' );
  $lsp_keyphrase_override2 = get_option( 'lsp-keyphrase-override2' );
  $lsp_radius2 = get_option( 'lsp-radius2' );
  $lsp_only_match_cities2 = get_option( 'lsp-only-match-cities2' );
  $lsp_publish_now2 = get_option( 'lsp-publish-now2' );

  $lsp_smart_settings2 = get_option( 'lsp-smart-settings2' );
  $lsp_local_focus2 = get_option( 'lsp-local-focus2' );
  $lsp_state_focus2 = get_option( 'lsp-state-focus2' );
  $lsp_country_focus2 = get_option( 'lsp-country-focus2' );


  $lsp_local_max_limit2 = get_option( 'lsp-local-max-limit2' );
  $lsp_national_max_limit2 = get_option( 'lsp-national-max-limit2' );
  $lsp_international_max_limit2 = get_option( 'lsp-international-max-limit2' );
  $lsp_smaller_cities2 = get_option( 'lsp-smaller-cities2' );

  // premium
  $lsp_set_type2 = get_option( 'lsp-set-type2' );
  // premium
  $lsp_exclude_cities2 = get_option( 'lsp-exclude-cities2' );
  // premium
  $lsp_add_cities2 = get_option( 'lsp-add-cities2' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations2 = get_option( 'lsp-abbreviations2' );
  // premium
  $lsp_exclude_states2 = get_option( 'lsp-exclude-states2' );
  // premium
  $lsp_add_states2 = get_option( 'lsp-add-states2' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit2 = get_option( 'lsp-local-population-limit2' );
  // premium
  $lsp_national_population_limit2 = get_option( 'lsp-national-population-limit2' );
  // premium
  $lsp_international_population_limit2 = get_option( 'lsp-international-population-limit2' );
  // premium
  $lsp_exclude_countries2 = get_option( 'lsp-exclude-countries2' );
  // premium
  $lsp_add_countries2 = get_option( 'lsp-add-countries2' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities3 = get_option('lsp-max-cities3');
  $lsp_how_far3 = get_option('lsp-how-far3');
  $lsp_hide_headlines3 = get_option('lsp-hide-headlines3');
  $lsp_intro_text3 = get_option('lsp-intro-text3');
  $lsp_city3 = get_option( 'lsp-city3' );
  $lsp_state3 = get_option( 'lsp-state3' );
  $lsp_keyphrase3 = get_option( 'lsp-keyphrase3' );
  $lsp_keyphrase_override3 = get_option( 'lsp-keyphrase-override3' );
  $lsp_radius3 = get_option( 'lsp-radius3' );
  $lsp_only_match_cities3 = get_option( 'lsp-only-match-cities3' );
  $lsp_publish_now3 = get_option( 'lsp-publish-now3' );

  $lsp_smart_settings3 = get_option( 'lsp-smart-settings3' );
  $lsp_local_focus3 = get_option( 'lsp-local-focus3' );
  $lsp_state_focus3 = get_option( 'lsp-state-focus3' );
  $lsp_country_focus3 = get_option( 'lsp-country-focus3' );

  $lsp_local_max_limit3 = get_option( 'lsp-local-max-limit3' );
  $lsp_national_max_limit3 = get_option( 'lsp-national-max-limit3' );
  $lsp_international_max_limit3 = get_option( 'lsp-international-max-limit3' );
  $lsp_smaller_cities3 = get_option( 'lsp-smaller-cities3' );

  // premium
  $lsp_set_type3 = get_option( 'lsp-set-type3' );
  // premium
  $lsp_exclude_cities3 = get_option( 'lsp-exclude-cities3' );
  // premium
  $lsp_add_cities3 = get_option( 'lsp-add-cities3' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations3 = get_option( 'lsp-abbreviations3' );
  // premium
  $lsp_exclude_states3 = get_option( 'lsp-exclude-states3' );
  // premium
  $lsp_add_states3 = get_option( 'lsp-add-states3' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit3 = get_option( 'lsp-local-population-limit3' );
  // premium
  $lsp_national_population_limit3 = get_option( 'lsp-national-population-limit3' );
  // premium
  $lsp_international_population_limit3 = get_option( 'lsp-international-population-limit3' );
  // premium
  $lsp_exclude_countries3 = get_option( 'lsp-exclude-countries3' );
  // premium
  $lsp_add_countries3 = get_option( 'lsp-add-countries3' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities4 = get_option('lsp-max-cities4');
  $lsp_how_far4 = get_option('lsp-how-far4');
  $lsp_hide_headlines4 = get_option('lsp-hide-headlines4');
  $lsp_intro_text4 = get_option('lsp-intro-text4');
  $lsp_city4 = get_option( 'lsp-city4' );
  $lsp_state4 = get_option( 'lsp-state4' );
  $lsp_keyphrase4 = get_option( 'lsp-keyphrase4' );
  $lsp_keyphrase_override4 = get_option( 'lsp-keyphrase-override4' );
  $lsp_radius4 = get_option( 'lsp-radius4' );
  $lsp_only_match_cities4 = get_option( 'lsp-only-match-cities4' );
  $lsp_publish_now4 = get_option( 'lsp-publish-now4' );

  $lsp_smart_settings4 = get_option( 'lsp-smart-settings4' );
  $lsp_local_focus4 = get_option( 'lsp-local-focus4' );
  $lsp_state_focus4 = get_option( 'lsp-state-focus4' );
  $lsp_country_focus4 = get_option( 'lsp-country-focus4' );


  $lsp_local_max_limit4 = get_option( 'lsp-local-max-limit4' );
  $lsp_national_max_limit4 = get_option( 'lsp-national-max-limit4' );
  $lsp_international_max_limit4 = get_option( 'lsp-international-max-limit4' );

  $lsp_smaller_cities4 = get_option( 'lsp-smaller-cities4' );

  // premium
  $lsp_set_type4 = get_option( 'lsp-set-type4' );
  // premium
  $lsp_exclude_cities4 = get_option( 'lsp-exclude-cities4' );
  // premium
  $lsp_add_cities4 = get_option( 'lsp-add-cities4' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations4 = get_option( 'lsp-abbreviations4' );
  // premium
  $lsp_exclude_states4 = get_option( 'lsp-exclude-states4' );
  // premium
  $lsp_add_states4 = get_option( 'lsp-add-states4' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit4 = get_option( 'lsp-local-population-limit4' );
  // premium
  $lsp_national_population_limit4 = get_option( 'lsp-national-population-limit4' );
  // premium
  $lsp_international_population_limit4 = get_option( 'lsp-international-population-limit4' );
  // premium
  $lsp_exclude_countries4 = get_option( 'lsp-exclude-countries4' );
  // premium
  $lsp_add_countries4 = get_option( 'lsp-add-countries4' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities5 = get_option('lsp-max-cities5');
  $lsp_how_far5 = get_option('lsp-how-far5');
  $lsp_hide_headlines5 = get_option('lsp-hide-headlines5');
  $lsp_intro_text5 = get_option('lsp-intro-text5');
  $lsp_city5 = get_option( 'lsp-city5' );
  $lsp_state5 = get_option( 'lsp-state5' );
  $lsp_keyphrase5 = get_option( 'lsp-keyphrase5' );
  $lsp_keyphrase_override5 = get_option( 'lsp-keyphrase-override5' );
  $lsp_radius5 = get_option( 'lsp-radius5' );
  $lsp_only_match_cities5 = get_option( 'lsp-only-match-cities5' );
  $lsp_publish_now5 = get_option( 'lsp-publish-now5' );

  $lsp_smart_settings5 = get_option( 'lsp-smart-settings5' );
  $lsp_local_focus5 = get_option( 'lsp-local-focus5' );
  $lsp_state_focus5 = get_option( 'lsp-state-focus5' );
  $lsp_country_focus5 = get_option( 'lsp-country-focus5' );

  $lsp_local_max_limit5 = get_option( 'lsp-local-max-limit5' );
  $lsp_national_max_limit5 = get_option( 'lsp-national-max-limit5' );
  $lsp_international_max_limit5 = get_option( 'lsp-international-max-limit5' );

  $lsp_smaller_cities5 = get_option( 'lsp-smaller-cities5' );

  // premium
  $lsp_set_type5 = get_option( 'lsp-set-type5' );
  // premium
  $lsp_exclude_cities5 = get_option( 'lsp-exclude-cities5' );
  // premium
  $lsp_add_cities5 = get_option( 'lsp-add-cities5' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations5 = get_option( 'lsp-abbreviations5' );
  // premium
  $lsp_exclude_states5 = get_option( 'lsp-exclude-states5' );
  // premium
  $lsp_add_states5 = get_option( 'lsp-add-states5' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit5 = get_option( 'lsp-local-population-limit5' );
  // premium
  $lsp_national_population_limit5 = get_option( 'lsp-national-population-limit5' );
  // premium
  $lsp_international_population_limit5 = get_option( 'lsp-international-population-limit5' );
  // premium
  $lsp_exclude_countries5 = get_option( 'lsp-exclude-countries5' );
  // premium
  $lsp_add_countries5 = get_option( 'lsp-add-countries5' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities6 = get_option('lsp-max-cities6');
  $lsp_how_far6 = get_option('lsp-how-far6');
  $lsp_hide_headlines6 = get_option('lsp-hide-headlines6');
  $lsp_intro_text6 = get_option('lsp-intro-text6');
  $lsp_city6 = get_option( 'lsp-city6' );
  $lsp_state6 = get_option( 'lsp-state6' );
  $lsp_keyphrase6 = get_option( 'lsp-keyphrase6' );
  $lsp_keyphrase_override6 = get_option( 'lsp-keyphrase-override6' );
  $lsp_radius6 = get_option( 'lsp-radius6' );
  $lsp_only_match_cities6 = get_option( 'lsp-only-match-cities6' );
  $lsp_publish_now6 = get_option( 'lsp-publish-now6' );

  $lsp_smart_settings6 = get_option( 'lsp-smart-settings6' );
  $lsp_local_focus6 = get_option( 'lsp-local-focus6' );
  $lsp_state_focus6 = get_option( 'lsp-state-focus6' );
  $lsp_country_focus6 = get_option( 'lsp-country-focus6' );

  $lsp_local_max_limit6 = get_option( 'lsp-local-max-limit6' );
  $lsp_national_max_limit6 = get_option( 'lsp-national-max-limit6' );
  $lsp_international_max_limit6 = get_option( 'lsp-international-max-limit6' );
  $lsp_smaller_cities6 = get_option( 'lsp-smaller-cities6' );

  // premium
  $lsp_set_type6 = get_option( 'lsp-set-type6' );
  // premium
  $lsp_exclude_cities6 = get_option( 'lsp-exclude-cities6' );
  // premium
  $lsp_add_cities6 = get_option( 'lsp-add-cities6' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations6 = get_option( 'lsp-abbreviations6' );
  // premium
  $lsp_exclude_states6 = get_option( 'lsp-exclude-states6' );
  // premium
  $lsp_add_states6 = get_option( 'lsp-add-states6' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit6 = get_option( 'lsp-local-population-limit6' );
  // premium
  $lsp_national_population_limit6 = get_option( 'lsp-national-population-limit6' );
  // premium
  $lsp_international_population_limit6 = get_option( 'lsp-international-population-limit6' );
  // premium
  $lsp_exclude_countries6 = get_option( 'lsp-exclude-countries6' );
  // premium
  $lsp_add_countries6 = get_option( 'lsp-add-countries6' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities7 = get_option('lsp-max-cities7');
  $lsp_how_far7 = get_option('lsp-how-far7');
  $lsp_hide_headlines7 = get_option('lsp-hide-headlines7');
  $lsp_intro_text7 = get_option('lsp-intro-text7');
  $lsp_city7 = get_option( 'lsp-city7' );
  $lsp_state7 = get_option( 'lsp-state7' );
  $lsp_keyphrase7 = get_option( 'lsp-keyphrase7' );
  $lsp_keyphrase_override7 = get_option( 'lsp-keyphrase-override7' );
  $lsp_radius7 = get_option( 'lsp-radius7' );
  $lsp_only_match_cities7 = get_option( 'lsp-only-match-cities7' );
  $lsp_publish_now7 = get_option( 'lsp-publish-now7' );

  $lsp_smart_settings7 = get_option( 'lsp-smart-settings7' );
  $lsp_local_focus7 = get_option( 'lsp-local-focus7' );
  $lsp_state_focus7 = get_option( 'lsp-state-focus7' );
  $lsp_country_focus7 = get_option( 'lsp-country-focus7' );

  $lsp_local_max_limit7 = get_option( 'lsp-local-max-limit7' );
  $lsp_national_max_limit7 = get_option( 'lsp-national-max-limit7' );
  $lsp_international_max_limit7 = get_option( 'lsp-international-max-limit7' );
  $lsp_smaller_cities7 = get_option( 'lsp-smaller-cities7' );

  // premium
  $lsp_set_type7 = get_option( 'lsp-set-type7' );
  // premium
  $lsp_exclude_cities7 = get_option( 'lsp-exclude-cities7' );
  // premium
  $lsp_add_cities7 = get_option( 'lsp-add-cities7' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations7 = get_option( 'lsp-abbreviations7' );
  // premium
  $lsp_exclude_states7 = get_option( 'lsp-exclude-states7' );
  // premium
  $lsp_add_states7 = get_option( 'lsp-add-states7' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit7 = get_option( 'lsp-local-population-limit7' );
  // premium
  $lsp_national_population_limit7 = get_option( 'lsp-national-population-limit7' );
  // premium
  $lsp_international_population_limit7 = get_option( 'lsp-international-population-limit7' );
  // premium
  $lsp_exclude_countries7 = get_option( 'lsp-exclude-countries7' );
  // premium
  $lsp_add_countries7 = get_option( 'lsp-add-countries7' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities8 = get_option('lsp-max-cities8');
  $lsp_how_far8 = get_option('lsp-how-far8');
  $lsp_hide_headlines8 = get_option('lsp-hide-headlines8');
  $lsp_intro_text8 = get_option('lsp-intro-text8');
  $lsp_city8 = get_option( 'lsp-city8' );
  $lsp_state8 = get_option( 'lsp-state8' );
  $lsp_keyphrase8 = get_option( 'lsp-keyphrase8' );
  $lsp_keyphrase_override8 = get_option( 'lsp-keyphrase-override8' );
  $lsp_radius8 = get_option( 'lsp-radius8' );
  $lsp_only_match_cities8 = get_option( 'lsp-only-match-cities8' );
  $lsp_publish_now8 = get_option( 'lsp-publish-now8' );

  $lsp_smart_settings8 = get_option( 'lsp-smart-settings8' );
  $lsp_local_focus8 = get_option( 'lsp-local-focus8' );
  $lsp_state_focus8 = get_option( 'lsp-state-focus8' );
  $lsp_country_focus8 = get_option( 'lsp-country-focus8' );

  $lsp_local_max_limit8 = get_option( 'lsp-local-max-limit8' );
  $lsp_national_max_limit8 = get_option( 'lsp-national-max-limit8' );
  $lsp_international_max_limit8 = get_option( 'lsp-international-max-limit8' );
  $lsp_smaller_cities8 = get_option( 'lsp-smaller-cities8' );

  // premium
  $lsp_set_type8 = get_option( 'lsp-set-type8' );
  // premium
  $lsp_exclude_cities8 = get_option( 'lsp-exclude-cities8' );
  // premium
  $lsp_add_cities8 = get_option( 'lsp-add-cities8' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations8 = get_option( 'lsp-abbreviations8' );
  // premium
  $lsp_exclude_states8 = get_option( 'lsp-exclude-states8' );
  // premium
  $lsp_add_states8 = get_option( 'lsp-add-states8' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit8 = get_option( 'lsp-local-population-limit8' );
  // premium
  $lsp_national_population_limit8 = get_option( 'lsp-national-population-limit8' );
  // premium
  $lsp_international_population_limit8 = get_option( 'lsp-international-population-limit8' );
  // premium
  $lsp_exclude_countries8 = get_option( 'lsp-exclude-countries8' );
  // premium
  $lsp_add_countries8 = get_option( 'lsp-add-countries8' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities9 = get_option('lsp-max-cities9');
  $lsp_how_far9 = get_option('lsp-how-far9');
  $lsp_hide_headlines9 = get_option('lsp-hide-headlines9');
  $lsp_intro_text9 = get_option('lsp-intro-text9');
  $lsp_city9 = get_option( 'lsp-city9' );
  $lsp_state9 = get_option( 'lsp-state9' );
  $lsp_keyphrase9 = get_option( 'lsp-keyphrase9' );
  $lsp_keyphrase_override9 = get_option( 'lsp-keyphrase-override9' );
  $lsp_radius9 = get_option( 'lsp-radius9' );
  $lsp_only_match_cities9 = get_option( 'lsp-only-match-cities9' );
  $lsp_publish_now9 = get_option( 'lsp-publish-now9' );

  $lsp_smart_settings9 = get_option( 'lsp-smart-settings9' );
  $lsp_local_focus9 = get_option( 'lsp-local-focus9' );
  $lsp_state_focus9 = get_option( 'lsp-state-focus9' );
  $lsp_country_focus9 = get_option( 'lsp-country-focus9' );

  $lsp_local_max_limit9 = get_option( 'lsp-local-max-limit9' );
  $lsp_national_max_limit9 = get_option( 'lsp-national-max-limit9' );
  $lsp_international_max_limit9 = get_option( 'lsp-international-max-limit9' );
  $lsp_smaller_cities9 = get_option( 'lsp-smaller-cities9' );

  // premium
  $lsp_set_type9 = get_option( 'lsp-set-type9' );
  // premium
  $lsp_exclude_cities9 = get_option( 'lsp-exclude-cities9' );
  // premium
  $lsp_add_cities9 = get_option( 'lsp-add-cities9' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations9 = get_option( 'lsp-abbreviations9' );
  // premium
  $lsp_exclude_states9 = get_option( 'lsp-exclude-states9' );
  // premium
  $lsp_add_states9 = get_option( 'lsp-add-states9' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit9 = get_option( 'lsp-local-population-limit9' );
  // premium
  $lsp_national_population_limit9 = get_option( 'lsp-national-population-limit9' );
  // premium
  $lsp_international_population_limit9 = get_option( 'lsp-international-population-limit9' );
  // premium
  $lsp_exclude_countries9 = get_option( 'lsp-exclude-countries9' );
  // premium
  $lsp_add_countries9 = get_option( 'lsp-add-countries9' );
  // show nearest or same-city stuff (nearest)

  $lsp_max_cities10 = get_option('lsp-max-cities10');
  $lsp_how_far10 = get_option('lsp-how-far10');
  $lsp_hide_headlines10 = get_option('lsp-hide-headlines10');
  $lsp_intro_text10 = get_option('lsp-intro-text10');
  $lsp_city10 = get_option( 'lsp-city10' );
  $lsp_state10 = get_option( 'lsp-state10' );
  $lsp_keyphrase10 = get_option( 'lsp-keyphrase10' );
  $lsp_keyphrase_override10 = get_option( 'lsp-keyphrase-override10' );
  $lsp_radius10 = get_option( 'lsp-radius10' );
  $lsp_only_match_cities10 = get_option( 'lsp-only-match-cities10' );
  $lsp_publish_now10 = get_option( 'lsp-publish-now10' );

  $lsp_smart_settings10 = get_option( 'lsp-smart-settings10' );
  $lsp_local_focus10 = get_option( 'lsp-local-focus10' );
  $lsp_state_focus10 = get_option( 'lsp-state-focus10' );
  $lsp_country_focus10 = get_option( 'lsp-country-focus10' );

  $lsp_local_max_limit10 = get_option( 'lsp-local-max-limit10' );
  $lsp_national_max_limit10 = get_option( 'lsp-national-max-limit10' );
  $lsp_international_max_limit10 = get_option( 'lsp-international-max-limit10' );
  $lsp_smaller_cities10 = get_option( 'lsp-smaller-cities10' );

  // premium
  $lsp_set_type10 = get_option( 'lsp-set-type10' );
  // premium
  $lsp_exclude_cities10 = get_option( 'lsp-exclude-cities10' );
  // premium
  $lsp_add_cities10 = get_option( 'lsp-add-cities10' );
  // premium -- use abbreviations or not?
  $lsp_abbreviations10 = get_option( 'lsp-abbreviations10' );
  // premium
  $lsp_exclude_states10 = get_option( 'lsp-exclude-states10' );
  // premium
  $lsp_add_states10 = get_option( 'lsp-add-states10' );
  // premium -- use abbreviations or not?
  $lsp_local_population_limit10 = get_option( 'lsp-local-population-limit10' );
  // premium
  $lsp_national_population_limit10 = get_option( 'lsp-national-population-limit10' );
  // premium
  $lsp_international_population_limit10 = get_option( 'lsp-international-population-limit10' );
  // premium
  $lsp_exclude_countries10 = get_option( 'lsp-exclude-countries10' );
  // premium
  $lsp_add_countries10 = get_option( 'lsp-add-countries10' );
  // show nearest or same-city stuff (nearest)


  flush_rewrite_rules();
  global $wp_rewrite;
  $wp_rewrite->flush_rules();
  //  Premium
  //  Direction(s)?
  // Per Page Limits adjust
  // Hide Titles on Listing Page?
  // Number Counts next to Portfolio Categories / Services Used Counts?

  // See if the user has posted us some information
  if( isset($_POST['lsp-city']) || isset($_POST['lsp-state']) || isset($_POST['lsp-keyphrase'])|| isset($_POST['lsp-radius'])|| isset($_POST['lsp-intro-text'])  ) {
      // Read their posted value





      $lsp_api_key = $_POST['lsp-api-key'];
      $lsp_mozrank = $_POST['lsp-mozrank'];
      $lsp_autoadjust = $_POST['lsp-autoadjust'];
      $lsp_use_widget = $_POST['lsp-use-widget'];

      $lsp_text_color = $_POST['lsp-text-color'];
      $lsp_link_color = $_POST['lsp-link-color'];
      $lsp_header_color = $_POST['lsp-header-color'];
      $lsp_homepage_footer_links_background_color = $_POST['lsp-homepage-footer-links-background-color'];

      $lsp_hide_attribution = $_POST['lsp-hide-attribution'];



      $lsp_enable_categories = $_POST['lsp-enable-categories'];
      $lsp_preview_urls = $_POST['lsp-preview-urls'];





      $lsp_city = $_POST['lsp-city'];
      $lsp_state = $_POST['lsp-state'];
      $lsp_keyphrase = strtolower($_POST['lsp-keyphrase']);
      $lsp_keyphrase_override = strtolower($_POST['lsp-keyphrase-override']);
      $lsp_radius = $_POST['lsp-radius'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius']>100) $lsp_radius = 100;

      $lsp_cities_all_pages = $_POST['lsp-cities-all-pages'];
      $lsp_show_all_projects = $_POST['lsp-show-all-projects'];

      $lsp_max_cities = $_POST['lsp-max-cities'];
      $lsp_how_far = $_POST['lsp-how-far'];

      $lsp_hide_headlines = $_POST['lsp-hide-headlines'];
      $lsp_intro_text = $_POST['lsp-intro-text'];
      $lsp_only_match_cities = $_POST['lsp-only-match-cities'];
      $lsp_publish_now = $_POST['lsp-publish-now'];

      $lsp_smart_settings = $_POST['lsp-smart-settings'];
      $lsp_local_focus = $_POST['lsp-local-focus'];
      $lsp_state_focus = $_POST['lsp-state-focus'];
      $lsp_country_focus = $_POST['lsp-country-focus'];


      $lsp_local_max_limit = $_POST['lsp-local-max-limit'];
      $lsp_national_max_limit = $_POST['lsp-national-max-limit'];
      $lsp_international_max_limit = $_POST['lsp-international-max-limit'];


    
      $lsp_add_classes = $_POST['lsp-add-classes'];
      $lsp_footer_intro = $_POST['lsp-footer-intro'];
      $lsp_linking_sentence = $_POST['lsp-linking-sentence'];
      $lsp_served_sentence = $_POST['lsp-served-sentence'];
      $lsp_portfolio_format = $_POST['lsp-portfolio-format'];
      $lsp_footer_links = $_POST['lsp-footer-links'];



      $lsp_contact_form = $_POST['lsp-contact-form'];
      $lsp_email_addresses = $_POST['lsp-email-addresses'];
      $lsp_form_header = $_POST['lsp-form-header'];
      $lsp_footer_classes = $_POST['lsp-footer-classes'];
      $lsp_smaller_cities_text = $_POST['lsp-smaller-cities-text'];
      $lsp_smaller_cities = $_POST['lsp-smaller-cities'];

      //$lsp_intro_text = $_POST['lsp-intro-text'];
      //$lsp_others_text = $_POST['lsp-others-text'];
      //$lsp_smaller_cities_text = $_POST['lsp-smaller-cities-text'];
      //$lsp_footer_text = $_POST['lsp-footer-text'];



      $lsp_set_type = $_POST['lsp-set-type'];
      $lsp_exclude_cities = $_POST['lsp-exclude-cities'];
      $lsp_add_cities = $_POST['lsp-add-cities'];
      $lsp_abbreviations = $_POST['lsp-abbreviations'];
      $lsp_exclude_states = $_POST['lsp-exclude-states'];
      $lsp_add_states = $_POST['lsp-add-states'];
      $lsp_local_population_limit = $_POST['lsp-local-population-limit'];
      $lsp_national_population_limit = $_POST['lsp-national-population-limit'];
      $lsp_international_population_limit = $_POST[ 'lsp-international-population-limit'];
      $lsp_exclude_countries = $_POST['lsp-exclude-countries'];
      $lsp_add_countries = $_POST['lsp-add-countries'];
      if($lsp_city){
          $country = "US";
          $key = "key";
          $lsp_latitude1 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city'].'&state='.$_POST['lsp_state'].'&country='.$country.'&request=latitude');
          $lsp_longitude1 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city'].'&state='.$_POST['lsp_state'].'&country='.$country.'&request=longitude');
      }

      $lsp_city2 = $_POST['lsp-city2'];
      $lsp_state2 = $_POST['lsp-state2'];
      $lsp_keyphrase2 = strtolower($_POST['lsp-keyphrase2']);
      $lsp_keyphrase_override2 = strtolower($_POST['lsp-keyphrase-override2']);
      $lsp_radius2 = $_POST['lsp-radius2'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius2']>100) $lsp_radius2 = 100;
      update_option('lsp_content',"");

      $lsp_max_cities2 = $_POST['lsp-max-cities2'];
      $lsp_how_far2 = $_POST['lsp-how-far2'];
      $lsp_hide_headlines2 = $_POST['lsp-hide-headlines2'];
      $lsp_intro_text2 = $_POST['lsp-intro-text2'];
      $lsp_only_match_cities2 = $_POST['lsp-only-match-cities2'];
      $lsp_publish_now2 = $_POST['lsp-publish-now2'];

      $lsp_smart_settings2 = $_POST['lsp-smart-settings2'];
      $lsp_local_focus2 = $_POST['lsp-local-focus2'];
      $lsp_state_focus2 = $_POST['lsp-state-focus2'];
      $lsp_country_focus2 = $_POST['lsp-country-focus2'];

      $lsp_local_max_limit2 = $_POST['lsp-local-max-limit2'];
      $lsp_national_max_limit2 = $_POST['lsp-national-max-limit2'];
      $lsp_international_max_limit2 = $_POST['lsp-international-max-limit2'];

      $lsp_set_type2 = $_POST['lsp-set-type2'];
      $lsp_exclude_cities2 = $_POST['lsp-exclude-cities2'];
      $lsp_add_cities2 = $_POST['lsp-add-cities2'];
      $lsp_abbreviations2 = $_POST['lsp-abbreviations2'];
      $lsp_exclude_states2 = $_POST['lsp-exclude-states2'];
      $lsp_add_states2 = $_POST['lsp-add-states2'];
      $lsp_local_population_limit2 = $_POST['lsp-local-population-limit2'];
      $lsp_national_population_limit2 = $_POST['lsp-national-population-limit2'];
      $lsp_international_population_limit2 = $_POST[ 'lsp-international-population-limit2'];
      $lsp_exclude_countries2 = $_POST['lsp-exclude-countries2'];
      $lsp_add_countries2 = $_POST['lsp-add-countries2'];
      $lsp_smaller_cities2 = $_POST['lsp-smaller-cities2'];
      if($lsp_city2){
          $country = "US";
          $key = "key";
          $lsp_latitude2 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city2'].'&state='.$_POST['lsp_post_state2'].'&country='.$country.'&request=latitude');
          $lsp_longitude2 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city2'].'&state='.$_POST['lsp_post_state2'].'&country='.$country.'&request=longitude');
      }


      $lsp_city3 = $_POST['lsp-city3'];
      $lsp_state3 = $_POST['lsp-state3'];
      $lsp_keyphrase3 = strtolower($_POST['lsp-keyphrase3']);
      $lsp_keyphrase_override3 = strtolower($_POST['lsp-keyphrase-override3']);
      $lsp_max_cities3 = $_POST['lsp-max-cities3'];
      $lsp_how_far3 = $_POST['lsp-how-far3'];
      $lsp_radius3 = $_POST['lsp-radius3'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius3']>100) $lsp_radius3 = 100;

      $lsp_hide_headlines3 = $_POST['lsp-hide-headlines3'];
      $lsp_intro_text3 = $_POST['lsp-intro-text3'];
      $lsp_only_match_cities3 = $_POST['lsp-only-match-cities3'];
      $lsp_publish_now3 = $_POST['lsp-publish-now3'];

      $lsp_smart_settings3 = $_POST['lsp-smart-settings3'];
      $lsp_local_focus3 = $_POST['lsp-local-focus3'];
      $lsp_state_focus3 = $_POST['lsp-state-focus3'];
      $lsp_country_focus3 = $_POST['lsp-country-focus3'];


      $lsp_local_max_limit3 = $_POST['lsp-local-max-limit3'];
      $lsp_national_max_limit3 = $_POST['lsp-national-max-limit3'];
      $lsp_international_max_limit3 = $_POST['lsp-international-max-limit3'];


      $lsp_set_type3 = $_POST['lsp-set-type3'];
      $lsp_exclude_cities3 = $_POST['lsp-exclude-cities3'];
      $lsp_add_cities3 = $_POST['lsp-add-cities3'];
      $lsp_abbreviations3 = $_POST['lsp-abbreviations3'];
      $lsp_exclude_states3 = $_POST['lsp-exclude-states3'];
      $lsp_add_states3 = $_POST['lsp-add-states3'];
      $lsp_local_population_limit3 = $_POST['lsp-local-population-limit3'];
      $lsp_national_population_limit3 = $_POST['lsp-national-population-limit3'];
      $lsp_international_population_limit3 = $_POST[ 'lsp-international-population-limit3'];
      $lsp_exclude_countries3 = $_POST['lsp-exclude-countries3'];
      $lsp_add_countries3 = $_POST['lsp-add-countries3'];
      $lsp_smaller_cities3 = $_POST['lsp-smaller-cities3'];
      if($lsp_city3){
          $country = "US";
          $key = "key";
          $lsp_latitude3 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city3'].'&state='.$_POST['lsp_post_state3'].'&country='.$country.'&request=latitude');
          $lsp_longitude3 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city3'].'&state='.$_POST['lsp_post_state3'].'&country='.$country.'&request=longitude');
      }

      $lsp_city4 = $_POST['lsp-city4'];
      $lsp_state4 = $_POST['lsp-state4'];
      $lsp_keyphrase4 = strtolower($_POST['lsp-keyphrase4']);
      $lsp_keyphrase_override4 = strtolower($_POST['lsp-keyphrase-override4']);
      $lsp_radius4 = $_POST['lsp-radius4'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius4']>100) $lsp_radius4 = 100;

      $lsp_max_cities4 = $_POST['lsp-max-cities4'];
      $lsp_how_far4 = $_POST['lsp-how-far4'];
      $lsp_hide_headlines4 = $_POST['lsp-hide-headlines4'];
      $lsp_intro_text4 = $_POST['lsp-intro-text4'];
      $lsp_only_match_cities4 = $_POST['lsp-only-match-cities4'];
      $lsp_publish_now4 = $_POST['lsp-publish-now4'];

      $lsp_smart_settings4 = $_POST['lsp-smart-settings4'];
      $lsp_local_focus4 = $_POST['lsp-local-focus4'];
      $lsp_state_focus4 = $_POST['lsp-state-focus4'];
      $lsp_country_focus4 = $_POST['lsp-country-focus4'];

      $lsp_local_max_limit4 = $_POST['lsp-local-max-limit4'];
      $lsp_national_max_limit4 = $_POST['lsp-national-max-limit4'];
      $lsp_international_max_limit4 = $_POST['lsp-international-max-limit4'];

      $lsp_set_type4 = $_POST['lsp-set-type4'];
      $lsp_exclude_cities4 = $_POST['lsp-exclude-cities4'];
      $lsp_add_cities4 = $_POST['lsp-add-cities4'];
      $lsp_abbreviations4 = $_POST['lsp-abbreviations4'];
      $lsp_exclude_states4 = $_POST['lsp-exclude-states4'];
      $lsp_add_states4 = $_POST['lsp-add-states4'];
      $lsp_local_population_limit4 = $_POST['lsp-local-population-limit4'];
      $lsp_national_population_limit4 = $_POST['lsp-national-population-limit4'];
      $lsp_international_population_limit4 = $_POST[ 'lsp-international-population-limit4'];
      $lsp_exclude_countries4 = $_POST['lsp-exclude-countries4'];
      $lsp_add_countries4 = $_POST['lsp-add-countries4'];
      $lsp_smaller_cities4 = $_POST['lsp-smaller-cities4'];
      if($lsp_city4){
          $country = "US";
          $key = "key";
          $lsp_latitude4 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city4'].'&state='.$_POST['lsp_post_state4'].'&country='.$country.'&request=latitude');
          $lsp_longitude4 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city4'].'&state='.$_POST['lsp_post_state4'].'&country='.$country.'&request=longitude');
      }

      $lsp_city5 = $_POST['lsp-city5'];
      $lsp_state5 = $_POST['lsp-state5'];
      $lsp_keyphrase5 = strtolower($_POST['lsp-keyphrase5']);
      $lsp_keyphrase_override5 = strtolower($_POST['lsp-keyphrase-override5']);
      $lsp_radius5 = $_POST['lsp-radius5'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius5']>100) $lsp_radius5 = 100;
      $lsp_max_cities5 = $_POST['lsp-max-cities5'];
      $lsp_how_far5 = $_POST['lsp-how-far5'];
      $lsp_hide_headlines5 = $_POST['lsp-hide-headlines5'];
      $lsp_intro_text5 = $_POST['lsp-intro-text5'];
      $lsp_only_match_cities5 = $_POST['lsp-only-match-cities5'];
      $lsp_publish_now5 = $_POST['lsp-publish-now5'];

      $lsp_smart_settings5 = $_POST['lsp-smart-settings5'];
      $lsp_local_focus5 = $_POST['lsp-local-focus5'];
      $lsp_state_focus5 = $_POST['lsp-state-focus5'];
      $lsp_country_focus5 = $_POST['lsp-country-focus5'];

      $lsp_local_max_limit5 = $_POST['lsp-local-max-limit5'];
      $lsp_national_max_limit5 = $_POST['lsp-national-max-limit5'];
      $lsp_international_max_limit5 = $_POST['lsp-international-max-limit5'];

      $lsp_set_type5 = $_POST['lsp-set-type5'];
      $lsp_exclude_cities5 = $_POST['lsp-exclude-cities5'];
      $lsp_add_cities5 = $_POST['lsp-add-cities5'];
      $lsp_abbreviations5 = $_POST['lsp-abbreviations5'];
      $lsp_exclude_states5 = $_POST['lsp-exclude-states5'];
      $lsp_add_states5 = $_POST['lsp-add-states5'];
      $lsp_local_population_limit5 = $_POST['lsp-local-population-limit5'];
      $lsp_national_population_limit5 = $_POST['lsp-national-population-limit5'];
      $lsp_international_population_limit5 = $_POST[ 'lsp-international-population-limit5'];
      $lsp_exclude_countries5 = $_POST['lsp-exclude-countries5'];
      $lsp_add_countries5 = $_POST['lsp-add-countries5'];
      $lsp_smaller_cities5 = $_POST['lsp-smaller-cities5'];
      if($lsp_city5){
          $country = "US";
          $key = "key";
          $lsp_latitude5 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city5'].'&state='.$_POST['lsp_post_state5'].'&country='.$country.'&request=latitude');
          $lsp_longitude5 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city5'].'&state='.$_POST['lsp_post_state5'].'&country='.$country.'&request=longitude');
      }

      $lsp_city6 = $_POST['lsp-city6'];
      $lsp_state6 = $_POST['lsp-state6'];
      $lsp_keyphrase6 = strtolower($_POST['lsp-keyphrase6']);
      $lsp_keyphrase_override6 = strtolower($_POST['lsp-keyphrase-override6']);
      $lsp_radius6 = $_POST['lsp-radius6'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius6']>100) $lsp_radius6 = 100;
      $lsp_max_cities6 = $_POST['lsp-max-cities6'];
      $lsp_how_far6 = $_POST['lsp-how-far6'];
      $lsp_hide_headlines6 = $_POST['lsp-hide-headlines6'];
      $lsp_intro_text6 = $_POST['lsp-intro-text6'];
      $lsp_only_match_cities6 = $_POST['lsp-only-match-cities6'];
      $lsp_publish_now6 = $_POST['lsp-publish-now6'];

      $lsp_smart_settings6 = $_POST['lsp-smart-settings6'];
      $lsp_local_focus6 = $_POST['lsp-local-focus6'];
      $lsp_state_focus6 = $_POST['lsp-state-focus6'];
      $lsp_country_focus6 = $_POST['lsp-country-focus6'];

      $lsp_local_max_limit6 = $_POST['lsp-local-max-limit6'];
      $lsp_national_max_limit6 = $_POST['lsp-national-max-limit6'];
      $lsp_international_max_limit6 = $_POST['lsp-international-max-limit6'];

      $lsp_set_type6 = $_POST['lsp-set-type6'];
      $lsp_exclude_cities6 = $_POST['lsp-exclude-cities6'];
      $lsp_add_cities6 = $_POST['lsp-add-cities6'];
      $lsp_abbreviations6 = $_POST['lsp-abbreviations6'];
      $lsp_exclude_states6 = $_POST['lsp-exclude-states6'];
      $lsp_add_states6 = $_POST['lsp-add-states6'];
      $lsp_local_population_limit6 = $_POST['lsp-local-population-limit6'];
      $lsp_national_population_limit6 = $_POST['lsp-national-population-limit6'];
      $lsp_international_population_limit6 = $_POST[ 'lsp-international-population-limit6'];
      $lsp_exclude_countries6 = $_POST['lsp-exclude-countries6'];
      $lsp_add_countries6 = $_POST['lsp-add-countries6'];
      $lsp_smaller_cities6 = $_POST['lsp-smaller-cities6'];
      if($lsp_city6){
          $country = "US";
          $key = "key";
          $lsp_latitude6 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city6'].'&state='.$_POST['lsp_post_state6'].'&country='.$country.'&request=latitude');
          $lsp_longitude6 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city6'].'&state='.$_POST['lsp_post_state6'].'&country='.$country.'&request=longitude');
      }

      $lsp_city7 = $_POST['lsp-city7'];
      $lsp_state7 = $_POST['lsp-state7'];
      $lsp_keyphrase7 = strtolower($_POST['lsp-keyphrase7']);
      $lsp_keyphrase_override7 = strtolower($_POST['lsp-keyphrase-override7']);
      $lsp_radius7 = $_POST['lsp-radius7'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius7']>100) $lsp_radius7 = 100;
      $lsp_max_cities7 = $_POST['lsp-max-cities7'];
      $lsp_how_far7 = $_POST['lsp-how-far7'];
      $lsp_hide_headlines7 = $_POST['lsp-hide-headlines7'];

      $lsp_smart_settings7 = $_POST['lsp-smart-settings7'];
      $lsp_local_focus7 = $_POST['lsp-local-focus7'];
      $lsp_state_focus7 = $_POST['lsp-state-focus7'];
      $lsp_country_focus7 = $_POST['lsp-country-focus7'];

      $lsp_local_max_limit7 = $_POST['lsp-local-max-limit7'];
      $lsp_national_max_limit7 = $_POST['lsp-national-max-limit7'];
      $lsp_international_max_limit7 = $_POST['lsp-international-max-limit7'];

      $lsp_intro_text7 = $_POST['lsp-intro-text7'];
      $lsp_only_match_cities7 = $_POST['lsp-only-match-cities7'];
      $lsp_publish_now7 = $_POST['lsp-publish-now7'];
      $lsp_set_type7 = $_POST['lsp-set-type7'];
      $lsp_exclude_cities7 = $_POST['lsp-exclude-cities7'];
      $lsp_add_cities7 = $_POST['lsp-add-cities7'];
      $lsp_abbreviations7 = $_POST['lsp-abbreviations7'];
      $lsp_exclude_states7 = $_POST['lsp-exclude-states7'];
      $lsp_add_states7 = $_POST['lsp-add-states7'];
      $lsp_local_population_limit7 = $_POST['lsp-local-population-limit7'];
      $lsp_national_population_limit7 = $_POST['lsp-national-population-limit7'];
      $lsp_international_population_limit7 = $_POST[ 'lsp-international-population-limit7'];
      $lsp_exclude_countries7 = $_POST['lsp-exclude-countries7'];
      $lsp_smaller_cities7 = $_POST['lsp-smaller-cities7'];
      $lsp_add_countries7 = $_POST['lsp-add-countries7'];
      if($lsp_city7){
          $country = "US";
          $key = "key";
          $lsp_latitude7 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city7'].'&state='.$_POST['lsp_post_state7'].'&country='.$country.'&request=latitude');
          $lsp_longitude7 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city7'].'&state='.$_POST['lsp_post_state7'].'&country='.$country.'&request=longitude');
      }

      $lsp_city8 = $_POST['lsp-city8'];
      $lsp_state8 = $_POST['lsp-state8'];
      $lsp_keyphrase8 = strtolower($_POST['lsp-keyphrase8']);
      $lsp_keyphrase_override8 = strtolower($_POST['lsp-keyphrase-override8']);
      $lsp_radius8 = $_POST['lsp-radius8'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius8']>100) $lsp_radius8 = 100;
      $lsp_max_cities8 = $_POST['lsp-max-cities8'];
      $lsp_how_far8 = $_POST['lsp-how-far8'];
      $lsp_hide_headlines8 = $_POST['lsp-hide-headlines8'];
      $lsp_intro_text8 = $_POST['lsp-intro-text8'];
      $lsp_only_match_cities8 = $_POST['lsp-only-match-cities8'];
      $lsp_publish_now8 = $_POST['lsp-publish-now8'];

      $lsp_smart_settings8 = $_POST['lsp-smart-settings8'];
      $lsp_local_focus8 = $_POST['lsp-local-focus8'];
      $lsp_state_focus8 = $_POST['lsp-state-focus8'];
      $lsp_country_focus8 = $_POST['lsp-country-focus8'];

      $lsp_local_max_limit8 = $_POST['lsp-local-max-limit8'];
      $lsp_national_max_limit8 = $_POST['lsp-national-max-limit8'];
      $lsp_international_max_limit8 = $_POST['lsp-international-max-limit8'];

      $lsp_set_type8 = $_POST['lsp-set-type8'];
      $lsp_exclude_cities8 = $_POST['lsp-exclude-cities8'];
      $lsp_add_cities8 = $_POST['lsp-add-cities8'];
      $lsp_abbreviations8 = $_POST['lsp-abbreviations8'];
      $lsp_exclude_states8 = $_POST['lsp-exclude-states8'];
      $lsp_add_states8 = $_POST['lsp-add-states8'];
      $lsp_local_population_limit8 = $_POST['lsp-local-population-limit8'];
      $lsp_national_population_limit8 = $_POST['lsp-national-population-limit8'];
      $lsp_international_population_limit8 = $_POST[ 'lsp-international-population-limit8'];
      $lsp_exclude_countries8 = $_POST['lsp-exclude-countries8'];
      $lsp_add_countries8 = $_POST['lsp-add-countries8'];
      $lsp_smaller_cities8 = $_POST['lsp-smaller-cities8'];
      if($lsp_city8){
          $country = "US";
          $key = "key";
          $lsp_latitude8 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city8'].'&state='.$_POST['lsp_post_state8'].'&country='.$country.'&request=latitude');
          $lsp_longitude8 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city8'].'&state='.$_POST['lsp_post_state8'].'&country='.$country.'&request=longitude');
      }

      $lsp_city9 = $_POST['lsp-city9'];
      $lsp_state9 = $_POST['lsp-state9'];
      $lsp_keyphrase9 = strtolower($_POST['lsp-keyphrase9']);
      $lsp_keyphrase_override9 = strtolower($_POST['lsp-keyphrase-override9']);
      $lsp_radius9 = $_POST['lsp-radius9'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius9']>100) $lsp_radius9 = 100;
      $lsp_max_cities9 = $_POST['lsp-max-cities9'];
      $lsp_how_far9 = $_POST['lsp-how-far9'];
      $lsp_hide_headlines9 = $_POST['lsp-hide-headlines9'];
      $lsp_intro_text9 = $_POST['lsp-intro-text9'];
      $lsp_only_match_cities9 = $_POST['lsp-only-match-cities9'];
      $lsp_publish_now9 = $_POST['lsp-publish-now9'];

      $lsp_smart_settings9 = $_POST['lsp-smart-settings9'];
      $lsp_local_focus9 = $_POST['lsp-local-focus9'];
      $lsp_state_focus9 = $_POST['lsp-state-focus9'];
      $lsp_country_focus9 = $_POST['lsp-country-focus9'];

      $lsp_local_max_limit9 = $_POST['lsp-local-max-limit9'];
      $lsp_national_max_limit9 = $_POST['lsp-national-max-limit9'];
      $lsp_international_max_limit9 = $_POST['lsp-international-max-limit9'];

      $lsp_set_type9 = $_POST['lsp-set-type9'];
      $lsp_exclude_cities9 = $_POST['lsp-exclude-cities9'];
      $lsp_add_cities9 = $_POST['lsp-add-cities9'];
      $lsp_abbreviations9 = $_POST['lsp-abbreviations9'];
      $lsp_exclude_states9 = $_POST['lsp-exclude-states9'];
      $lsp_add_states9 = $_POST['lsp-add-states9'];
      $lsp_local_population_limit9 = $_POST['lsp-local-population-limit9'];
      $lsp_national_population_limit9 = $_POST['lsp-national-population-limit9'];
      $lsp_international_population_limit9 = $_POST[ 'lsp-international-population-limit9'];
      $lsp_exclude_countries9 = $_POST['lsp-exclude-countries9'];
      $lsp_add_countries9 = $_POST['lsp-add-countries9'];
      $lsp_smaller_cities9 = $_POST['lsp-smaller-cities9'];
      if($lsp_city9){
          $country = "US";
          $key = "key";
          $lsp_latitude7 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city9'].'&state='.$_POST['lsp_post_state9'].'&country='.$country.'&request=latitude');
          $lsp_longitude7 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city9'].'&state='.$_POST['lsp_post_state9'].'&country='.$country.'&request=longitude');
      }

      $lsp_city10 = $_POST['lsp-city10'];
      $lsp_state10 = $_POST['lsp-state10'];
      $lsp_keyphrase10 = strtolower($_POST['lsp-keyphrase10']);
      $lsp_keyphrase_override10 = strtolower($_POST['lsp-keyphrase-override10']);
      $lsp_radius10 = $_POST['lsp-radius10'];
      if(!($_POST['lsp-api-key'])) if($_POST['lsp-radius10']>100) $lsp_radius10 = 100;
      $lsp_max_cities10 = $_POST['lsp-max-cities10'];
      $lsp_how_far10 = $_POST['lsp-how-far10'];
      $lsp_hide_headlines10 = $_POST['lsp-hide-headlines10'];
      $lsp_intro_text10 = $_POST['lsp-intro-text10'];
      $lsp_only_match_cities10 = $_POST['lsp-only-match-cities10'];
      $lsp_publish_now10 = $_POST['lsp-publish-now10'];

      $lsp_smart_settings10 = $_POST['lsp-smart-settings10'];
      $lsp_local_focus10 = $_POST['lsp-local-focus10'];
      $lsp_state_focus10 = $_POST['lsp-state-focus10'];
      $lsp_country_focus10 = $_POST['lsp-country-focus10'];

      $lsp_local_max_limit10 = $_POST['lsp-local-max-limit10'];
      $lsp_national_max_limit10 = $_POST['lsp-national-max-limit10'];
      $lsp_international_max_limit10 = $_POST['lsp-international-max-limit10'];

      $lsp_set_type10 = $_POST['lsp-set-type10'];
      $lsp_exclude_cities10 = $_POST['lsp-exclude-cities10'];
      $lsp_add_cities10 = $_POST['lsp-add-cities10'];
      $lsp_abbreviations10 = $_POST['lsp-abbreviations10'];
      $lsp_exclude_states10 = $_POST['lsp-exclude-states10'];
      $lsp_add_states10 = $_POST['lsp-add-states10'];
      $lsp_local_population_limit10 = $_POST['lsp-local-population-limit10'];
      $lsp_national_population_limit10 = $_POST['lsp-national-population-limit10'];
      $lsp_international_population_limit10 = $_POST[ 'lsp-international-population-limit10'];
      $lsp_exclude_countries10 = $_POST['lsp-exclude-countries10'];
      $lsp_add_countries10 = $_POST['lsp-add-countries10'];
      $lsp_smaller_cities10 = $_POST['lsp-smaller-cities10'];
      if($lsp_city10){
          $country = "US";
          $key = "key";
          $lsp_latitude10 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city10'].'&state='.$_POST['lsp_post_state10'].'&country='.$country.'&request=latitude');
          $lsp_longitude10 = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$_POST['lsp_post_city10'].'&state='.$_POST['lsp_post_state10'].'&country='.$country.'&request=longitude');
      }


      update_option( 'lsp-api-key', $lsp_api_key, "yes");
      update_option( 'lsp-mozrank', $lsp_mozrank , "yes");
      update_option( 'lsp-autoadjust', $lsp_autoadjust , "yes");
      update_option( 'lsp-use-widget', $lsp_use_widget , "yes");

      update_option( 'lsp-hide-attribution', $lsp_hide_attribution , "yes");



      update_option( 'lsp-add-classes', $lsp_add_classes , "yes");
      update_option( 'lsp-footer-intro', $lsp_footer_intro , "yes");
      update_option( 'lsp-linking-sentence', $lsp_linking_sentence , "yes");
      update_option( 'lsp-served-sentence', $lsp_served_sentence , "yes");
      update_option( 'lsp-portfolio-format', $lsp_portfolio_format , "yes");
      update_option( 'lsp-footer-links', $lsp_footer_links  , "yes");




      update_option( 'lsp-enable-categories', $lsp_enable_categories , "yes");
      update_option( 'lsp-preview-urls', $lsp_preview_urls  , "yes");





      update_option( 'lsp-text-color', $lsp_text_color , "yes");
      update_option( 'lsp-link-color', $lsp_link_color , "yes");
      update_option( 'lsp-header-color', $lsp_header_color , "yes");
      update_option( 'lsp-homepage-footer-links-background-color', $lsp_homepage_footer_links_background_color , "yes");

      update_option( 'lsp-city', $lsp_city , "yes");
      update_option( 'lsp-state', $lsp_state , "yes");
      update_option( 'lsp-keyphrase', $lsp_keyphrase , "yes");
      update_option( 'lsp-keyphrase-override', $lsp_keyphrase_override , "yes");
      update_option( 'lsp-radius', $lsp_radius , "yes");

      update_option( 'lsp-cities-all-pages', $lsp_cities_all_pages , "yes");
      update_option( 'lsp-show-all-projects', $lsp_show_all_projects, "yes");

      update_option( 'lsp-max-cities', $lsp_max_cities , "yes");
      update_option( 'lsp-how-far' ,$lsp_how_far, "yes");

      update_option( 'lsp-hide-headlines', $lsp_hide_headlines , "yes");
      update_option( 'lsp-intro-text' ,$lsp_intro_text, "yes");
      update_option( 'lsp-only-match-cities', $lsp_only_match_cities, "yes");
      update_option( 'lsp-publish-now', $lsp_publish_now , "yes");

      update_option('lsp-smart-settings', $lsp_smart_settings, "yes");
      update_option('lsp-local-focus', $lsp_local_focus, "yes");
      update_option('lsp-state-focus', $lsp_state_focus, "yes");
      update_option('lsp-country-focus', $lsp_country_focus, "yes");   


      update_option('lsp-local-max-limit', $lsp_local_max_limit, "yes");
      update_option('lsp-national-max-limit', $lsp_national_max_limit, "yes");
      update_option('lsp-international-max-limit', $lsp_international_max_limit, "yes");


      update_option('lsp-contact-form', $lsp_contact_form, "yes");
      update_option('lsp-email-addresses', $lsp_email_addresses, "yes");
      update_option('lsp-form-header', $lsp_form_header, "yes");
      update_option('lsp-footer-classes', $lsp_footer_classes, "yes");
      update_option('lsp-smaller-cities-text', $lsp_smaller_cities_text, "yes");
      update_option('lsp-smaller-cities', $lsp_smaller_cities, "yes");


      update_option( 'lsp-set-type', $lsp_set_type , "yes");
      update_option( 'lsp-exclude-cities', $lsp_exclude_cities , "yes");
      update_option( 'lsp-add-cities', $lsp_add_cities , "yes");
      update_option( 'lsp-abbreviations', $lsp_abbreviations , "yes");
      update_option( 'lsp-exclude-states', $lsp_exclude_states , "yes");
      update_option( 'lsp-add-states', $lsp_add_states , "yes");
      update_option( 'lsp-local-population-limit', $lsp_local_population_limit , "yes");
      update_option( 'lsp-national-population-limit', $lsp_national_population_limit , "yes");
      update_option( 'lsp-international-population-limit', $lsp_international_population_limit , "yes");
      update_option( 'lsp-exclude-countries', $lsp_exclude_countries , "yes");
      update_option( 'lsp-add-countries', $lsp_add_countries , "yes");
      update_option( 'lsp-latitude1', $lsp_latitude1 , "yes");
      update_option( 'lsp-longitude1', $lsp_longitude1 , "yes");

      update_option( 'lsp-city2', $lsp_city2 , "yes");
      update_option( 'lsp-state2', $lsp_state2 , "yes");
      update_option( 'lsp-keyphrase2', $lsp_keyphrase2 , "yes");
      update_option( 'lsp-keyphrase-override2', $lsp_keyphrase_override2 , "yes");
      update_option( 'lsp-radius2', $lsp_radius2 , "yes");
      update_option( 'lsp-max-cities2', $lsp_max_cities2 , "yes");
      update_option( 'lsp-how-far2' ,$lsp_how_far2, "yes");
      update_option( 'lsp-hide-headlines2', $lsp_hide_headlines2 , "yes");
      update_option( 'lsp-intro-text2' ,$lsp_intro_text2, "yes");
      update_option( 'lsp-only-match-cities2', $lsp_only_match_cities2, "yes");
      update_option( 'lsp-publish-now2', $lsp_publish_now2 , "yes");

      update_option('lsp-smart-settings2', $lsp_smart_settings2, "yes");
      update_option('lsp-local-focus2', $lsp_local_focus2, "yes");
      update_option('lsp-state-focus2', $lsp_state_focus2, "yes");
      update_option('lsp-country-focus2', $lsp_country_focus2, "yes");  

      update_option('lsp-local-max-limit2', $lsp_local_max_limit2, "yes");
      update_option('lsp-national-max-limit2', $lsp_national_max_limit2, "yes");
      update_option('lsp-international-max-limit2', $lsp_international_max_limit2, "yes");
      update_option('lsp-smaller-cities2', $lsp_smaller_cities2, "yes");

      update_option( 'lsp-set-type2', $lsp_set_type2 , "yes");
      update_option( 'lsp-exclude-cities2', $lsp_exclude_cities2 , "yes");
      update_option( 'lsp-add-cities2', $lsp_add_cities2 , "yes");
      update_option( 'lsp-abbreviations2', $lsp_abbreviations2 , "yes");
      update_option( 'lsp-exclude-states2', $lsp_exclude_states2 , "yes");
      update_option( 'lsp-add-states2', $lsp_add_states2 , "yes");
      update_option( 'lsp-local-population-limit2', $lsp_local_population_limit2 , "yes");
      update_option( 'lsp-national-population-limit2', $lsp_national_population_limit2 , "yes");
      update_option( 'lsp-international-population-limit2', $lsp_international_population_limit2 , "yes");
      update_option( 'lsp-exclude-countries2', $lsp_exclude_countries2 , "yes");
      update_option( 'lsp-add-countries2', $lsp_add_countries2 , "yes");
      update_option( 'lsp-latitude2', $lsp_latitude2 , "yes");
      update_option( 'lsp-longitude2', $lsp_longitude2 , "yes");

      update_option( 'lsp-city3', $lsp_city3 , "yes");
      update_option( 'lsp-state3', $lsp_state3 , "yes");
      update_option( 'lsp-keyphrase3', $lsp_keyphrase3 , "yes");
      update_option( 'lsp-keyphrase-override3', $lsp_keyphrase_override3 , "yes");
      update_option( 'lsp-radius3', $lsp_radius3 , "yes");
      update_option( 'lsp-max-cities3', $lsp_max_cities3 , "yes");
      update_option( 'lsp-how-far3' ,$lsp_how_far3, "yes");
      update_option( 'lsp-hide-headlines3', $lsp_hide_headlines3 , "yes");
      update_option( 'lsp-intro-text3' ,$lsp_intro_text3, "yes");
      update_option( 'lsp-only-match-cities3', $lsp_only_match_cities3, "yes");
      update_option( 'lsp-publish-now3', $lsp_publish_now3 , "yes");

      update_option('lsp-smart-settings3', $lsp_smart_settings3, "yes");
      update_option('lsp-local-focus3', $lsp_local_focus3, "yes");
      update_option('lsp-state-focus3', $lsp_state_focus3, "yes");
      update_option('lsp-country-focus3', $lsp_country_focus3, "yes");  

      update_option('lsp-local-max-limit3', $lsp_local_max_limit3, "yes");
      update_option('lsp-national-max-limit3', $lsp_national_max_limit3, "yes");
      update_option('lsp-international-max-limit3', $lsp_international_max_limit3, "yes");
      update_option('lsp-smaller-cities3', $lsp_smaller_cities3, "yes");

      update_option( 'lsp-set-type3', $lsp_set_type3 , "yes");
      update_option( 'lsp-exclude-cities3', $lsp_exclude_cities3 , "yes");
      update_option( 'lsp-add-cities3', $lsp_add_cities3 , "yes");
      update_option( 'lsp-abbreviations3', $lsp_abbreviations3 , "yes");
      update_option( 'lsp-exclude-states3', $lsp_exclude_states3 , "yes");
      update_option( 'lsp-add-states3', $lsp_add_states3 , "yes");
      update_option( 'lsp-local-population-limit3', $lsp_local_population_limit3 , "yes");
      update_option( 'lsp-national-population-limit3', $lsp_national_population_limit3 , "yes");
      update_option( 'lsp-international-population-limit3', $lsp_international_population_limit3 , "yes");
      update_option( 'lsp-exclude-countries3', $lsp_exclude_countries3 , "yes");
      update_option( 'lsp-add-countries3', $lsp_add_countries3 , "yes");
      update_option( 'lsp-latitude3', $lsp_latitude3 , "yes");
      update_option( 'lsp-longitude3', $lsp_longitude3 , "yes");

      update_option( 'lsp-city4', $lsp_city4 , "yes");
      update_option( 'lsp-state4', $lsp_state4 , "yes");
      update_option( 'lsp-keyphrase4', $lsp_keyphrase4 , "yes");
      update_option( 'lsp-keyphrase-override4', $lsp_keyphrase_override4 , "yes");
      update_option( 'lsp-radius4', $lsp_radius4 , "yes");
      update_option( 'lsp-max-cities4', $lsp_max_cities4 , "yes");
      update_option( 'lsp-how-far4' ,$lsp_how_far4, "yes");
      update_option( 'lsp-hide-headlines4', $lsp_hide_headlines4 , "yes");
      update_option( 'lsp-intro-text4' ,$lsp_intro_text4, "yes");
      update_option( 'lsp-only-match-cities4', $lsp_only_match_cities4, "yes");

      update_option('lsp-smart-settings4', $lsp_smart_settings4, "yes");
      update_option('lsp-local-focus4', $lsp_local_focus4, "yes");
      update_option('lsp-state-focus4', $lsp_state_focus4, "yes");
      update_option('lsp-country-focus4', $lsp_country_focus4, "yes");  

      update_option('lsp-local-max-limit4', $lsp_local_max_limit4, "yes");
      update_option('lsp-national-max-limit4', $lsp_national_max_limit4, "yes");
      update_option('lsp-international-max-limit4', $lsp_international_max_limit4, "yes");
      update_option('lsp-smaller-cities4', $lsp_smaller_cities4, "yes");

      update_option( 'lsp-publish-now4', $lsp_publish_now4 , "yes");
      update_option( 'lsp-set-type4', $lsp_set_type4 , "yes");
      update_option( 'lsp-exclude-cities4', $lsp_exclude_cities4 , "yes");
      update_option( 'lsp-add-cities4', $lsp_add_cities4 , "yes");
      update_option( 'lsp-abbreviations4', $lsp_abbreviations4 , "yes");
      update_option( 'lsp-exclude-states4', $lsp_exclude_states4 , "yes");
      update_option( 'lsp-add-states4', $lsp_add_states4 , "yes");
      update_option( 'lsp-local-population-limit4', $lsp_local_population_limit4 , "yes");
      update_option( 'lsp-national-population-limit4', $lsp_national_population_limit4 , "yes");
      update_option( 'lsp-international-population-limit4', $lsp_international_population_limit4 , "yes");
      update_option( 'lsp-exclude-countries4', $lsp_exclude_countries4 , "yes");
      update_option( 'lsp-add-countries4', $lsp_add_countries4 , "yes");
      update_option( 'lsp-latitude4', $lsp_latitude4 , "yes");
      update_option( 'lsp-longitude4', $lsp_longitude4 , "yes");

      update_option( 'lsp-city5', $lsp_city5 , "yes");
      update_option( 'lsp-state5', $lsp_state5 , "yes");
      update_option( 'lsp-keyphrase5', $lsp_keyphrase5 , "yes");
      update_option( 'lsp-keyphrase-override5', $lsp_keyphrase_override5 , "yes");
      update_option( 'lsp-radius5', $lsp_radius5 , "yes");
      update_option( 'lsp-max-cities5', $lsp_max_cities5 , "yes");
      update_option( 'lsp-how-far5' ,$lsp_how_far5, "yes");
      update_option( 'lsp-hide-headlines5', $lsp_hide_headlines5 , "yes");
      update_option( 'lsp-intro-text5' ,$lsp_intro_text5, "yes");
      update_option( 'lsp-only-match-cities5', $lsp_only_match_cities5, "yes");
      update_option( 'lsp-publish-now5', $lsp_publish_now5 , "yes");

      update_option('lsp-smart-settings5', $lsp_smart_settings5, "yes");
      update_option('lsp-local-focus5', $lsp_local_focus5, "yes");
      update_option('lsp-state-focus5', $lsp_state_focus5, "yes");
      update_option('lsp-country-focus5', $lsp_country_focus5, "yes");  

      update_option('lsp-smaller-cities5', $lsp_smaller_cities5, "yes");
      update_option('lsp-local-max-limit5', $lsp_local_max_limit5, "yes");
      update_option('lsp-national-max-limit5', $lsp_national_max_limit5, "yes");
      update_option('lsp-international-max-limit5', $lsp_international_max_limit5, "yes");

      update_option( 'lsp-set-type5', $lsp_set_type5 , "yes");
      update_option( 'lsp-exclude-cities5', $lsp_exclude_cities5 , "yes");
      update_option( 'lsp-add-cities5', $lsp_add_cities5 , "yes");
      update_option( 'lsp-abbreviations5', $lsp_abbreviations5 , "yes");
      update_option( 'lsp-exclude-states5', $lsp_exclude_states5 , "yes");
      update_option( 'lsp-add-states5', $lsp_add_states5 , "yes");
      update_option( 'lsp-local-population-limit5', $lsp_local_population_limit5 , "yes");
      update_option( 'lsp-national-population-limit5', $lsp_national_population_limit5 , "yes");
      update_option( 'lsp-international-population-limit5', $lsp_international_population_limit5 , "yes");
      update_option( 'lsp-exclude-countries5', $lsp_exclude_countries5 , "yes");
      update_option( 'lsp-add-countries5', $lsp_add_countries5 , "yes");
      update_option( 'lsp-latitude5', $lsp_latitude5 , "yes");
      update_option( 'lsp-longitude5', $lsp_longitude5 , "yes");

      update_option( 'lsp-city6', $lsp_city6 , "yes");
      update_option( 'lsp-state6', $lsp_state6 , "yes");
      update_option( 'lsp-keyphrase6', $lsp_keyphrase6 , "yes");
      update_option( 'lsp-keyphrase-override6', $lsp_keyphrase_override6 , "yes");
      update_option( 'lsp-radius6', $lsp_radius6 , "yes");
      update_option( 'lsp-max-cities6', $lsp_max_cities6 , "yes");
      update_option( 'lsp-how-far6' ,$lsp_how_far6, "yes");
      update_option( 'lsp-hide-headlines6', $lsp_hide_headlines6 , "yes");
      update_option( 'lsp-intro-text6' ,$lsp_intro_text6, "yes");
      update_option( 'lsp-only-match-cities6', $lsp_only_match_cities6, "yes");
      update_option( 'lsp-publish-now6', $lsp_publish_now6 , "yes");

      update_option('lsp-smart-settings6', $lsp_smart_settings6, "yes");
      update_option('lsp-local-focus6', $lsp_local_focus6, "yes");
      update_option('lsp-state-focus6', $lsp_state_focus6, "yes");
      update_option('lsp-country-focus6', $lsp_country_focus6, "yes");  

      update_option('lsp-local-max-limit6', $lsp_local_max_limit6, "yes");
      update_option('lsp-national-max-limit6', $lsp_national_max_limit6, "yes");
      update_option('lsp-international-max-limit6', $lsp_international_max_limit6, "yes");
      update_option('lsp-smaller-cities6', $lsp_smaller_cities6, "yes");

      update_option( 'lsp-set-type6', $lsp_set_type6 , "yes");
      update_option( 'lsp-exclude-cities6', $lsp_exclude_cities6 , "yes");
      update_option( 'lsp-add-cities6', $lsp_add_cities6 , "yes");
      update_option( 'lsp-abbreviations6', $lsp_abbreviations6 , "yes");
      update_option( 'lsp-exclude-states6', $lsp_exclude_states6 , "yes");
      update_option( 'lsp-add-states6', $lsp_add_states6 , "yes");
      update_option( 'lsp-local-population-limit6', $lsp_local_population_limit6 , "yes");
      update_option( 'lsp-national-population-limit6', $lsp_national_population_limit6 , "yes");
      update_option( 'lsp-international-population-limit6', $lsp_international_population_limit6 , "yes");
      update_option( 'lsp-exclude-countries6', $lsp_exclude_countries6 , "yes");
      update_option( 'lsp-add-countries6', $lsp_add_countries6 , "yes");
      update_option( 'lsp-latitude6', $lsp_latitude6 , "yes");
      update_option( 'lsp-longitude6', $lsp_longitude6 , "yes");

      update_option( 'lsp-city7', $lsp_city7 , "yes");
      update_option( 'lsp-state7', $lsp_state7 , "yes");
      update_option( 'lsp-keyphrase7', $lsp_keyphrase7 , "yes");
      update_option( 'lsp-keyphrase-override7', $lsp_keyphrase_override7 , "yes");
      update_option( 'lsp-radius7', $lsp_radius7 , "yes");
      update_option( 'lsp-max-cities7', $lsp_max_cities7 , "yes");
      update_option( 'lsp-how-far7' ,$lsp_how_far7, "yes");
      update_option( 'lsp-hide-headlines7', $lsp_hide_headlines7 , "yes");
      update_option( 'lsp-intro-text7' ,$lsp_intro_text7, "yes");
      update_option( 'lsp-only-match-cities7', $lsp_only_match_cities7, "yes");
      update_option( 'lsp-publish-now7', $lsp_publish_now7 , "yes");

      update_option('lsp-smart-settings7', $lsp_smart_settings7, "yes");
      update_option('lsp-local-focus7', $lsp_local_focus7, "yes");
      update_option('lsp-state-focus7', $lsp_state_focus7, "yes");
      update_option('lsp-country-focus7', $lsp_country_focus7, "yes");  

      update_option('lsp-local-max-limit7', $lsp_local_max_limit7, "yes");
      update_option('lsp-national-max-limit7', $lsp_national_max_limit7, "yes");
      update_option('lsp-international-max-limit7', $lsp_international_max_limit7, "yes");
      update_option('lsp-smaller-cities7', $lsp_smaller_cities7, "yes");

      update_option( 'lsp-set-type7', $lsp_set_type7 , "yes");
      update_option( 'lsp-exclude-cities7', $lsp_exclude_cities7 , "yes");
      update_option( 'lsp-add-cities7', $lsp_add_cities7 , "yes");
      update_option( 'lsp-abbreviations7', $lsp_abbreviations7 , "yes");
      update_option( 'lsp-exclude-states7', $lsp_exclude_states7 , "yes");
      update_option( 'lsp-add-states7', $lsp_add_states7 , "yes");
      update_option( 'lsp-local-population-limit7', $lsp_local_population_limit7 , "yes");
      update_option( 'lsp-national-population-limit7', $lsp_national_population_limit7 , "yes");
      update_option( 'lsp-international-population-limit7', $lsp_international_population_limit7 , "yes");
      update_option( 'lsp-exclude-countries7', $lsp_exclude_countries7 , "yes");
      update_option( 'lsp-add-countries7', $lsp_add_countries7 , "yes");
      update_option( 'lsp-latitude7', $lsp_latitude7 , "yes");
      update_option( 'lsp-longitude7', $lsp_longitude7 , "yes");

      update_option( 'lsp-city8', $lsp_city8 , "yes");
      update_option( 'lsp-state8', $lsp_state8 , "yes");
      update_option( 'lsp-keyphrase8', $lsp_keyphrase8 , "yes");
      update_option( 'lsp-keyphrase-override8', $lsp_keyphrase_override8 , "yes");
      update_option( 'lsp-radius8', $lsp_radius8 , "yes");
      update_option( 'lsp-max-cities8', $lsp_max_cities8 , "yes");
      update_option( 'lsp-how-far8' ,$lsp_how_far8 , "yes");
      update_option( 'lsp-hide-headlines8', $lsp_hide_headlines8 , "yes");
      update_option( 'lsp-intro-text8' ,$lsp_intro_text8, "yes");
      update_option( 'lsp-only-match-cities8', $lsp_only_match_cities8, "yes");
      update_option( 'lsp-publish-now8', $lsp_publish_now8 , "yes");

      update_option('lsp-smart-settings8', $lsp_smart_settings8, "yes");
      update_option('lsp-local-focus8', $lsp_local_focus8, "yes");
      update_option('lsp-state-focus8', $lsp_state_focus8, "yes");
      update_option('lsp-country-focus8', $lsp_country_focus8, "yes");  

      update_option('lsp-local-max-limit8', $lsp_local_max_limit8, "yes");
      update_option('lsp-national-max-limit8', $lsp_national_max_limit8, "yes");
      update_option('lsp-international-max-limit8', $lsp_international_max_limit8, "yes");
      update_option('lsp-smaller-cities8', $lsp_smaller_cities8, "yes");

      update_option( 'lsp-set-type8', $lsp_set_type8 , "yes");
      update_option( 'lsp-exclude-cities8', $lsp_exclude_cities8 , "yes");
      update_option( 'lsp-add-cities8', $lsp_add_cities8 , "yes");
      update_option( 'lsp-abbreviations8', $lsp_abbreviations8 , "yes");
      update_option( 'lsp-exclude-states8', $lsp_exclude_states8 , "yes");
      update_option( 'lsp-add-states8', $lsp_add_states8 , "yes");
      update_option( 'lsp-local-population-limit8', $lsp_local_population_limit8 , "yes");
      update_option( 'lsp-national-population-limit8', $lsp_national_population_limit8 , "yes");
      update_option( 'lsp-international-population-limit8', $lsp_international_population_limit8 , "yes");
      update_option( 'lsp-exclude-countries8', $lsp_exclude_countries8 , "yes");
      update_option( 'lsp-add-countries8', $lsp_add_countries8 , "yes");
      update_option( 'lsp-latitude8', $lsp_latitude8 , "yes");
      update_option( 'lsp-longitude8', $lsp_longitude8 , "yes");

      update_option( 'lsp-city9', $lsp_city9 , "yes");
      update_option( 'lsp-state9', $lsp_state9 , "yes");
      update_option( 'lsp-keyphrase9', $lsp_keyphrase9 , "yes");
      update_option( 'lsp-keyphrase-override9', $lsp_keyphrase_override9 , "yes");
      update_option( 'lsp-radius9', $lsp_radius9 , "yes");
      update_option( 'lsp-max-cities9', $lsp_max_cities9 , "yes");
      update_option( 'lsp-how-far9' ,$lsp_how_far9, "yes");
      update_option( 'lsp-hide-headlines9', $lsp_hide_headlines9 , "yes");
      update_option( 'lsp-intro-text9' ,$lsp_intro_text9, "yes");
      update_option( 'lsp-only-match-cities9', $lsp_only_match_cities9, "yes");
      update_option( 'lsp-publish-now9', $lsp_publish_now9 , "yes");

      update_option('lsp-smart-settings9', $lsp_smart_settings9, "yes");
      update_option('lsp-local-focus9', $lsp_local_focus9, "yes");
      update_option('lsp-state-focus9', $lsp_state_focus9, "yes");
      update_option('lsp-country-focus9', $lsp_country_focus9, "yes");  


      update_option('lsp-local-max-limit9', $lsp_local_max_limit9, "yes");
      update_option('lsp-national-max-limit9', $lsp_national_max_limit9, "yes");
      update_option('lsp-international-max-limit9', $lsp_international_max_limit9, "yes");
      update_option('lsp-smaller-cities9', $lsp_smaller_cities9, "yes");

      update_option( 'lsp-set-type9', $lsp_set_type9 , "yes");
      update_option( 'lsp-exclude-cities9', $lsp_exclude_cities9 , "yes");
      update_option( 'lsp-add-cities9', $lsp_add_cities9 , "yes");
      update_option( 'lsp-abbreviations9', $lsp_abbreviations9 , "yes");
      update_option( 'lsp-exclude-states9', $lsp_exclude_states9 , "yes");
      update_option( 'lsp-add-states9', $lsp_add_states9 , "yes");
      update_option( 'lsp-local-population-limit9', $lsp_local_population_limit9 , "yes");
      update_option( 'lsp-national-population-limit9', $lsp_national_population_limit9 , "yes");
      update_option( 'lsp-international-population-limit9', $lsp_international_population_limit9 , "yes");
      update_option( 'lsp-exclude-countries9', $lsp_exclude_countries9 , "yes");
      update_option( 'lsp-add-countries9', $lsp_add_countries9 , "yes");
      update_option( 'lsp-latitude9', $lsp_latitude9 , "yes");
      update_option( 'lsp-longitude9', $lsp_longitude9 , "yes");

      update_option( 'lsp-city10', $lsp_city10 , "yes");
      update_option( 'lsp-state10', $lsp_state10 , "yes");
      update_option( 'lsp-keyphrase10', $lsp_keyphrase10 , "yes");
      update_option( 'lsp-keyphrase-override10', $lsp_keyphrase_override10 , "yes");
      update_option( 'lsp-radius10', $lsp_radius10 , "yes");
      update_option( 'lsp-max-cities10', $lsp_max_cities10 , "yes");
      update_option( 'lsp-how-far10' ,$lsp_how_far10, "yes");
      update_option( 'lsp-hide-headlines10', $lsp_hide_headlines10 , "yes");
      update_option( 'lsp-intro-text10' ,$lsp_intro_text10, "yes");
      update_option( 'lsp-only-match-cities10', $lsp_only_match_cities10, "yes");
      update_option( 'lsp-publish-now10', $lsp_publish_now10 , "yes");

      update_option('lsp-smart-settings10', $lsp_smart_settings10, "yes");
      update_option('lsp-local-focus10', $lsp_local_focus10, "yes");
      update_option('lsp-state-focus10', $lsp_state_focus10, "yes");
      update_option('lsp-country-focus10', $lsp_country_focus10, "yes"); 


      update_option('lsp-local-max-limit10', $lsp_local_max_limit10, "yes");
      update_option('lsp-national-max-limit10', $lsp_national_max_limit10, "yes");
      update_option('lsp-international-max-limit10', $lsp_international_max_limit10, "yes");
      update_option('lsp-smaller-cities10', $lsp_smaller_cities10, "yes"); 

      update_option( 'lsp-set-type10', $lsp_set_type10 , "yes");
      update_option( 'lsp-exclude-cities10', $lsp_exclude_cities10 , "yes");
      update_option( 'lsp-add-cities10', $lsp_add_cities10 , "yes");
      update_option( 'lsp-abbreviations10', $lsp_abbreviations10 , "yes");
      update_option( 'lsp-exclude-states10', $lsp_exclude_states10 , "yes");
      update_option( 'lsp-add-states10', $lsp_add_states10 , "yes");
      update_option( 'lsp-local-population-limit10', $lsp_local_population_limit10 , "yes");
      update_option( 'lsp-national-population-limit10', $lsp_national_population_limit10 , "yes");
      update_option( 'lsp-international-population-limit10', $lsp_international_population_limit10 , "yes");
      update_option( 'lsp-exclude-countries10', $lsp_exclude_countries10 , "yes");
      update_option( 'lsp-add-countries10', $lsp_add_countries10 , "yes");
      update_option( 'lsp-latitude10', $lsp_latitude10 , "yes");
      update_option( 'lsp-longitude10', $lsp_longitude10 , "yes");

      global $premium;
      $premium = 0;
      if(get_option('lsp-api-key'))$premium = 1;

	   
	?>
<?php
      if(isset($_GET['refresh'])):?>

<script type="text/javascript">
       var str = window.location.href;
       var res = str.replace("refresh=true", ""); 
       window.location = res;
       
       </script>
     <?php endif; ?>





	<div class="updated"><p><strong><?php _e('settings saved.', 'lsp_text_domain' ); ?></strong></p></div>
	<?php

   }
  echo '<div class="wrap">';
  echo "<h2>" . __( 'Local SEO Portfolio Settings', 'lsp_text_domain' ) . "</h2>";
  ?>

  <!--
     <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
-->

  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>


<!--


jQuery('[name=lsp-city]').keyup(function(){
  alert(jQuery('[name=lsp-city]').val());
  jQuery.getJSON('http://www.instawowlocalseo.com/?request=ajaxcities&city='+jQuery('[name=lsp-city]').val()+'&callback=?', function(res){
    alert('success');
  });
});

-->

<script>
jQuery(document).ready(function(){
jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city]" ).autocomplete({
    source: function( request, response ) {
   //   alert('http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities');
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});


jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city2]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city2]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state2]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city3]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city3]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state3]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city4]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city4]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state4]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city5]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city5]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state5]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city6]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city6]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state6]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city7]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city7]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state7]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city8]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city8]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state8]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city9]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city9]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state9]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp-city10]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',
        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp-city10]" ).val(exploded[0].trim());
        jQuery( "[name=lsp-state10]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});





});





</script>

  <a href="#" id="portfolioapilink"><?php _e('Setup & Auto-Optimize','lsp_text_domain')?></a> | Advanced Controls: <a href="#" id="portfolio1link"><?php _e('Portfolio','lsp_text_domain');?> 1</a> | <a href="#" id="portfolio2link"><?php _e('Portfolio','lsp_text_domain');?> 2</a> | <a href="#" id="portfolio3link"><?php _e('Portfolio','lsp_text_domain');?> 3</a> | <a href="#" id="portfolio4link"><?php _e('Portfolio','lsp_text_domain');?> 4</a> | <a href="#" id="portfolio5link"><?php _e('Portfolio','lsp_text_domain');?> 5</a> | <a href="#" id="portfolio6link"><?php _e('Portfolio','lsp_text_domain');?> 6</a> | <a href="#" id="portfolio7link"><?php _e('Portfolio','lsp_text_domain');?> 7</a> | <a href="#" id="portfolio8link"><?php _e('Portfolio','lsp_text_domain');?> 8</a> | <a href="#" id="portfolio9link"><?php _e('Portfolio','lsp_text_domain');?> 9</a> | <a href="#" id="portfolio10link"><?php _e('Portfolio','lsp_text_domain');?> 10</a>

	<form name="lsp-options" method="post" action="edit.php?post_type=localproject&page=localseoportfolio.php&refresh=true">

  <div id="pform1" class="pform">

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 1:</h3>

	<p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city" value="<?php echo $lsp_city; ?>" size="40"></p>

	<p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state" value="<?php echo $lsp_state; ?>" size="40"></p>

	<p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase" value="<?php echo $lsp_keyphrase; ?>" size="40"></p>

   <p><?php _e("Radius Served in miles ","lsp_text_domain")?><font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font> <br>
   <input type="text" name="lsp-radius" value="<?php echo $lsp_radius; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text"><?php echo $lsp_intro_text; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
	</p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities">
    <option value="yes" <?php if($lsp_only_match_cities=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->

<p><?php _e("Maximum portfolio city pages to list on footer (total for all portfolios -- 90 is the recommended amount for max SEO boost):", 'lsp_text_domain' ); ?> <br>
<select name="lsp-max-cities">
    <option value="90" <?php if($lsp_max_cities=="90")echo "selected"; ?>>90</option>
    <option value="50" <?php if($lsp_max_cities=="50")echo "selected"; ?>>50</option>
    <option value="25" <?php if($lsp_max_cities=="25")echo "selected"; ?>>25</option>
    <option value="15" <?php if($lsp_max_cities=="15")echo "selected"; ?>>15</option>
    <option value="10" <?php if($lsp_max_cities=="10")echo "selected"; ?>>10</option>
    <option value="5" <?php if($lsp_max_cities=="5")echo "selected"; ?>>5</option>

  </select>
   </p>


  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now">
    <option value="yes" <?php if($lsp_publish_now=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>


  <a href="#" id="colorsLink"><?php _e('Color, Styling and Text Options');?></a>
  <div id="colorOptions"></font>
  <p><?php _e('Color, Styling and Text Options','lsp_text_domain');?><br><font color='#aaaaaa'><?php _e("You can set the colors for all your portfolio pages below as color names or hexadecimal codes like #ff0000. It is important to make sure the text shows. Highlighting a portfolio page's content and your home page's footer is one way to make sure.", 'lsp_text_domain' ); ?></font><br>
    <input type="text" class="color {required:false}"  name="lsp-text-color" value="<?php echo $lsp_text_color; ?>" size="40"></p>
    <p><?php _e("Link Color:", 'lsp_text_domain' ); ?> <br>
    <input type="text" class="color {required:false}"   name="lsp-link-color" value="<?php echo $lsp_link_color; ?>" size="40"></p>
    <p><?php _e("Text Header Color:", 'lsp_text_domain' ); ?> <br>
    <input type="text" class="color {required:false}"   name="lsp-header-color" value="<?php echo $lsp_header_color; ?>" size="40"></p>
    <p><?php _e("Homepage Footer Links Background Color:", 'lsp_text_domain' ); ?> <br>
    <input type="text" class="color {required:false}"   name="lsp-homepage-footer-links-background-color" value="<?php echo $lsp_homepage_footer_links_background_color; ?>" size="40"></p>
  



    <p><?php _e("Add this HTML class to the portfolio links footer section:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-classes" value="<?php echo $lsp_add_classes; ?>" size="40"></p>

    <p><?php _e("Footer Intro Sentence:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-footer-intro" value="<?php echo $lsp_footer_intro; ?>" size="40"></p>

    <p><?php _e("Other Sections Linking Sentence", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-linking-sentence" value="<?php echo $lsp_linking_sentence; ?>" size="40"></p>

    <p><?php _e("Other Cities Served Linking Sentence", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-served-sentence" value="<?php echo $lsp_served_sentence; ?>" size="40"></p>


    <p><?php _e("List nearby portfolio pages as section titles or cities list:", 'lsp_text_domain' ); ?> <br>
    <select name="lsp-portfolio-format">
      <option value="sectiontitles" <?php if($lsp_portfolio_format=="sectiontitles")echo "selected"; ?>><?php _e('Section Titles','lsp_text_domain');?></option>
      <option value="citiesstateslist" <?php if($lsp_portfolio_format=="citiesstateslist")echo "selected"; ?>><?php _e('Cities And States Only','lsp_text_domain');?></option>
      <option value="citieslist" <?php if($lsp_portfolio_format=="citieslist")echo "selected"; ?>><?php _e('Cities Only','lsp_text_domain');?></option>
    </select></p>



    <p><?php _e("Enable Industry / Service Category Portfolios", 'lsp_text_domain' ); ?> <br>
    <select name="lsp-enable-categories">
      <option value="no" <?php if($lsp_enable_categories=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
      <option value="yes" <?php if($lsp_enable_categories=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    </select></p>



    <p><?php _e("Use showcase URLs with preview text", 'lsp_text_domain' ); ?> <br>
    <select name="lsp-preview-urls">
      <option value="no" <?php if($lsp_preview_urls=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
      <option value="yes" <?php if($lsp_preview_urls=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    </select></p>



  <p><?php _e("Clarify & List Smaller Cities Served Nearby If They Didn't Get Their Own Portfolio Section?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-smaller-cities">
    <option value="no" <?php if($lsp_smaller_cities=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
    <option value="yes" <?php if($lsp_smaller_cities=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
  </select></p>





<!--
    <p><?php _e("Use the footer links (generally causes stronger SEO):", 'lsp_text_domain' ); ?> <br>
    <select name="lsp-footer-links">
         <option value="yes" <?php if($lsp_footer_links=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
           <option value="no" <?php if($lsp_footer_links=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
    </select></p>
-->


  </div>
  <script type="text/javascript">
  jQuery('#colorOptions').hide();
  jQuery('#colorsLink').click(function(){
    jQuery('#colorOptions').toggle();
  });
  </script>




<br> <a href="#" class="lsp-show-links"><?php _e('Get Menu Links','lsp_text_domain');?></a>

<div class="lsp-links">
<?php _e('"Enable Industry / Service Category Portfolios" must be turned on in the Styling section to use these','lsp_text_domain');?>
<br>



<?php _e('Create a Portfolio Link for Where ','lsp_text_domain');?>
<select name='iservice' id='iservice'>
  <option id='service' value='service'><?php _e('Service','lsp_text_domain');?></option>
  <option id='industry' value='industry'><?php _e('Industry','lsp_text_domain');?></option>
  </select>
<?php _e(' Is ','lsp_text_domain');?>
<input type="text" name="menuphrase" id="menuphrase">
<br>
<?php _e('The URL for the above content is','lsp_text_domain');?>
<span id="menuurl">
<?php echo home_url()."/localportfolio/"; ?>
</span>
<script type="text/javascript">
var isholder;
isholder = jQuery('#menuurl').html();
jQuery('#menuurl').html('');

jQuery('#iservice').change(function(){
  if(jQuery('#iservice').val()=='service')jQuery('#menuurl').html(isholder+'servicesportfolio/'+jQuery('#menuphrase').val().replace(' ','-')+'/');
  if(jQuery('#iservice').val()=='industry')jQuery('#menuurl').html(isholder+'industriesportfolio/'+jQuery('#menuphrase').val().replace(' ','-')+'/');
});
jQuery('#menuphrase').keyup(function(){
  if(jQuery('#iservice').val()=='service')jQuery('#menuurl').html(isholder+'servicesportfolio/'+jQuery('#menuphrase').val().replace(' ','-')+'/');
  if(jQuery('#iservice').val()=='industry')jQuery('#menuurl').html(isholder+'industriesportfolio/'+jQuery('#menuphrase').val().replace(' ','-')+'/');
});
  
</script>
  </div>

  <script type="text/javascript">
  jQuery('.lsp-links').hide();
  jQuery('.lsp-show-links').click(function(){
    jQuery('.lsp-links').toggle();
  });
  </script>



   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>
<?php global $premium; if($premium): ?>

<div class="lsp-advanced">





<p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?></a><br>
       <input type="text" name="lsp-keyphrase-override" value="<?php echo $lsp_keyphrase_override; ?>" size="40"></p>


    <p><?php _e("Show the footer links to your portfolio pages on all pages?", 'lsp_text_domain' ); ?><br>
      <select name="lsp-cities-all-pages">
        <option value="yes" <?php if($lsp_cities_all_pages!="no")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
        <option value="no" <?php if($lsp_cities_all_pages=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
      </select></p>

   <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far">
      <option value="auto" <?php if($lsp_how_far=="auto" || $lsp_how_far=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far=="0" && $lsp_how_far!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type">
    <option value="local" <?php if($lsp_set_type=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type=="national")echo "selected"; ?>><?php _e('National','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>


  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities" value="<?php echo $lsp_exclude_cities; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities" value="<?php echo $lsp_add_cities; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations" value="<?php echo $lsp_abbreviations; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states" value="<?php echo $lsp_exclude_states; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states" value="<?php echo $lsp_add_states; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines">
    <option value="tags" <?php if($lsp_hide_headlines=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>




  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings">
    <option value="yes" <?php if($lsp_smart_settings=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus" value="<?php echo $lsp_local_focus; ?>" size="40">

  

  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus" value="<?php echo $lsp_country_focus; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus" value="<?php echo $lsp_state_focus; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit" value="<?php echo $lsp_local_population_limit; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit" value="<?php echo $lsp_national_population_limit; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit" value="<?php echo $lsp_international_population_limit; ?>" size="40">
</p>

  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit" value="<?php echo $lsp_local_max_limit; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit" value="<?php echo $lsp_national_max_limit; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit" value="<?php echo $lsp_international_max_limit; ?>" size="40">
</p>




</div>

<?php endif;?>

<?php global $premium; if($premium == 0): ?>
<div class="lsp-advanced">
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li>
<li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
</div>
<?php endif;?>

  </div>

<div id="pformapi" class="pform">
  <br>
  <h3><?php _e('Premium Software Key & Auto-Settings','lsp_text_domain');?></h3>

<p>  <p><?php _e("Services Offered", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-services" value="<?php echo $lsp_services; ?>" size="40">
  </p>

  <p>
<?php _e("Percent of your business / profit / desired focus for each:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-services" value="<?php echo $lsp_percents; ?>" size="40">
  </p>

  <p>
<?php _e("Radius Served in Miles", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-services" value="<?php echo $lsp_percents; ?>" size="40">
  </p>




  <p><?php _e("Your Premium Key (enables premium features and settings auto-optimization):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-api-key" value="<?php echo $lsp_api_key; ?>" size="40">

    <p><?php _e("Auto-Optimize:", 'lsp_text_domain' ); ?> <br>
      <select name="lsp-auto-adjust">
    <option value="yes" <?php if($lsp_auto_adjust!="no")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="suggestions" <?php if($lsp_auto_adjust=="no")echo "selected"; ?>><?php _e('Only show me the suggestions','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_auto_adjust=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>


  <?php if(get_option('lsp-api-key')):?>

    <p><?php _e("Have a contact form on each local portfolio page (to increase lead generation)", 'lsp_text_domain' ); ?><br>
      <select name="lsp-contact-form">
        <option value="no" <?php if($lsp_contact_form!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
        <option value="yes" <?php if($lsp_contact_form=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
      </select></p>


<p><?php _e("Email it To (separate multiple with commas):","lsp_text_domain");?> <br>
       <input type="text" name="lsp-email-addresses" value="<?php echo $lsp_email_addresses; ?>" size="40"></p>


<p><?php _e("Form Headline:","lsp_text_domain");?> <br>
       <input type="text" name="lsp-form-header" value="<?php echo $lsp_form_header; ?>" size="40"></p>




  <p><b><?php _e("Hide the attribution footer links?", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-hide-attribution">
    <option value="yes" <?php if($lsp_hide_attribution=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_hide_attribution!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>


<?php endif; ?>

<!--
    <p><?php _e("Your Site's Moz Rank (used to auto-adjust settings, findable at http://opensiteexplorer.org):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-mozrank" value="<?php echo $lsp_mozrank; ?>" size="40">
-->
</div>

<div id="pform2" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 2:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city2" value="<?php echo $lsp_city2; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state2" value="<?php echo $lsp_state2; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase2" value="<?php echo $lsp_keyphrase2; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius2" value="<?php echo $lsp_radius2; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text2"><?php echo $lsp_intro_text2; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities2">
    <option value="yes" <?php if($lsp_only_match_cities2=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities2=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->



  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now2">
    <option value="yes" <?php if($lsp_publish_now2=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now2=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">


     <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override2" value="<?php echo $lsp_keyphrase_override2; ?>" size="40"></p>



  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far2">
      <option value="auto" <?php if($lsp_how_far2=="auto" || $lsp_how_far2=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far2=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far2=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far2=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far2=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far2=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far2=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far2=="0" && $lsp_how_far2!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type2">
    <option value="local" <?php if($lsp_set_type2=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type2=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type2=="national")echo "selected"; ?>><?php _e('National','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type2=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type2=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type2=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type2=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type2=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type2=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>


  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities2" value="<?php echo $lsp_exclude_cities2; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities2" value="<?php echo $lsp_add_cities2; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations2" value="<?php echo $lsp_abbreviations2; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states2" value="<?php echo $lsp_exclude_states2; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states2" value="<?php echo $lsp_add_states2; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries2" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries2; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries2" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries2; ?>" size="40"></p>





  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings2">
    <option value="yes" <?php if($lsp_smart_settings2=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings2!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus2" value="<?php echo $lsp_local_focus2; ?>" size="40">


  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus2" value="<?php echo $lsp_country_focus2; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus2" value="<?php echo $lsp_state_focus2; ?>" size="40">






  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit2" value="<?php echo $lsp_local_population_limit2; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit2" value="<?php echo $lsp_national_population_limit2; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit2" value="<?php echo $lsp_international_population_limit2; ?>" size="40">
</p>


  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit2" value="<?php echo $lsp_local_max_limit2; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit2" value="<?php echo $lsp_national_max_limit2; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit2" value="<?php echo $lsp_international_max_limit2; ?>" size="40">
</p>






</div>

<?php endif;?>

<?php global $premium; if($premium == 0): ?>
<div class="lsp-advanced">
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
</div>
<?php endif;?>

</div>

<div id="pform3" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 3:</h3>

  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city3" value="<?php echo $lsp_city3; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state3" value="<?php echo $lsp_state3; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase3" value="<?php echo $lsp_keyphrase3; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius3" value="<?php echo $lsp_radius3; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text3"><?php echo $lsp_intro_text3; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities">
    <option value="yes" <?php if($lsp_only_match_cities=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->



  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now3">
    <option value="yes" <?php if($lsp_publish_now3=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now3=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>


<div class="lsp-advanced">


          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override3" value="<?php echo $lsp_keyphrase_override3; ?>" size="40"></p>

  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far3">
      <option value="auto" <?php if($lsp_how_far3=="auto" || $lsp_how_far3=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far3=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far3=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far3=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far3=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far3=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far3=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far3=="0" && $lsp_how_far3!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>


  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type3">
    <option value="local" <?php if($lsp_set_type3=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type3=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type3=="national")echo "selected"; ?>><?php _e('National','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type3=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type3=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type3=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type3=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type3=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type3=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>



  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities3" value="<?php echo $lsp_exclude_cities3; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities3" value="<?php echo $lsp_add_cities3; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations3" value="<?php echo $lsp_abbreviations3; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states3" value="<?php echo $lsp_exclude_states3; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states3" value="<?php echo $lsp_add_states3; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries3" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries3; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries3" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries3; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines3">
    <option value="tags" <?php if($lsp_hide_headlines3=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines3=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines3=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>




  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings3">
    <option value="yes" <?php if($lsp_smart_settings3=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings3!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus3" value="<?php echo $lsp_local_focus3; ?>" size="40">



  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus3" value="<?php echo $lsp_country_focus3; ?>" size="40">
  <br>


  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus3" value="<?php echo $lsp_state_focus3; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit3" value="<?php echo $lsp_local_population_limit3; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit3" value="<?php echo $lsp_national_population_limit3; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit3" value="<?php echo $lsp_international_population_limit3; ?>" size="40">
</p>

  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit3" value="<?php echo $lsp_local_max_limit3; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit3" value="<?php echo $lsp_national_max_limit3; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit3" value="<?php echo $lsp_international_max_limit3; ?>" size="40">
</p>



</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>

<div id="pform4" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 4:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city4" value="<?php echo $lsp_city4; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state4" value="<?php echo $lsp_state4; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase4" value="<?php echo $lsp_keyphrase4; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius4" value="<?php echo $lsp_radius4; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text4"><?php echo $lsp_intro_text4; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities">
    <option value="yes" <?php if($lsp_only_match_cities=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->



  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now4">
    <option value="yes" <?php if($lsp_publish_now4=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now4=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">



          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override4" value="<?php echo $lsp_keyphrase_override4; ?>" size="40"></p>


  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far4">
      <option value="auto" <?php if($lsp_how_far4=="auto" || $lsp_how_far4=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far4=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far4=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far4=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far4=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far4=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far4=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far4=="0" && $lsp_how_far4!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type4">
    <option value="local" <?php if($lsp_set_type4=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type4=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type4=="national")echo "selected"; ?>><?php _e('National','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type4=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type4=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type4=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type4=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type4=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type4=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>



  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities4" value="<?php echo $lsp_exclude_cities4; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities4" value="<?php echo $lsp_add_cities4; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations4" value="<?php echo $lsp_abbreviations4; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states4" value="<?php echo $lsp_exclude_states4; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states4" value="<?php echo $lsp_add_states4; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries4" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries4; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries4" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries4; ?>" size="40"></p>




  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings4">
    <option value="yes" <?php if($lsp_smart_settings4=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings4!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus4" value="<?php echo $lsp_local_focus4; ?>" size="40">

  

  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus4" value="<?php echo $lsp_country_focus4; ?>" size="40">
  <br>

<p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus4" value="<?php echo $lsp_state_focus4; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit4" value="<?php echo $lsp_local_population_limit4; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit4" value="<?php echo $lsp_national_population_limit4; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit4" value="<?php echo $lsp_international_population_limit4; ?>" size="40">
</p>

  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit4" value="<?php echo $lsp_local_max_limit4; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit4" value="<?php echo $lsp_national_max_limit4; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit4" value="<?php echo $lsp_international_max_limit4; ?>" size="40">
</p>





</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>


<div id="pform5" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 5:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city5" value="<?php echo $lsp_city5; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state5" value="<?php echo $lsp_state5; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase5" value="<?php echo $lsp_keyphrase5; ?>" size="40"></p>

  <p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius5" value="<?php echo $lsp_radius5; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text5"><?php echo $lsp_intro_text5; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities5">
    <option value="yes" <?php if($lsp_only_match_cities5=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities5=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->



  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now5">
    <option value="yes" <?php if($lsp_publish_now5=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now5=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">


          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override5" value="<?php echo $lsp_keyphrase_override5; ?>" size="40"></p>



  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far5">
      <option value="auto" <?php if($lsp_how_far5=="auto" || $lsp_how_far5=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far5=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far5=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far5=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far5=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far5=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far5=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far5=="0" && $lsp_how_far5!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>


  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type5">
    <option value="local" <?php if($lsp_set_type5=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type5=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type5=="national")echo "selected"; ?>><?php _e('National (Even Coverage)','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type5=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type5=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type5=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type5=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type5=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type5=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>


  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities5" value="<?php echo $lsp_exclude_cities5; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities5" value="<?php echo $lsp_add_cities5; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations5" value="<?php echo $lsp_abbreviations5; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states5" value="<?php echo $lsp_exclude_states5; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states5" value="<?php echo $lsp_add_states5; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries5" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries5; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries5" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries5; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines5">
    <option value="tags" <?php if($lsp_hide_headlines5=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines5=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines5=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>


  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings5">
    <option value="yes" <?php if($lsp_smart_settings5=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings5!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus5" value="<?php echo $lsp_local_focus5; ?>" size="40">



  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus5" value="<?php echo $lsp_country_focus5; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus5" value="<?php echo $lsp_state_focus5; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit5" value="<?php echo $lsp_local_population_limit5; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit5" value="<?php echo $lsp_national_population_limit5; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit5" value="<?php echo $lsp_international_population_limit5; ?>" size="40">
</p>


  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit5" value="<?php echo $lsp_local_max_limit5; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit5" value="<?php echo $lsp_national_max_limit5; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit5" value="<?php echo $lsp_international_max_limit5; ?>" size="40">
</p>




</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul><?php endif;?>
</div>


<div id="pform6" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 6:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city6" value="<?php echo $lsp_city6; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state6" value="<?php echo $lsp_state6; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase6" value="<?php echo $lsp_keyphrase6; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius6" value="<?php echo $lsp_radius6; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text6"><?php echo $lsp_intro_text6; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities6">
    <option value="yes" <?php if($lsp_only_match_cities6=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities6=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->



  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now6">
    <option value="yes" <?php if($lsp_publish_now6=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now6=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">


          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override6" value="<?php echo $lsp_keyphrase_override6; ?>" size="40"></p>



  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far6">
      <option value="auto" <?php if($lsp_how_far6=="auto" || $lsp_how_far6=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far6=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far6=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far6=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far6=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far6=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far6=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far6=="0" && $lsp_how_far6!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type6">
    <option value="local" <?php if($lsp_set_type6=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type6=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type6=="national")echo "selected"; ?>><?php _e('National (Even Coverage)','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type6=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type6=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type6=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type6=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type6=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type6=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>


  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities6" value="<?php echo $lsp_exclude_cities6; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities6" value="<?php echo $lsp_add_cities6; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations6" value="<?php echo $lsp_abbreviations6; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states6" value="<?php echo $lsp_exclude_states6; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states6" value="<?php echo $lsp_add_states6; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries6" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries6; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries6" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries6; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines6">
    <option value="tags" <?php if($lsp_hide_headlines6=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines6=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines6=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>



  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings6">
    <option value="yes" <?php if($lsp_smart_settings6=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings6!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus6" value="<?php echo $lsp_local_focus6; ?>" size="40">


  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus6" value="<?php echo $lsp_country_focus6; ?>" size="40">
  <br>


  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus6" value="<?php echo $lsp_state_focus6; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit6" value="<?php echo $lsp_local_population_limit6; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit6" value="<?php echo $lsp_national_population_limit6; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit6" value="<?php echo $lsp_international_population_limit6; ?>" size="40">
</p>


  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit6" value="<?php echo $lsp_local_max_limit6; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit6" value="<?php echo $lsp_national_max_limit6; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit6" value="<?php echo $lsp_international_max_limit6; ?>" size="40">
</p>




</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>

<div id="pform7" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 7:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city7" value="<?php echo $lsp_city7; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state7" value="<?php echo $lsp_state7; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase7" value="<?php echo $lsp_keyphrase7; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius7" value="<?php echo $lsp_radius7; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text7"><?php echo $lsp_intro_text7; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities7">
    <option value="yes" <?php if($lsp_only_match_cities7=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities7=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->




  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now7">
    <option value="yes" <?php if($lsp_publish_now7=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now7=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">



          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override7" value="<?php echo $lsp_keyphrase_override7; ?>" size="40"></p>




  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far7">
      <option value="auto" <?php if($lsp_how_far7=="auto" || $lsp_how_far7=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far7=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far7=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far7=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far7=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far7=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far7=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far7=="0" && $lsp_how_far7!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>


  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type7">
    <option value="local" <?php if($lsp_set_type7=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type7=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type7=="national")echo "selected"; ?>><?php _e('National (Even Coverage)','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type7=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type7=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type7=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type7=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type7=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type7=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>
  

  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities7" value="<?php echo $lsp_exclude_cities7; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities7" value="<?php echo $lsp_add_cities7; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations7" value="<?php echo $lsp_abbreviations7; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states7" value="<?php echo $lsp_exclude_states7; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states7" value="<?php echo $lsp_add_states7; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries7" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries7; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries7" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries7; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines7">
    <option value="tags" <?php if($lsp_hide_headlines7=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines7=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines7=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>



  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings7">
    <option value="yes" <?php if($lsp_smart_settings7=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings7!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus7" value="<?php echo $lsp_local_focus7; ?>" size="40">

  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus7" value="<?php echo $lsp_country_focus7; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus7" value="<?php echo $lsp_state_focus7; ?>" size="40">

  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit7" value="<?php echo $lsp_local_population_limit7; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit7" value="<?php echo $lsp_national_population_limit7; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit7" value="<?php echo $lsp_international_population_limit7; ?>" size="40">
</p>


  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit7" value="<?php echo $lsp_local_max_limit7; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit7" value="<?php echo $lsp_national_max_limit7; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit7" value="<?php echo $lsp_international_max_limit7; ?>" size="40">
</p>




</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>


<div id="pform8" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 8:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city8" value="<?php echo $lsp_city8; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state8" value="<?php echo $lsp_state8; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase8" value="<?php echo $lsp_keyphrase8; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius8" value="<?php echo $lsp_radius8; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text8"><?php echo $lsp_intro_text8; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities8">
    <option value="yes" <?php if($lsp_only_match_cities8=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities8=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->




  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now8">
    <option value="yes" <?php if($lsp_publish_now8=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now8=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">


          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override8" value="<?php echo $lsp_keyphrase_override8; ?>" size="40"></p>



  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far8">
      <option value="auto" <?php if($lsp_how_far8=="auto" || $lsp_how_far8=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far8=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far8=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far8=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far8=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far8=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far8=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far8=="0" && $lsp_how_far8!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type8">
    <option value="local" <?php if($lsp_set_type8=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type8=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type8=="national")echo "selected"; ?>><?php _e('National (Even Coverage)','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type8=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type8=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type8=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type8=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type8=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type8=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>


  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities8" value="<?php echo $lsp_exclude_cities8; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities8" value="<?php echo $lsp_add_cities8; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations8" value="<?php echo $lsp_abbreviations8; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states8" value="<?php echo $lsp_exclude_states8; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states8" value="<?php echo $lsp_add_states8; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries8" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries8; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries8" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries8; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines8">
    <option value="tags" <?php if($lsp_hide_headlines8=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines8=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines8=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>




  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings">
    <option value="yes" <?php if($lsp_smart_settings8=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings8!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus8" value="<?php echo $lsp_local_focus8; ?>" size="40">



  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus8" value="<?php echo $lsp_country_focus8; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus8" value="<?php echo $lsp_state_focus8; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit8" value="<?php echo $lsp_local_population_limit8; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit8" value="<?php echo $lsp_national_population_limit8; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit8" value="<?php echo $lsp_international_population_limit8; ?>" size="40">
</p>

  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit8" value="<?php echo $lsp_local_max_limit8; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit8" value="<?php echo $lsp_national_max_limit8; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit8" value="<?php echo $lsp_international_max_limit8; ?>" size="40">
</p>




</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>


<div id="pform9" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 9:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city9" value="<?php echo $lsp_city9; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state9" value="<?php echo $lsp_state9; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase9" value="<?php echo $lsp_keyphrase9; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius9" value="<?php echo $lsp_radius9; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text9"><?php echo $lsp_intro_text9; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities9">
    <option value="yes" <?php if($lsp_only_match_cities9=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities9=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->

  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now9">
    <option value="yes" <?php if($lsp_publish_now9=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now9=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>

   <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

<div class="lsp-advanced">


          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override9" value="<?php echo $lsp_keyphrase_override9; ?>" size="40"></p>


  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far9">
      <option value="auto" <?php if($lsp_how_far9=="auto" || $lsp_how_far9=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far9=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far9=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far9=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far9=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far9=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far9=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far9=="0" && $lsp_how_far9!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>
    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type9">
    <option value="local" <?php if($lsp_set_type9=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type9=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type9=="national")echo "selected"; ?>><?php _e('National (Even Coverage)','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type9=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type9=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type9=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type9=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type9=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type9=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>


  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities9" value="<?php echo $lsp_exclude_cities9; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities9" value="<?php echo $lsp_add_cities9; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations9" value="<?php echo $lsp_abbreviations9; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states9" value="<?php echo $lsp_exclude_states9; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states9" value="<?php echo $lsp_add_states9; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries9" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries9; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries9" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries9; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines9">
    <option value="tags" <?php if($lsp_hide_headlines9=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines9=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines9=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>




  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings9">
    <option value="yes" <?php if($lsp_smart_settings9=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings9!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus9" value="<?php echo $lsp_local_focus9; ?>" size="40">



  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus9" value="<?php echo $lsp_country_focus9; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus9" value="<?php echo $lsp_state_focus9; ?>" size="40">

  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit9" value="<?php echo $lsp_local_population_limit9; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit9" value="<?php echo $lsp_national_population_limit9; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit9" value="<?php echo $lsp_international_population_limit9; ?>" size="40">
</p>

  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit9" value="<?php echo $lsp_local_max_limit9; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit9" value="<?php echo $lsp_national_max_limit9; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit9" value="<?php echo $lsp_international_max_limit9; ?>" size="40">
</p>





</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>


<div id="pform10" class="pform">
<?php global $premium; if($premium): ?>

  <br><h3><?php _e('Portfolio','lsp_text_domain');?> 10:</h3>
  <p><?php _e("City (center of service area):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-city10" value="<?php echo $lsp_city10; ?>" size="40"></p>

  <p><?php _e("State / Province (full state name):", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-state10" value="<?php echo $lsp_state10; ?>" size="40"></p>

  <p><?php _e("Key Phrase or Key Word: (the main Service or Product your offer)", 'lsp_text_domain' ); ?> <br>
   <input type="text" name="lsp-keyphrase10" value="<?php echo $lsp_keyphrase10; ?>" size="40"></p>

<p><?php _e("Radius Served in miles",'lsp_text_domain');?> <font color='#aaaaaa' size='-1'><?php _e("(this is a square area with side-to-side diameter equal to roughly twice the radius)", 'lsp_text_domain' ); ?></font><br>
   <input type="text" name="lsp-radius10" value="<?php echo $lsp_radius10; ?>" size="40"></p>

  <?php  ?>
  <p><?php _e("Intro Text (goes at the top of each city's portfolio page):", 'lsp_text_domain' ); ?> <br>
  <textarea rows="4" cols="50" name="lsp-intro-text10"><?php echo $lsp_intro_text10; ?></textarea><font color="#aaaaaa" size="-1"><br><?php _e('Placeholders of','lsp_text_domain');?> [city] and [state] <?php _e('will be dynamically replaced to match the page the visitor is viewing.','lsp_text_domain');?> <!-- If you don't have many clients/testimonials in the system, having this section be longer generally helps SEO in our experience. --> </font>
  </p>

<!--
  <p><?php _e("Only Show Match Cities:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-only-match-cities10">
    <option value="yes" <?php if($lsp_only_match_cities10=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_only_match_cities10=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p> -->



  <p><?php _e("Publish Now?", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-publish-now10">
    <option value="yes" <?php if($lsp_publish_now10=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_publish_now10=="no")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>




<div class="lsp-advanced">

          <p><?php _e("(optional) Key Phrase or Key Word Override SEO Term:","lsp_text_domain");?> <br><font color='#aaaaaa'><?php _e("(for the above service keyphrase, optimize its portfolio for this keyphrase -- for instance, if someone put 'Immigration Law' for the keyphrase above which is then used for tagging project / client posts, but wanted to SEO their portfolio for the term 'Immigration Lawyer', they would put 'Immigration Lawyer' below)</font>", 'lsp_text_domain' ); ?> <br>
       <input type="text" name="lsp-keyphrase-override10" value="<?php echo $lsp_keyphrase_override10; ?>" size="40"></p>
 <br> <a href="#" class="lsp-show-advanced"><?php _e('Show Advanced Controls','lsp_text_domain');?></a>

  <p><?php _e("Up to how far away should we show projects / clients on a city's portfolio page (in miles)", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-how-far10">
      <option value="auto" <?php if($lsp_how_far10=="auto" || $lsp_how_far10=="")echo "selected"; ?>><?php _e('auto-handle this (recommended)','lsp_text_domain');?></option>
      <option value="1000" <?php if($lsp_how_far10=="90")echo "selected"; ?>>1000</option>
      <option value="300" <?php if($lsp_how_far10=="50")echo "selected"; ?>>300</option>
      <option value="100" <?php if($lsp_how_far10=="25")echo "selected"; ?>>100</option>
      <option value="50" <?php if($lsp_how_far10=="15")echo "selected"; ?>>50</option>
      <option value="25" <?php if($lsp_how_far10=="10")echo "selected"; ?>>25</option>
      <option value="10" <?php if($lsp_how_far10=="5")echo "selected"; ?>>10</option>
      <option value="0" <?php if($lsp_how_far10=="0" && $lsp_how_far10!="")echo "selected"; ?>>0 <?php _e('(only shows same-city matches)','lsp_text_domain');?></option>

    </select>
   </p>
  

  <p><?php _e("Portfolio Type / Set Coverage:", 'lsp_text_domain' ); ?> <br>
  <select name="lsp-set-type10">
    <option value="local" <?php if($lsp_set_type10=="local")echo "selected"; ?>><?php _e('Local','lsp_text_domain');?></option>
    <option value="localCities" <?php if($lsp_set_type10=="localCities")echo "selected"; ?>><?php _e('Local (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="national" <?php if($lsp_set_type10=="national")echo "selected"; ?>><?php _e('National (Even Coverage)','lsp_text_domain');?></option>
    <option value="nationalStates" <?php if($lsp_set_type10=="nationalStates")echo "selected"; ?>><?php _e('National (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="nationalCities" <?php if($lsp_set_type10=="nationalCities")echo "selected"; ?>><?php _e('National (Only Cities I Have Clients In)','lsp_text_domain');?></option>
    <option value="international" <?php if($lsp_set_type10=="international")echo "selected"; ?>><?php _e('International (Even Coverage)','lsp_text_domain');?></option>
    <option value="internationalCountries" <?php if($lsp_set_type10=="internationalCountries")echo "selected"; ?>><?php _e('International (Only Countries I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalStates" <?php if($lsp_set_type10=="internationalStates")echo "selected"; ?>><?php _e('International (Only States I Have Clients In)','lsp_text_domain');?></option>
    <option value="internationalCities" <?php if($lsp_set_type10=="internationalCities")echo "selected"; ?>><?php _e('International (Only Cities I Have Clients In)','lsp_text_domain');?></option>
  </select>
  </p>




  <p><?php _e("Exclude Cities:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-cities10" value="<?php echo $lsp_exclude_cities10; ?>" size="40"></p>
<!--
  <p><?php _e("Add Cities:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-cities10" value="<?php echo $lsp_add_cities10; ?>" size="40">-->
<!--
  <p><?php _e("Use Abbreviations Instead:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-abbreviations10" value="<?php echo $lsp_abbreviations10; ?>" size="40">-->

  <p><?php _e("Exclude States:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-states10" value="<?php echo $lsp_exclude_states10; ?>" size="40"></p>
<!--
  <p><?php _e("Add States:", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-add-states10" value="<?php echo $lsp_add_states10; ?>" size="40">-->

  <p><?php _e("Exclude Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-exclude-countries10" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_exclude_countries10; ?>" size="40"></p>

  <p><?php _e("Only These Countries:", 'lsp_text_domain' ); ?> <br>
    <input type="text" name="lsp-add-countries10" placeholder="<?php _e('English 2 letter country code(s), comma separate multiple','lsp_text_domain');?>" value="<?php echo $lsp_add_countries10; ?>" size="40"></p>

  <p><?php _e("Project / Client Entry Headlines:", 'lsp_text_domain' ); ?><br>
  <select name="lsp-hide-headlines10">
    <option value="tags" <?php if($lsp_hide_headlines10=="tags")echo "selected"; ?>><?php _e('Use Location + Service/Product Tags Used','lsp_text_domain');?></option>
    <option value="title" <?php if($lsp_hide_headlines10=="title")echo "selected"; ?>><?php _e('Use The Title I Set','lsp_text_domain');?></option>
    <option value="none" <?php if($lsp_hide_headlines10=="none")echo "selected"; ?>><?php _e('No Headlines','lsp_text_domain');?></option>
  </select>
  </p>



  
  <!--
  <p><b><?php _e("Use smart settings? (requires premium version key -- helps to optimally rank your directory pages and avoid the not ranking, supplemental index -- https://en.wikipedia.org/wiki/Supplemental_Result)", 'lsp_text_domain' ); ?></b><br>
  <select name="lsp-smart-settings10">
    <option value="yes" <?php if($lsp_smart_settings10=="yes")echo "selected"; ?>><?php _e('Yes','lsp_text_domain');?></option>
    <option value="no" <?php if($lsp_smart_settings10!="yes")echo "selected"; ?>><?php _e('No','lsp_text_domain');?></option>
  </select></p>-->

  <p><?php _e("Local Area Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-focus10" value="<?php echo $lsp_local_focus10; ?>" size="40">



  <p><?php _e("Home Country Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-country-focus10" value="<?php echo $lsp_country_focus10; ?>" size="40">
  <br>

  <p><?php _e("International Percent Focus", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-state-focus10" value="<?php echo $lsp_state_focus10; ?>" size="40">


  <font color='#aaaaaa'><br><br><?php _e('The options below can help get more portfolio pages to rank. Alternatively, our premium version is going to be able to automatically and intelligently set these for you','lsp_text_domain');?></font>
  <p><?php _e("Local Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-population-limit10" value="<?php echo $lsp_local_population_limit10; ?>" size="40">

  <p><?php _e("National Set City Population Minimum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-population-limit10" value="<?php echo $lsp_national_population_limit10; ?>" size="40">

  <p><?php _e("International Set City Population Minimum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-population-limit10" value="<?php echo $lsp_international_population_limit10; ?>" size="40">
</p>


  <p><?php _e("Local Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-local-max-limit10" value="<?php echo $lsp_local_max_limit10; ?>" size="40">

  <p><?php _e("National Set City Population Maximum (for getting it's own portfolio page)", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-national-max-limit10" value="<?php echo $lsp_national_max_limit10; ?>" size="40">

  <p><?php _e("International Set City Population Maximum (for getting it's own portfolio page):", 'lsp_text_domain' ); ?> <br>
  <input type="text" name="lsp-international-max-limit10" value="<?php echo $lsp_international_max_limit10; ?>" size="40">
</p>



</div>
<?php endif;?>
<?php global $premium; if($premium == 0): ?>
<br><br><a href="http://instawowlocalseo.com" target="_blank"><?php _e('Upgrade to Premium at instawowlocalseo.com','lsp_text_domain');?></a> <?php _e('to unlock these features that let you','lsp_text_domain');?> 
<ul>

<li>&middot;<?php _e('Rank in a broader area or nationally','lsp_text_domain');?></li>
<li>&middot;<?php _e('Increase the free visitors to your portfolio from search engines cap beyond 100 per month','lsp_text_domain');?> </li>
<li>&middot;<?php _e('Intelligently set / auto-set population lower-limits for cities (try to rank for too many cities and your pages can end up in the supplemental index and then pretty much will not rank)','lsp_text_domain');?></li>

<li>&middot;<?php _e('Specify which cities are most important to you to rank for','lsp_text_domain');?></li><li>&middot;<?php _e('Optionally have multiple portfolios which can help you to rank strongly for more than one term','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific cities','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific states','lsp_text_domain');?></li>
<li>&middot;<?php _e('Add or exclude specific countries','lsp_text_domain');?></li>
</ul>
<?php endif;?>
</div>



<script type="text/javascript">
jQuery('.lsp-advanced').hide();
jQuery('.lsp-show-advanced').click(function(){
  jQuery('.lsp-advanced').toggle();
});





jQuery('input[name=lsp-keyphrase]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text]').val()==''){
    jQuery('textarea[name=lsp-intro-text]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase2]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text2]').val()==''){
    jQuery('textarea[name=lsp-intro-text2]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase2]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase3]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text3]').val()==''){
    jQuery('textarea[name=lsp-intro-text3]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase3]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase4]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text4]').val()==''){
    jQuery('textarea[name=lsp-intro-text4]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase4]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase5]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text5]').val()==''){
    jQuery('textarea[name=lsp-intro-text5]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase5]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase6]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text6]').val()==''){
    jQuery('textarea[name=lsp-intro-text6]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase6]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase7]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text7]').val()==''){
    jQuery('textarea[name=lsp-intro-text7]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase7]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase8]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text8]').val()==''){
    jQuery('textarea[name=lsp-intro-text8]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase8]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase9]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text9]').val()==''){
    jQuery('textarea[name=lsp-intro-text9]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase9]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});

jQuery('input[name=lsp-keyphrase10]').change(function(){
  if(jQuery('textarea[name=lsp-intro-text10]').val()==''){
    jQuery('textarea[name=lsp-intro-text10]').val('<?php _e("We offer ","lsp_text_domain");?>'+jQuery('input[name=lsp-keyphrase10]').val()+"<?php _e(' services for ','lsp_text_domain');?>[city], [state]<?php _e('. You can see who we have worked with around there below. Please contact us if you have any questions.','lsp_text_domain');?>");
  }
});







if((jQuery('select[name=lsp-set-type]').val()=='local') || (jQuery('select[name=lsp-set-type]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states]').parent().hide();
  jQuery('input[name=lsp-exclude-countries]').parent().hide();
  jQuery('input[name=lsp-add-countries]').parent().hide();
  jQuery('input[name=lsp-national-population-limit]').parent().hide();
  jQuery('input[name=lsp-international-population-limit]').parent().hide();
}
if((jQuery('select[name=lsp-set-type]').val()=='national') || (jQuery('select[name=lsp-set-type]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states]').parent().show();
  jQuery('input[name=lsp-exclude-countries]').parent().hide();
  jQuery('input[name=lsp-add-countries]').parent().hide();
  jQuery('input[name=lsp-national-population-limit]').parent().show();
  jQuery('input[name=lsp-international-population-limit]').parent().hide();
}
if((jQuery('select[name=lsp-set-type]').val()=='international') || (jQuery('select[name=lsp-set-type]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states]').parent().show();
  jQuery('input[name=lsp-exclude-countries]').parent().show();
  jQuery('input[name=lsp-add-countries]').parent().show();
  jQuery('input[name=lsp-national-population-limit]').parent().show();
  jQuery('input[name=lsp-international-population-limit]').parent().show();

}
jQuery('select[name=lsp-set-type]').change(function(){
  if((jQuery('select[name=lsp-set-type]').val()=='local') || (jQuery('select[name=lsp-set-type]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states]').parent().hide();
    jQuery('input[name=lsp-exclude-countries]').parent().hide();
    jQuery('input[name=lsp-add-countries]').parent().hide();
    jQuery('input[name=lsp-national-population-limit]').parent().hide();
    jQuery('input[name=lsp-international-population-limit]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type]').val()=='national') || (jQuery('select[name=lsp-set-type]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states]').parent().show();
    jQuery('input[name=lsp-exclude-countries]').parent().hide();
    jQuery('input[name=lsp-add-countries]').parent().hide();
    jQuery('input[name=lsp-national-population-limit]').parent().show();
    jQuery('input[name=lsp-international-population-limit]').parent().hide();

  }
  if((jQuery('select[name=lsp-set-type]').val()=='international') || (jQuery('select[name=lsp-set-type]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states]').parent().show();
    jQuery('input[name=lsp-exclude-countries]').parent().show();
    jQuery('input[name=lsp-add-countries]').parent().show();
    jQuery('input[name=lsp-national-population-limit]').parent().show();
    jQuery('input[name=lsp-international-population-limit]').parent().show();
  }
});


if((jQuery('select[name=lsp-set-type2]').val()=='local') || (jQuery('select[name=lsp-set-type2]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states2]').parent().hide();
  jQuery('input[name=lsp-exclude-countries2]').parent().hide();
  jQuery('input[name=lsp-add-countries2]').parent().hide();
  jQuery('input[name=lsp-national-population-limit2]').parent().hide();
  jQuery('input[name=lsp-international-population-limit2]').parent().hide();
}
if((jQuery('select[name=lsp-set-type2]').val()=='national') || (jQuery('select[name=lsp-set-type2]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type2]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states2]').parent().show();
  jQuery('input[name=lsp-exclude-countries2]').parent().hide();
  jQuery('input[name=lsp-add-countries2]').parent().hide();
  jQuery('input[name=lsp-national-population-limit2]').parent().show();
  jQuery('input[name=lsp-international-population-limit2]').parent().hide();
}
if((jQuery('select[name=lsp-set-type2]').val()=='international') || (jQuery('select[name=lsp-set-type2]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type2]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type2]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states2]').parent().show();
  jQuery('input[name=lsp-exclude-countries2]').parent().show();
  jQuery('input[name=lsp-add-countries2]').parent().show();
  jQuery('input[name=lsp-national-population-limit2]').parent().show();
  jQuery('input[name=lsp-international-population-limit2]').parent().show();
}
jQuery('select[name=lsp-set-type2]').change(function(){
  if((jQuery('select[name=lsp-set-type2]').val()=='local') || (jQuery('select[name=lsp-set-type2]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states2]').parent().hide();
    jQuery('input[name=lsp-exclude-countries2]').parent().hide();
    jQuery('input[name=lsp-add-countries2]').parent().hide();
    jQuery('input[name=lsp-national-population-limit2]').parent().hide();
    jQuery('input[name=lsp-international-population-limit2]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type2]').val()=='national') || (jQuery('select[name=lsp-set-type2]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type2]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states2]').parent().show();
    jQuery('input[name=lsp-exclude-countries2]').parent().hide();
    jQuery('input[name=lsp-add-countries2]').parent().hide();
    jQuery('input[name=lsp-national-population-limit2]').parent().show();
    jQuery('input[name=lsp-international-population-limit2]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type2]').val()=='international') || (jQuery('select[name=lsp-set-type2]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type2]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type2]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states2]').parent().show();
    jQuery('input[name=lsp-exclude-countries2]').parent().show();
    jQuery('input[name=lsp-add-countries2]').parent().show();
    jQuery('input[name=lsp-national-population-limit2]').parent().show();
    jQuery('input[name=lsp-international-population-limit2]').parent().show();
  }
});




if((jQuery('select[name=lsp-set-type3]').val()=='local') || (jQuery('select[name=lsp-set-type3]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states3]').parent().hide();
  jQuery('input[name=lsp-exclude-countries3]').parent().hide();
  jQuery('input[name=lsp-add-countries3]').parent().hide();
  jQuery('input[name=lsp-national-population-limit3]').parent().hide();
  jQuery('input[name=lsp-international-population-limit3]').parent().hide();
}
if((jQuery('select[name=lsp-set-type3]').val()=='national') || (jQuery('select[name=lsp-set-type3]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type3]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states3]').parent().show();
  jQuery('input[name=lsp-exclude-countries3]').parent().hide();
  jQuery('input[name=lsp-add-countries3]').parent().hide();
  jQuery('input[name=lsp-national-population-limit3]').parent().show();
  jQuery('input[name=lsp-international-population-limit3]').parent().hide();
}
if((jQuery('select[name=lsp-set-type3]').val()=='international') || (jQuery('select[name=lsp-set-type3]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type3]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type3]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states3]').parent().show();
  jQuery('input[name=lsp-exclude-countries3]').parent().show();
  jQuery('input[name=lsp-add-countries3]').parent().show();
  jQuery('input[name=lsp-national-population-limit3]').parent().show();
  jQuery('input[name=lsp-international-population-limit3]').parent().show();
}
jQuery('select[name=lsp-set-type3]').change(function(){
  if((jQuery('select[name=lsp-set-type3]').val()=='local') || (jQuery('select[name=lsp-set-type3]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states3]').parent().hide();
    jQuery('input[name=lsp-exclude-countries3]').parent().hide();
    jQuery('input[name=lsp-add-countries3]').parent().hide();
    jQuery('input[name=lsp-national-population-limit3]').parent().hide();
    jQuery('input[name=lsp-international-population-limit3]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type3]').val()=='national') || (jQuery('select[name=lsp-set-type3]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type3]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states3]').parent().show();
    jQuery('input[name=lsp-exclude-countries3]').parent().hide();
    jQuery('input[name=lsp-add-countries3]').parent().hide();
    jQuery('input[name=lsp-national-population-limit3]').parent().show();
    jQuery('input[name=lsp-international-population-limit3]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type3]').val()=='international') || (jQuery('select[name=lsp-set-type3]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type3]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type3]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states3]').parent().show();
    jQuery('input[name=lsp-exclude-countries3]').parent().show();
    jQuery('input[name=lsp-add-countries3]').parent().show();
    jQuery('input[name=lsp-national-population-limit3]').parent().show();
    jQuery('input[name=lsp-international-population-limit3]').parent().show();
  }
});



if((jQuery('select[name=lsp-set-type4]').val()=='local') || (jQuery('select[name=lsp-set-type4]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states4]').parent().hide();
  jQuery('input[name=lsp-exclude-countries4]').parent().hide();
  jQuery('input[name=lsp-add-countries4]').parent().hide();
  jQuery('input[name=lsp-national-population-limit4]').parent().hide();
  jQuery('input[name=lsp-international-population-limit4]').parent().hide();
}
if((jQuery('select[name=lsp-set-type4]').val()=='national') || (jQuery('select[name=lsp-set-type4]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type4]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states4]').parent().show();
  jQuery('input[name=lsp-exclude-countries4]').parent().hide();
  jQuery('input[name=lsp-add-countries4]').parent().hide();
  jQuery('input[name=lsp-national-population-limit4]').parent().show();
  jQuery('input[name=lsp-international-population-limit4]').parent().hide();
}
if((jQuery('select[name=lsp-set-type4]').val()=='international') || (jQuery('select[name=lsp-set-type4]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type4]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type4]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states4]').parent().show();
  jQuery('input[name=lsp-exclude-countries4]').parent().show();
  jQuery('input[name=lsp-add-countries4]').parent().show();
  jQuery('input[name=lsp-national-population-limit4]').parent().show();
  jQuery('input[name=lsp-international-population-limit4]').parent().show();
}
jQuery('select[name=lsp-set-type4]').change(function(){
  if((jQuery('select[name=lsp-set-type4]').val()=='local') || (jQuery('select[name=lsp-set-type4]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states4]').parent().hide();
    jQuery('input[name=lsp-exclude-countries4]').parent().hide();
    jQuery('input[name=lsp-add-countries4]').parent().hide();
    jQuery('input[name=lsp-national-population-limit4]').parent().hide();
    jQuery('input[name=lsp-international-population-limit4]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type4]').val()=='national') || (jQuery('select[name=lsp-set-type4]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type4]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states4]').parent().show();
    jQuery('input[name=lsp-exclude-countries4]').parent().hide();
    jQuery('input[name=lsp-add-countries4]').parent().hide();
    jQuery('input[name=lsp-national-population-limit4]').parent().show();
    jQuery('input[name=lsp-international-population-limit4]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type4]').val()=='international') || (jQuery('select[name=lsp-set-type4]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type4]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type4]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states4]').parent().show();
    jQuery('input[name=lsp-exclude-countries4]').parent().show();
    jQuery('input[name=lsp-add-countries4]').parent().show();
    jQuery('input[name=lsp-national-population-limit4]').parent().show();
    jQuery('input[name=lsp-international-population-limit4]').parent().show();
  }
});


if((jQuery('select[name=lsp-set-type5]').val()=='local') || (jQuery('select[name=lsp-set-type5]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states5]').parent().hide();
  jQuery('input[name=lsp-exclude-countries5]').parent().hide();
  jQuery('input[name=lsp-add-countries5]').parent().hide();
  jQuery('input[name=lsp-national-population-limit5]').parent().hide();
  jQuery('input[name=lsp-international-population-limit5]').parent().hide();
}
if((jQuery('select[name=lsp-set-type5]').val()=='national') || (jQuery('select[name=lsp-set-type5]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type5]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states5]').parent().show();
  jQuery('input[name=lsp-exclude-countries5]').parent().hide();
  jQuery('input[name=lsp-add-countries5]').parent().hide();
  jQuery('input[name=lsp-national-population-limit5]').parent().show();
  jQuery('input[name=lsp-international-population-limit5]').parent().hide();
}
if((jQuery('select[name=lsp-set-type5]').val()=='international') || (jQuery('select[name=lsp-set-type5]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type5]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type5]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states5]').parent().show();
  jQuery('input[name=lsp-exclude-countries5]').parent().show();
  jQuery('input[name=lsp-add-countries5]').parent().show();
  jQuery('input[name=lsp-national-population-limit5]').parent().show();
  jQuery('input[name=lsp-international-population-limit5]').parent().show();
}
jQuery('select[name=lsp-set-type5]').change(function(){
  if((jQuery('select[name=lsp-set-type5]').val()=='local') || (jQuery('select[name=lsp-set-type5]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states5]').parent().hide();
    jQuery('input[name=lsp-exclude-countries5]').parent().hide();
    jQuery('input[name=lsp-add-countries5]').parent().hide();
    jQuery('input[name=lsp-national-population-limit5]').parent().hide();
    jQuery('input[name=lsp-international-population-limit5]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type5]').val()=='national') || (jQuery('select[name=lsp-set-type5]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type5]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states5]').parent().show();
    jQuery('input[name=lsp-exclude-countries5]').parent().hide();
    jQuery('input[name=lsp-add-countries5]').parent().hide();
    jQuery('input[name=lsp-national-population-limit5]').parent().show();
    jQuery('input[name=lsp-international-population-limit5]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type5]').val()=='international') || (jQuery('select[name=lsp-set-type5]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type5]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type5]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states5]').parent().show();
    jQuery('input[name=lsp-exclude-countries5]').parent().show();
    jQuery('input[name=lsp-add-countries5]').parent().show();
    jQuery('input[name=lsp-national-population-limit5]').parent().show();
    jQuery('input[name=lsp-international-population-limit5]').parent().show();
  }
});


if((jQuery('select[name=lsp-set-type6]').val()=='local') || (jQuery('select[name=lsp-set-type6]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states6]').parent().hide();
  jQuery('input[name=lsp-exclude-countries6]').parent().hide();
  jQuery('input[name=lsp-add-countries6]').parent().hide();
  jQuery('input[name=lsp-national-population-limit6]').parent().hide();
  jQuery('input[name=lsp-international-population-limit6]').parent().hide();
}
if((jQuery('select[name=lsp-set-type6]').val()=='national') || (jQuery('select[name=lsp-set-type6]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type6]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states6]').parent().show();
  jQuery('input[name=lsp-exclude-countries6]').parent().hide();
  jQuery('input[name=lsp-add-countries6]').parent().hide();
  jQuery('input[name=lsp-national-population-limit6]').parent().show();
  jQuery('input[name=lsp-international-population-limit6]').parent().hide();
}
if((jQuery('select[name=lsp-set-type6]').val()=='international') || (jQuery('select[name=lsp-set-type6]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type6]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type6]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states6]').parent().show();
  jQuery('input[name=lsp-exclude-countries6]').parent().show();
  jQuery('input[name=lsp-add-countries6]').parent().show();
  jQuery('input[name=lsp-national-population-limit6]').parent().show();
  jQuery('input[name=lsp-international-population-limit6]').parent().show();
}
jQuery('select[name=lsp-set-type6]').change(function(){
  if((jQuery('select[name=lsp-set-type6]').val()=='local') || (jQuery('select[name=lsp-set-type6]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states6]').parent().hide();
    jQuery('input[name=lsp-exclude-countries6]').parent().hide();
    jQuery('input[name=lsp-add-countries6]').parent().hide();
    jQuery('input[name=lsp-national-population-limit6]').parent().hide();
    jQuery('input[name=lsp-international-population-limit6]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type6]').val()=='national') || (jQuery('select[name=lsp-set-type6]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type6]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states6]').parent().show();
    jQuery('input[name=lsp-exclude-countries6]').parent().hide();
    jQuery('input[name=lsp-add-countries6]').parent().hide();
    jQuery('input[name=lsp-national-population-limit6]').parent().show();
    jQuery('input[name=lsp-international-population-limit6]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type6]').val()=='international') || (jQuery('select[name=lsp-set-type6]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type6]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type6]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states6]').parent().show();
    jQuery('input[name=lsp-exclude-countries6]').parent().show();
    jQuery('input[name=lsp-add-countries6]').parent().show();
    jQuery('input[name=lsp-national-population-limit6]').parent().show();
    jQuery('input[name=lsp-international-population-limit6]').parent().show();
  }
});


if((jQuery('select[name=lsp-set-type7]').val()=='local') || (jQuery('select[name=lsp-set-type7]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states7]').parent().hide();
  jQuery('input[name=lsp-exclude-countries7]').parent().hide();
  jQuery('input[name=lsp-add-countries7]').parent().hide();
  jQuery('input[name=lsp-national-population-limit7]').parent().hide();
  jQuery('input[name=lsp-international-population-limit7]').parent().hide();
}
if((jQuery('select[name=lsp-set-type7]').val()=='national') || (jQuery('select[name=lsp-set-type7]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type7]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states7]').parent().show();
  jQuery('input[name=lsp-exclude-countries7]').parent().hide();
  jQuery('input[name=lsp-add-countries7]').parent().hide();
  jQuery('input[name=lsp-national-population-limit7]').parent().show();
  jQuery('input[name=lsp-international-population-limit7]').parent().hide();
}
if((jQuery('select[name=lsp-set-type7]').val()=='international') || (jQuery('select[name=lsp-set-type7]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type7]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type7]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states7]').parent().show();
  jQuery('input[name=lsp-exclude-countries7]').parent().show();
  jQuery('input[name=lsp-add-countries7]').parent().show();
  jQuery('input[name=lsp-national-population-limit7]').parent().show();
  jQuery('input[name=lsp-international-population-limit7]').parent().show();
}
jQuery('select[name=lsp-set-type7]').change(function(){
  if((jQuery('select[name=lsp-set-type7]').val()=='local') || (jQuery('select[name=lsp-set-type7]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states7]').parent().hide();
    jQuery('input[name=lsp-exclude-countries7]').parent().hide();
    jQuery('input[name=lsp-add-countries7]').parent().hide();
    jQuery('input[name=lsp-national-population-limit7]').parent().hide();
    jQuery('input[name=lsp-international-population-limit7]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type7]').val()=='national') || (jQuery('select[name=lsp-set-type7]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type7]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states7]').parent().show();
    jQuery('input[name=lsp-exclude-countries7]').parent().hide();
    jQuery('input[name=lsp-add-countries7]').parent().hide();
    jQuery('input[name=lsp-national-population-limit7]').parent().show();
    jQuery('input[name=lsp-international-population-limit7]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type7]').val()=='international') || (jQuery('select[name=lsp-set-type7]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type7]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type7]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states7]').parent().show();
    jQuery('input[name=lsp-exclude-countries7]').parent().show();
    jQuery('input[name=lsp-add-countries7]').parent().show();
    jQuery('input[name=lsp-national-population-limit7]').parent().show();
    jQuery('input[name=lsp-international-population-limit7]').parent().show();
  }
});


if((jQuery('select[name=lsp-set-type8]').val()=='local') || (jQuery('select[name=lsp-set-type8]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states8]').parent().hide();
  jQuery('input[name=lsp-exclude-countries8]').parent().hide();
  jQuery('input[name=lsp-add-countries8]').parent().hide();
  jQuery('input[name=lsp-national-population-limit8]').parent().hide();
  jQuery('input[name=lsp-international-population-limit8]').parent().hide();
}
if((jQuery('select[name=lsp-set-type8]').val()=='national') || (jQuery('select[name=lsp-set-type8]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type8]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states8]').parent().show();
  jQuery('input[name=lsp-exclude-countries8]').parent().hide();
  jQuery('input[name=lsp-add-countries8]').parent().hide();
  jQuery('input[name=lsp-national-population-limit8]').parent().show();
  jQuery('input[name=lsp-international-population-limit8]').parent().hide();
}
if((jQuery('select[name=lsp-set-type8]').val()=='international') || (jQuery('select[name=lsp-set-type8]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type8]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type8]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states8]').parent().show();
  jQuery('input[name=lsp-exclude-countries8]').parent().show();
  jQuery('input[name=lsp-add-countries8]').parent().show();
  jQuery('input[name=lsp-national-population-limit8]').parent().show();
  jQuery('input[name=lsp-international-population-limit8]').parent().show();
}
jQuery('select[name=lsp-set-type8]').change(function(){
  if((jQuery('select[name=lsp-set-type8]').val()=='local') || (jQuery('select[name=lsp-set-type8]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states8]').parent().hide();
    jQuery('input[name=lsp-exclude-countries8]').parent().hide();
    jQuery('input[name=lsp-add-countries8]').parent().hide();
    jQuery('input[name=lsp-national-population-limit8]').parent().hide();
    jQuery('input[name=lsp-international-population-limit8]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type8]').val()=='national') || (jQuery('select[name=lsp-set-type8]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type8]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states8]').parent().show();
    jQuery('input[name=lsp-exclude-countries8]').parent().hide();
    jQuery('input[name=lsp-add-countries8]').parent().hide();
    jQuery('input[name=lsp-national-population-limit8]').parent().show();
    jQuery('input[name=lsp-international-population-limit8]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type8]').val()=='international') || (jQuery('select[name=lsp-set-type8]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type8]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type8]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states8]').parent().show();
    jQuery('input[name=lsp-exclude-countries8]').parent().show();
    jQuery('input[name=lsp-add-countries8]').parent().show();
    jQuery('input[name=lsp-national-population-limit8]').parent().show();
    jQuery('input[name=lsp-international-population-limit8]').parent().show();
  }
});



if((jQuery('select[name=lsp-set-type9]').val()=='local') || (jQuery('select[name=lsp-set-type9]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states9]').parent().hide();
  jQuery('input[name=lsp-exclude-countries9]').parent().hide();
  jQuery('input[name=lsp-add-countries9]').parent().hide();
  jQuery('input[name=lsp-national-population-limit9]').parent().hide();
  jQuery('input[name=lsp-international-population-limit9]').parent().hide();
}
if((jQuery('select[name=lsp-set-type9]').val()=='national') || (jQuery('select[name=lsp-set-type9]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type9]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states9]').parent().show();
  jQuery('input[name=lsp-exclude-countries9]').parent().hide();
  jQuery('input[name=lsp-add-countries9]').parent().hide();
  jQuery('input[name=lsp-national-population-limit9]').parent().show();
  jQuery('input[name=lsp-international-population-limit9]').parent().hide();
}
if((jQuery('select[name=lsp-set-type9]').val()=='international') || (jQuery('select[name=lsp-set-type9]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type9]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type9]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states9]').parent().show();
  jQuery('input[name=lsp-exclude-countries9]').parent().show();
  jQuery('input[name=lsp-add-countries9]').parent().show();
  jQuery('input[name=lsp-national-population-limit9]').parent().show();
  jQuery('input[name=lsp-international-population-limit9]').parent().show();
}
jQuery('select[name=lsp-set-type9]').change(function(){
  if((jQuery('select[name=lsp-set-type9]').val()=='local') || (jQuery('select[name=lsp-set-type9]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states9]').parent().hide();
    jQuery('input[name=lsp-exclude-countries9]').parent().hide();
    jQuery('input[name=lsp-add-countries9]').parent().hide();
    jQuery('input[name=lsp-national-population-limit9]').parent().hide();
    jQuery('input[name=lsp-international-population-limit9]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type9]').val()=='national') || (jQuery('select[name=lsp-set-type9]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type9]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states9]').parent().show();
    jQuery('input[name=lsp-exclude-countries9]').parent().hide();
    jQuery('input[name=lsp-add-countries9]').parent().hide();
    jQuery('input[name=lsp-national-population-limit9]').parent().show();
    jQuery('input[name=lsp-international-population-limit9]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type9]').val()=='international') || (jQuery('select[name=lsp-set-type9]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type9]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type9]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states9]').parent().show();
    jQuery('input[name=lsp-exclude-countries9]').parent().show();
    jQuery('input[name=lsp-add-countries9]').parent().show();
    jQuery('input[name=lsp-national-population-limit9]').parent().show();
    jQuery('input[name=lsp-international-population-limit9]').parent().show();
  }
});



if((jQuery('select[name=lsp-set-type10]').val()=='local') || (jQuery('select[name=lsp-set-type10]').val()=='localCities')){
  jQuery('input[name=lsp-exclude-states10]').parent().hide();
  jQuery('input[name=lsp-exclude-countries10]').parent().hide();
  jQuery('input[name=lsp-add-countries10]').parent().hide();
  jQuery('input[name=lsp-national-population-limit10]').parent().hide();
  jQuery('input[name=lsp-international-population-limit10]').parent().hide();
}
if((jQuery('select[name=lsp-set-type10]').val()=='national') || (jQuery('select[name=lsp-set-type10]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type10]').val()=='nationalCities')){
  jQuery('input[name=lsp-exclude-states10]').parent().show();
  jQuery('input[name=lsp-exclude-countries10]').parent().hide();
  jQuery('input[name=lsp-add-countries10]').parent().hide();
  jQuery('input[name=lsp-national-population-limit10]').parent().show();
  jQuery('input[name=lsp-international-population-limit10]').parent().hide();
}
if((jQuery('select[name=lsp-set-type10]').val()=='international') || (jQuery('select[name=lsp-set-type10]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type10]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type10]').val()=='internationalCities')){
  jQuery('input[name=lsp-exclude-states10]').parent().show();
  jQuery('input[name=lsp-exclude-countries10]').parent().show();
  jQuery('input[name=lsp-add-countries10]').parent().show();
  jQuery('input[name=lsp-national-population-limit10]').parent().show();
  jQuery('input[name=lsp-international-population-limit10]').parent().show();
}
jQuery('select[name=lsp-set-type10]').change(function(){
  if((jQuery('select[name=lsp-set-type10]').val()=='local') || (jQuery('select[name=lsp-set-type10]').val()=='localCities')){
    jQuery('input[name=lsp-exclude-states10]').parent().hide();
    jQuery('input[name=lsp-exclude-countries10]').parent().hide();
    jQuery('input[name=lsp-add-countries10]').parent().hide();
    jQuery('input[name=lsp-national-population-limit10]').parent().hide();
    jQuery('input[name=lsp-international-population-limit10]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type10]').val()=='national') || (jQuery('select[name=lsp-set-type10]').val()=='nationalStates') || (jQuery('select[name=lsp-set-type10]').val()=='nationalCities')){
    jQuery('input[name=lsp-exclude-states10]').parent().show();
    jQuery('input[name=lsp-exclude-countries10]').parent().hide();
    jQuery('input[name=lsp-add-countries10]').parent().hide();
    jQuery('input[name=lsp-national-population-limit10]').parent().show();
    jQuery('input[name=lsp-international-population-limit10]').parent().hide();
  }
  if((jQuery('select[name=lsp-set-type10]').val()=='international') || (jQuery('select[name=lsp-set-type10]').val()=='internationalCountries') || (jQuery('select[name=lsp-set-type10]').val()=='internationalStates') || (jQuery('select[name=lsp-set-type10]').val()=='internationalCities')){
    jQuery('input[name=lsp-exclude-states10]').parent().show();
    jQuery('input[name=lsp-exclude-countries10]').parent().show();
    jQuery('input[name=lsp-add-countries10]').parent().show();
    jQuery('input[name=lsp-national-population-limit10]').parent().show();
    jQuery('input[name=lsp-international-population-limit10]').parent().show();
  }
});





jQuery('.pform').hide();
jQuery('#pformapi').show();

jQuery('#portfolioapilink').click(function(){
  jQuery('.pform').hide();
  jQuery('#pformapi').show();
});

jQuery('#portfolio1link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform1').show();
});
jQuery('#portfolio2link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform2').show();
});
jQuery('#portfolio3link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform3').show();
});
jQuery('#portfolio4link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform4').show();
});
jQuery('#portfolio5link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform5').show();
});
jQuery('#portfolio6link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform6').show();
});
jQuery('#portfolio7link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform7').show();
});
jQuery('#portfolio8link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform8').show();
});
jQuery('#portfolio9link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform9').show();
});
jQuery('#portfolio10link').click(function(){
  jQuery('.pform').hide();
  jQuery('#pform10').show();
});


</script>

  <hr />

	<p class="submit">
	<input type="submit" name="Submit" class="button-primary" value="<?php esc_attr_e('Save Settings', 'lsp_text_domain') ?>" />
	</p>

	</form>
	</div>


<script type="text/javascript">

//jQuery('#menu-posts-localproject a:nth-child(3)').hide();

jQuery('#menu-posts-localproject li:nth-child(5)').removeClass('current');
jQuery('#menu-posts-localproject li:nth-child(6)').removeClass('current');
jQuery('#menu-posts-localproject li:nth-child(7)').removeClass('current');
//jQuery(' .wp-submenu li:nth-child(5) a')

jQuery('#menu-posts-localproject li:nth-child(5) a').attr('href','http://www.instawowlocalseo.com/#comparison');
jQuery('#menu-posts-localproject li:nth-child(6) a').attr('href','http://www.instawowlocalseo.com/?page_id=83');
jQuery('#menu-posts-localproject li:nth-child(7) a').attr('href','http://www.instawowlocalseo.com/?page_id=146');

jQuery('#menu-posts-localproject li:nth-child(5) a').attr('target','_blank');
jQuery('#menu-posts-localproject li:nth-child(6) a').attr('target','_blank');
jQuery('#menu-posts-localproject li:nth-child(7) a').attr('target','_blank');

</script>


	<?php
}



function lsp_tutorial() {
 // echo "<h2>Tutorial Page Placeholder</h2>";
}

function lsp_premium() {
  //wp_redirect('http://www.instawowlocalseo.com.php53-24.ord1-1.websitetestlink.com',302); exit;
}


add_action('admin_menu' , 'lsp_cpt_settings_menu'); 
function lsp_cpt_settings_menu() {
    add_submenu_page('edit.php?post_type=localproject', __('Settings / Setup','lsp_text_domain'), __('Settings / Setup','lsp_text_domain'), 'edit_posts', basename(__FILE__), 'lsp_options');
}

add_action('admin_menu' , 'lsp_upgrade_to_premium'); 
function lsp_upgrade_to_premium() {
    add_submenu_page('edit.php?post_type=localproject', __('Upgrade to Premium','lsp_text_domain'), __('Upgrade to Premium','lsp_text_domain'), 'edit_posts', basename(__FILE__), 'lsp_premium');
}

add_action('admin_menu' , 'lsp_pro_tips_menu'); 
function lsp_pro_tips_menu() {
    add_submenu_page('edit.php?post_type=localproject', __('Pro Tips','lsp_text_domain'), __('Pro Tips','lsp_text_domain'), 'edit_posts', basename(__FILE__), 'lsp_pro_tips');
}

add_action('admin_menu' , 'lsp_tutorial_menu'); 
function lsp_tutorial_menu() {
    add_submenu_page('edit.php?post_type=localproject', __('Tutorial','lsp_text_domain'), __('Tutorial','lsp_text_domain'), 'edit_posts', basename(__FILE__), 'lsp_tutorial');
}

function lsp_pro_tips(){

}

function lsp_activate() {
  add_option( 'Activated_Plugin', 'localseoportfolio' );
  global $wpdb;
  global $title_string;
  update_option('lsp-title-string',$title_string);
  if(get_option('lsp-title-string')){
    if(get_option('lsp-national-population-limit')=="") update_option('lsp-national-population-limit',10000);
    if(get_option('lsp-international-population-limit')=="") update_option('lsp-international-population-limit',100000);
    if(get_option('lsp-national-population-limit2')=="") update_option('lsp-national-population-limit2',10000);
    if(get_option('lsp-international-population-limit2')=="") update_option('lsp-international-population-limit2',100000);
    if(get_option('lsp-national-population-limit3')=="") update_option('lsp-national-population-limit3',10000);
    if(get_option('lsp-international-population-limit3')=="") update_option('lsp-international-population-limit3',100000);
    if(get_option('lsp-national-population-limit4')=="") update_option('lsp-national-population-limit4',10000);
    if(get_option('lsp-international-population-limit4')=="") update_option('lsp-international-population-limit4',100000);
    if(get_option('lsp-national-population-limit5')=="") update_option('lsp-national-population-limit5',10000);
    if(get_option('lsp-international-population-limit5')=="") update_option('lsp-international-population-limit5',100000);
    if(get_option('lsp-national-population-limit6')=="") update_option('lsp-national-population-limit6',10000);
    if(get_option('lsp-international-population-limit6')=="") update_option('lsp-international-population-limit6',100000);
    if(get_option('lsp-national-population-limit7')=="") update_option('lsp-national-population-limit7',10000);
    if(get_option('lsp-international-population-limit7')=="") update_option('lsp-international-population-limit7',100000);
    if(get_option('lsp-national-population-limit8')=="") update_option('lsp-national-population-limit8',10000);
    if(get_option('lsp-international-population-limit8')=="") update_option('lsp-international-population-limit8',100000);
    if(get_option('lsp-national-population-limit9')=="") update_option('lsp-national-population-limit9',10000);
    if(get_option('lsp-international-population-limit9')=="") update_option('lsp-international-population-limit9',100000);
    if(get_option('lsp-national-population-limit10')=="") update_option('lsp-national-population-limit10',10000);
    if(get_option('lsp-international-population-limit10')=="") update_option('lsp-international-population-limit10',100000);
  }
global $wpdb;
  $myrow = $wpdb->get_row("SELECT * FROM ".$wpdb->prefix."posts WHERE post_title = '" . $title_string . "' AND post_status = 'publish'", 'ARRAY_A');
  if($myrow['ID']){
    update_option('lsp-ptemplate-id',$myrow['ID']);
  }else{
    $post = array(
      'post_content'   => '', // The full text of the post.
      'post_name'      => substr(str_shuffle(MD5(microtime())), 0, 10), // The name (slug) for your post
      'post_title'     => $title_string, // The title of your post.
      'post_status'    => 'publish',
      'post_type'      => 'page', 
      'comment_status' => 'closed',
      //'post_content_filtered' => // Skip this and let Wordpress handle it, usually.
      'page_template'  => 'page.php' // Requires name of template file, eg template.php. Default empty.
    );
  // This was tested but did not work    remove_action( 'transition_post_status',     '_wp_auto_add_pages_to_menu', 8);
    $new_lsp_ptemplate_id = wp_insert_post( $post );
    update_option('lsp-ptemplate-id',$new_lsp_ptemplate_id);  
//    $wpdb->query($wpdb->prepare("UPDATE $wpdb->posts SET post_type = 'page' WHERE ID = %d", get_option('lsp-ptemplate-id')));
//    add_action( 'transition_post_status',     '_wp_auto_add_pages_to_menu', 10, 3 );
  }
  flush_rewrite_rules();
  global $wp_rewrite;
  $wp_rewrite->flush_rules();



//  wp_redirect("edit.php?post_type=localproject&page=localseoportfolio.php");
}
register_activation_hook( __FILE__, 'lsp_activate' );


function load_plugin() {


    if ( is_admin() && get_option( 'Activated_Plugin' ) == 'localseoportfolio' ) {

        delete_option( 'Activated_Plugin' );

          if(!isset($_GET['activate-multi'])){
          wp_redirect("edit.php?post_type=localproject&page=localseoportfolio.php");
    exit;
  }
    }
}
add_action( 'admin_init', 'load_plugin' );


add_action( 'init', 'local_seo_register_post_type' );
function local_seo_register_post_type() {






  $portfolioson = false;
  if (get_option('lsp-enable-categories')=="yes"){
    $portfolioson = true;
  }
    $portfolioson = false;





  $labels = array(
    "name" => __("Services","lsp_text_domain"),
    "label" => __("Services Used","lsp_text_domain"),
    "menu_name" => __("Services Used","lsp_text_domain"),
    "all_items" => __("All Services Used","lsp_text_domain"),
    "edit_item" => __("Edit Service Used","lsp_text_domain"),
    "view_item" => __("View Service Used","lsp_text_domain"),
    "update_item" => __("Update Service Used","lsp_text_domain"),
    "add_new_item" => __("Add New Services","lsp_text_domain"),
    "new_item_name" => __("New Service","lsp_text_domain"),
    "parent_item" => __("Parent Service","lsp_text_domain"),
    "parent_item_colon" => __("Parent Service:","lsp_text_domain"),
    "search_items" => __("Search Services","lsp_text_domain"),
    "popular_items" => __("Popular Services","lsp_text_domain"),
    "separate_items_with_commas" => __("Please Separate Services Used with Commas","lsp_text_domain"),
    "add_or_remove_items" => __("Add or remove services","lsp_text_domain"),
    "choose_from_most_used" => __("Choose from the most used services","lsp_text_domain"),
    "not_found" => __("No services found","lsp_text_domain"),
    );

  $args = array(
    "labels" => $labels,
    "hierarchical" => false,
    "label" => __("Services","lsp_text_domain"),
    "show_ui" => true,
    "public" => $portfolioson,
    "query_var" => "servicesportfolio",
    "show_admin_column" => false,
    "rewrite" => array('slug' =>'localportfolio/servicesportfolio', 'with_front' => false)
  );
  register_taxonomy( "servicesportfolio", "localproject", $args );






  $labels = array(
    "name" => __("Industry / Industries","lsp_text_domain"),
    "label" => __("Industries","lsp_text_domain"),
    "menu_name" => __("Industries","lsp_text_domain"),
    "all_items" => __("All Industries","lsp_text_domain"),
    "edit_item" => __("Edit Industry","lsp_text_domain"),
    "view_item" => __("View Industry","lsp_text_domain"),
    "update_item" => __("Update Industry","lsp_text_domain"),
    "add_new_item" => __("Add New Industry","lsp_text_domain"),
    "new_item_name" => __("New Industry","lsp_text_domain"),
    "parent_item" => __("Parent Industry","lsp_text_domain"),
    "parent_item_colon" => __("Parent Industry:","lsp_text_domain"),
    "search_items" => __("Search Industries","lsp_text_domain"),
    "popular_items" => __("Popular Industries","lsp_text_domain"),
    "separate_items_with_commas" => __("Please Separate Items with Commas","lsp_text_domain"),
    "add_or_remove_items" => __("Add or remove industries","lsp_text_domain"),
    "choose_from_most_used" => __("Choose from the most used industries","lsp_text_domain"),
    "not_found" => __("No industries found","lsp_text_domain"),
    );

  $args = array(
    "labels" => $labels,
    "hierarchical" => false,
    "label" => __("Industries","lsp_text_domain"),
    "show_ui" => true,
    "public" => $portfolioson,
    "query_var" => "industriesportfolio",
    "show_admin_column" => false,
    "rewrite" => array('slug' =>'localportfolio/industriesportfolio', 'with_front' => false)
  );
  register_taxonomy( "industriesportfolio", "localproject", $args );






$catholder = true;
if(get_option('lsp-enable-categories')!="yes") $catholder = false;

$archiveholder = false;
if(get_option('lsp-preview-urls')=="yes") $archiveholder = true;


  $labels = array(
    "name" => __("InstaWow Local SEO","lsp_text_domain"),
    "singular_name" => __("Project / Client","lsp_text_domain"),
    "menu_name" => __("InstawowLocalSEO","lsp_text_domain"),
    "all_items" => __("All Projects / Clients","lsp_text_domain"),
    "add_new" => __("Add a Project / Client","lsp_text_domain"),
    "add_new_item" => __("Add New Project / Client","lsp_text_domain"),
    "edit" => __("Edit","lsp_text_domain"),
    "edit_item" => __("Edit Project / Client","lsp_text_domain"),
    "new_item" => __("New Project / Client","lsp_text_domain"),
    "view" => __("View","lsp_text_domain"),
    "view_item" => __("View Project / Client","lsp_text_domain"),
    "search_items" => __("Search Projects / Clients","lsp_text_domain"),
    "not_found" => __("No Projects / Clients","lsp_text_domain"),
    "not_found_in_trash" => __("No Projects / Clients Items Found in Trash","lsp_text_domain"),
    "parent" => __("Parent Project / Client","lsp_text_domain"),
    );

  $args = array(
    "labels" => $labels,
    "description" => __("Add your projects / clients here","lsp_text_domain"),
    "public" => $archiveholder,

    "show_ui" => true,
    "has_archive" => $catholder,
    "show_in_menu" => true,
    "menu_position" => 3,
    "exclude_from_search" => false,
    "capability_type" => "post",
    "map_meta_cap" => true,
    "hierarchical" => false,
    "publicly_queryable" => $archiveholder,
    "rewrite" => array( "slug" => "localportfolio", "with_front" => true ),
    "query_var" => $archiveholder,
                  );
  register_post_type( "localproject", $args );











}


add_action('admin_init','lsp_meta_box');
function lsp_meta_box(){
  add_meta_box('lsp_meta_box_details', __('Project / Client Details','lsp_text_domain'),'lsp_meta_box_details_display','localproject','normal','high');
}

function lsp_meta_box_details_display($localproject){
  $lsp_post_city = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_city',true) ));
  $lsp_post_state = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_state',true) ));
  $lsp_post_country = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_country',true) ));
  $lsp_post_tags = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_tags',true) ));
  $lsp_post_industry = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_industry',true) ));
  $lsp_post_client_name = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_client_name',true) ));
  $lsp_post_testimonial = esc_html(get_post_meta($localproject->ID,'lsp_post_testimonial',true) );
  $lsp_post_client_website = esc_html(get_post_meta($localproject->ID,'lsp_post_client_website',true) );
  $lsp_post_client_phone = ucwords(esc_html(get_post_meta($localproject->ID,'lsp_post_client_phone',true) ));

  ?>

  <table>
    <tr>
      <td style="width:100%"><?php _e("City","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_city" value='<?php echo $lsp_post_city;?>' /></td>
    </tr>
    <tr>
      <td style="width:100%"><?php _e("State / Province (full state name)","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_state" value='<?php echo $lsp_post_state;?>' /></td>
    </tr>
    <!--
    <tr>
      <td style="width:100%">Country:</td><td>
      <input type='text' size='80' name="lsp_post_country" value='<?php echo $lsp_post_country;?>' /></td>
    </tr>
    <tr>
      <td style="width:100%"><?php _e("Services Used (Please separate with commas if multiple)","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_tags" value='<?php echo $lsp_post_tags;?>' /></td>
    </tr>
    <tr>
      <td style="width:100%"><?php _e("Their Industry / Industries (Please separate with commas if multiple)","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_industry" value='<?php echo $lsp_post_industry;?>' /></td>
    </tr>
    <tr> -->
      <td style="width:100%"><?php _e("Client Name","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_client_name" value='<?php echo $lsp_post_client_name;?>' /></td>
    </tr>
    <tr>
      <td style="width:100%"><?php _e("Their Testimonial","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_testimonial" value='<?php echo $lsp_post_testimonial;?>' /></td>
    </tr>
    <tr>
      <td style="width:100%"><?php _e("Their Phone Number","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_client_phone" value='<?php echo $lsp_post_client_phone;?>' /></td>
    </tr>
    <tr>
      <td style="width:100%"><?php _e("Their Website / Social Media URL","lsp_text_domain");?>:</td><td>
      <input type='text' size='80' name="lsp_post_client_website" value='<?php echo $lsp_post_client_website;?>' /></td>
    </tr>
  </table>


   <link rel="stylesheet" href="//code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css">
  <script src="//code.jquery.com/jquery-1.10.2.js"></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>

<?php
  if($_GET['post_type']=="localproject"):  
?>
<script>
jQuery('#title-prompt-text').before("<?php _e('Client Name / Project Title','lsp_text_domain');?>:<br>");


jQuery('#title').blur(function(){
  if(jQuery('input[name=lsp_post_client_name]').val()=="")jQuery('input[name=lsp_post_client_name]').val(  jQuery('#title').val()  );
});
</script>

<?php
  endif;
?>

<script type="text/javascript">
jQuery(document).ready(function(){
jQuery(function() {
  function log( message ) {
    jQuery( "<div>" ).text( message ).prependTo( "#log" );
    jQuery( "#log" ).scrollTop( 0 );
  }
  jQuery( "[name=lsp_post_city]" ).autocomplete({
    source: function( request, response ) {
      jQuery.ajax({
       // url: "http://gd.geobytes.com/AutoCompleteCity",
        url: 'http://www.instawowlocalseo.com/index3.php?lang='+'<?php echo urlencode(substr(get_bloginfo('language'),0,2));?>'+'&request=ajaxcities',

        
        dataType: "jsonp",
        data: {
          q: request.term
        },
        success: function( data ) {
          response( data );
        }
      });
    },
    minLength: 1,
    select: function( event, ui ) {
      event.preventDefault();
      log( ui.item ?
        "Selected: " + ui.item.label + 'howdy' :
        "Nothing selected, input was " + this.value);
        var holder = ui.item.label;
        var exploded = holder.split(",");
        jQuery( "[name=lsp_post_city]" ).val(exploded[0].trim());
        jQuery( "[name=lsp_post_state]" ).val(exploded[1].trim());    
    },
    open: function() {
      jQuery( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
    },
    close: function() {
      jQuery( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
    }
  });
});

});

  </script>



  
  <script type="text/javascript">
  jQuery(document).ready(function(){
    jQuery('#lsp_meta_box_details .ui-sortable-handle').click();
    jQuery('#titlediv .inside').hide();
    jQuery('#lsp_meta_box_details .inside').show();
   // jQuery('#wpseo_meta').hide();
  });
  </script>
  <?php
}


add_action('save_post','lsp_post_fields_save', 10, 2);
function lsp_post_fields_save($post_id = false,$post = false){

    //echo "THE HOOK IS RUNNING";
//  die();
    $thispost = get_post($post_id);
    $termsstring = "";
    $service_terms = wp_get_object_terms($thispost->ID,'servicesportfolio');
    if ( ! empty($service_terms)){  
         // echo "got stuff";
        //  print_r($service_terms);
      if (!is_wp_error($service_terms)){
       // echo "still going";
        $termcounter = 0;
        foreach ($service_terms as $term){
          $termcounter ++;
          if ($termcounter > 1) $termsstring.=",";
          $termsstring .= ucwords($term->name);
        }
      }
    }
//  echo $termsstring;
    update_post_meta($post_id,'lsp_post_tags',$termsstring);

//die();
    $termsstring = "";
    $industry_terms = wp_get_object_terms($thispost->ID,'industriesportfolio');
    if ( ! empty($industry_terms)){
      if (!is_wp_error($industry_terms)){
        $termcounter = 0;
        foreach ($industry_terms as $term){
          $termcounter ++;
          if ($termcounter > 1) $termsstring.=",";
          $termsstring .= ucwords($term->name);
        }
      }
    }
    update_post_meta($post_id,'lsp_post_industry',$termsstring);




  if($post->post_type == 'localproject'){
    if(isset($_POST['lsp_post_city']) && $_POST['lsp_post_city'] != ''){
      update_post_meta($post_id,'lsp_post_city',$_POST['lsp_post_city']);
    }
    if(isset($_POST['lsp_post_state']) && $_POST['lsp_post_state'] != ''){
      update_post_meta($post_id,'lsp_post_state',$_POST['lsp_post_state']);
    }
    if(isset($_POST['lsp_post_country']) && $_POST['lsp_post_country'] != ''){
      update_post_meta($post_id,'lsp_post_country',$_POST['lsp_post_country']);
    }
    if(isset($_POST['lsp_post_tags']) && $_POST['lsp_post_tags'] != ''){
   //   update_post_meta($post_id,'lsp_post_tags',$_POST['lsp_post_tags']);
  //    wp_set_object_terms($post_id,$_POST['lsp_post_tags'],"servicesportfolio",false);
    }
    if(isset($_POST['lsp_post_industry']) && $_POST['lsp_post_industry'] != ''){
     // update_post_meta($post_id,'lsp_post_industry',$_POST['lsp_post_industry']);
    //  wp_set_object_terms($post_id,$_POST['lsp_post_industry'],"industriesportfolio",false);
    }





    if(isset($_POST['lsp_post_client_name']) && $_POST['lsp_post_client_name'] != ''){
      update_post_meta($post_id,'lsp_post_client_name',$_POST['lsp_post_client_name']);
    }
    if(isset($_POST['lsp_post_testimonial']) && $_POST['lsp_post_testimonial'] != ''){
      update_post_meta($post_id,'lsp_post_testimonial',$_POST['lsp_post_testimonial']);
    }
    if(isset($_POST['lsp_post_client_website']) && $_POST['lsp_post_client_website'] != ''){
      update_post_meta($post_id,'lsp_post_client_website',$_POST['lsp_post_client_website']);
    }
    if(isset($_POST['lsp_post_client_phone']) && $_POST['lsp_post_testimonial_client_phone'] != ''){
      update_post_meta($post_id,'lsp_post_testimonial_client_phone',$_POST['lsp_post_testimonial_client_phone']);
    }
    if(isset($_POST['lsp_post_city']) && ($_POST['lsp_post_city'] != '') && isset($_POST['lsp_post_state']) && ($_POST['lsp_post_state'] != '')){
      $myKey = get_option('lsp-api-key');
      $country = "US";
      $latitude = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($_POST['lsp_post_city']).'&state='.urlencode($_POST['lsp_post_state']).'&request=latitude');
      $longitude = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($_POST['lsp_post_city']).'&state='.urlencode($_POST['lsp_post_state']).'&request=longitude');
      $country = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($_POST['lsp_post_city']).'&state='.urlencode($_POST['lsp_post_state']).'&request=country');
      update_post_meta($post_id,'lsp_post_latitude',$latitude);
      update_post_meta($post_id,'lsp_post_longitude',$longitude);
      update_post_meta($post_id,'lsp_post_country',$country);
    }
    // done: Add in Geocoding of Posts Here
  }
}












/*
// 2 - CREATE THE POST TYPE(s)?
 // City
 // State
 // Country
 // Tags
 // Industry
//	Job Description & Gallery
 // Client First & Last Name
//	Testimonial Text
//  Client Picture?

  Employee Post?
  Location Post? -  Address

// 1 - Finish Options Page List
// 1 - CREATE THE PAGE FOR THE TEMPLATE
// 2 - CREATE THE REWRITE RULES
Just one rewrite rule in for now

// 2 - CREATE THE CITIES DB (just for the mopdog internal version)
// 1 - GEOCODE HOOK ON POST TO GEOCODE THE POST

update_post_meta($id,'latitutde',$latitude);
update_post_meta($id,'longitude',$longitude);
// 6 - CREATE THE DYNAMIC TITLE / PAGE CONTENT

instawowlocalseo.com

// figure out keywords


https://codex.wordpress.org/Function_Reference/register_post_type#Flushing_Rewrite_on_Activation

*/
function get_localportfolio_content($keyPhrase, $city,$state,$country){

  flush_rewrite_rules();
  global $wp_rewrite;
  $wp_rewrite->flush_rules();

  //$keyPhrase = str_replace('-',' ',$args[1]);

//  $keyPhrase = str_replace('-',' ',"Web-Design");

  $city = str_replace("-"," ",$city);
  $state = str_replace("-"," ",$state);
  $returnStr = '';


// $returnStr = 'HOWDY';
 //return $returnStr;

//  $returnStr .= $_SERVER["REQUEST_URI"];
//  $returnStr .= "Here starts the unique content for each page";
  // figure out referenced keyphrase
  if((get_option('lsp-keyphrase') == $keyPhrase) || (get_option('lsp-keyphrase-override') == $keyPhrase)) $phraseNumber = 1;
  if((get_option('lsp-keyphrase2') == $keyPhrase) || (get_option('lsp-keyphrase-override2') == $keyPhrase)) $phraseNumber = 2;
  if((get_option('lsp-keyphrase3') == $keyPhrase) || (get_option('lsp-keyphrase-override3') == $keyPhrase)) $phraseNumber = 3;
  if((get_option('lsp-keyphrase4') == $keyPhrase) || (get_option('lsp-keyphrase-override4') == $keyPhrase)) $phraseNumber = 4;
  if((get_option('lsp-keyphrase5') == $keyPhrase) || (get_option('lsp-keyphrase-override5') == $keyPhrase)) $phraseNumber = 5;
  if((get_option('lsp-keyphrase6') == $keyPhrase) || (get_option('lsp-keyphrase-override6') == $keyPhrase)) $phraseNumber = 6;
  if((get_option('lsp-keyphrase7') == $keyPhrase) || (get_option('lsp-keyphrase-override7') == $keyPhrase)) $phraseNumber = 7;
  if((get_option('lsp-keyphrase8') == $keyPhrase) || (get_option('lsp-keyphrase-override8') == $keyPhrase)) $phraseNumber = 8;
  if((get_option('lsp-keyphrase9') == $keyPhrase) || (get_option('lsp-keyphrase-override9') == $keyPhrase)) $phraseNumber = 9;
  if((get_option('lsp-keyphrase10') == $keyPhrase) || (get_option('lsp-keyphrase-override10') == $keyPhrase)) $phraseNumber = 10;

//  $thisCityLatitude = curlfallback("http://www.instawowlocalseo.com/". '?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$city.'&state='.$state.'&request=latitude');
//  $thisCityLongitude = curlfallback("http://www.instawowlocalseo.com/". '?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$city.'&state='.$state.'&request=longitude');

  global $wpdb;
//  $postids = $wpdb->get_results("SELECT * FROM ".$wpdb->prefix."posts WHERE post_type = 'localproject' AND post_status = 'publish'");

//  echo $phraseNumber;

  $rangerLat = "";
  $rangerLong = "";
  $rangerRadius = "";

  if($phraseNumber==1)$rangerLat = get_option('lsp-latitude');
  if($phraseNumber==1)$rangerLong = get_option('lsp-longitude');
  if($phraseNumber==1)$rangerRadius = get_option('lsp-how-far');

  if($phraseNumber>1)$rangerLat = get_option('lsp-latitude'.$phraseNumber);
  if($phraseNumber>1)$rangerLong = get_option('lsp-longitude'.$phraseNumber);
  if($phraseNumber>1)$rangerRadius = get_option('lsp-how-far'.$phraseNumber);

  if($rangerRadius == "auto") $rangerRadius= 500;

//  $country = "US";
  $myKey = "key";

  $myKey = get_option('lsp-api-key');

//  echo "http://www.instawowlocalseo.com/".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($city).'&state='.urlencode($state).'&country='.$country.'&request=latitude';
//  echo "<br><br>"."http://www.instawowlocalseo.com/".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($city).'&state='.urlencode($state).'&country='.$country.'&request=longitude';

  $rangerLat= curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($city).'&state='.urlencode($state).'&country='.$country.'&request=latitude');
  $rangerLong = curlfallback("http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($city).'&state='.urlencode($state).'&country='.$country.'&request=longitude');


//echo "http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($city).'&state='.urlencode($state).'&country='.$country.'&request=latitude';
//echo "http://www.instawowlocalseo.com/index3.php".'?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.urlencode($city).'&state='.urlencode($state).'&country='.$country.'&request=longitude';

//echo $rangerRadius;



global $wpdb;
  $queryStart = "SELECT a.ID FROM ".$wpdb->prefix."posts a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE post_type = 'localproject' AND post_status = 'publish' AND 
  a.ID = b.post_id AND a.ID = c.post_id  AND a.ID = d.post_ID";
//  if(get_option('lsp-show-all-projects')!="yes") $queryStart .= " AND d.meta_value LIKE '%%%s%%' ";
  $query = $wpdb->prepare("$queryStart AND d.meta_value LIKE '%%%s%%'
  AND b.meta_key = 'lsp_post_latitude'
  AND c.meta_key = 'lsp_post_longitude'
  AND d.meta_key = 'lsp_post_tags'
  AND b.meta_value >= %f 
  AND b.meta_value <= %f 
  AND c.meta_value >= %f 
  AND c.meta_value <= %f", $keyPhrase, ($rangerLat - (0/35)), ($rangerLat + (0/35)), 
  ($rangerLong - (0/35)), ($rangerLat + ($rangerLong/35))
  );
//  echo $query;
//  echo "hello";
  $postids = $wpdb->get_results($query);


  $counter = 0;
  foreach($postids as $postid){
    $counter++;
  }



 //else $result = mysql_query("SELECT * FROM ( SELECT geoname.name as city, admin1CodesAscii.name as state, geoname.population as population, (3959 * acos( cos( radians($latitude) ) * cos( radians( geoname.latitude) ) * cos( radians( geoname.longitude) - radians($longitude) ) +sin(radians($latitude)) * sin(radians(geoname.latitude)) ) ) AS distance FROM geoname, admin1CodesAscii WHERE geoname.admin1 = admin1CodesAscii.regionCode AND geoname.latitude >". ($latitude - $adjustedRadius) ." AND geoname.latitude <". ($latitude + $adjustedRadius) ." AND geoname.longitude >". ($longitude - $adjustedRadius) ." AND geoname.longitude <". ($longitude + $adjustedRadius) ." ORDER BY distance LIMIT 0,".$count. ") as geotable ORDER BY geotable.city");
global $wpdb;
  $queryString = "SELECT a.ID, (3959 * acos( cos( radians($rangerLat) ) * cos( radians( b.meta_value) ) * cos( radians( c.meta_value) - radians($rangerLong) ) +sin(radians($rangerLat)) * sin(radians(b.meta_value)) ) ) AS distance 
    FROM ".$wpdb->prefix."posts a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d 
    WHERE post_type = 'localproject' AND post_status = 'publish' AND 
  a.ID = b.post_id AND a.ID = c.post_id  AND a.ID = d.post_ID";

  if(get_option('lsp-show-all-projects')!="yes") $queryString .= " AND d.meta_value LIKE '%%%s%%' ";
  
  $queryString .= "AND b.meta_key = 'lsp_post_latitude'
  AND c.meta_key = 'lsp_post_longitude'
  AND d.meta_key = 'lsp_post_tags'
  AND b.meta_value >= %f 
  AND b.meta_value <= %f 
  AND c.meta_value >= %f 
  AND c.meta_value <= %f
  ORDER BY distance, RAND()";


//   FROM geoname, admin1CodesAscii WHERE geoname.admin1 = admin1CodesAscii.regionCode  LIMIT 0,".$count. ")
  

  if($rangerRadius=="500" && $counter > 0) $queryString .= " LIMIT 0, $counter";

  if($rangerRadius=="500" && $counter < 1) $queryString .= " LIMIT 0, 3";
 // echo $counter;
 // echo $rangerRadius;
 // echo $queryString;

  if($rangerRadius=="500" && $counter > 0)$query = $wpdb->prepare($queryString, $keyPhrase, ($rangerLat - (0/35)), ($rangerLat + (0/35)), ($rangerLong - (0/35)), ($rangerLat + (0/35)));
  else {
    if($counter==0 && $rangerRadius=="500")$rangerRadius = 1000;
    $query = $wpdb->prepare($queryString, $keyPhrase, ($rangerLat - ($rangerRadius/35)), ($rangerLat + ($rangerRadius/35)), ($rangerLong - ($rangerRadius/35)), ($rangerLong + ($rangerRadius/35)));

  }
//  echo $query;
  $postids = $wpdb->get_results($query);



  if($city=="list" && $state=="all"){
   // echo "HERE IT GOES";
    if($_GET['service']){
    global $wpdb;

    $keyword = $keyPhrase;
$keyword = '%%' . $wpdb->esc_like( $keyword ) . '%%'; 

$postids= $wpdb->get_col( $wpdb->prepare( "
    SELECT DISTINCT post_id FROM {$wpdb->postmeta}
    WHERE meta_key = 'lsp_post_tags' AND meta_value LIKE '%s'
", $keyword ) );
// Search in post_title and post_content

  }


    if($_GET['industry']){
    global $wpdb;

    $keyword = $keyPhrase;
$keyword = '%%' . $wpdb->esc_like( $keyword ) . '%%'; 

$postids= $wpdb->get_col( $wpdb->prepare( "
    SELECT DISTINCT post_id FROM {$wpdb->postmeta}
    WHERE meta_key = 'lsp_post_industry' AND meta_value LIKE '%s'
", $keyword ) );
// Search in post_title and post_content

  }



  }

//  print_r($postids);



  // get post ID's

  // get nearby post ID's
  /*$postids = $wpdb->get_results($wpdb->prepare("SELECT a.ID FROM $wpdb->posts a, $wpdb->post_meta b, $wpdb->post_meta c, $wpdb->post_meta d WHERE post_type = 'localproject' AND post_status = 'publish' AND 
  a.ID = b.post_id AND a.ID = c.post_id  AND a.ID = d.post_ID AND d.meta_value LIKE '%%%s%%%'
  AND b.meta_key = 'latitude".phraseNumber."'
  AND c.meta_key = 'longitude".phraseNumber."'
  AND b.meta_value >= %d 
  AND b.meta_value =< %d 
  AND c.meta_value >= %d 
  AND c.meta_value =< %d", $keyphrase, get_option('minLatitude'.$phraseNumber), get_option('maxLatitude'.$phraseNumber), 
  get_option('minLatitude'.$phraseNumber), get_option('maxLatitude'.$phraseNumber)
  ));*/
  global $wp_query;
//  $returnStr .= "<h1>".$wp_query->query_vars['city'].", ". $wp_query->query_vars['state'] . " ". $keyPhrase. "</h1>";
  if($phraseNumber == 1) $holder_string = get_option('lsp-intro-text')."<br>";
  if($phraseNumber == 2) $holder_string = get_option('lsp-intro-text2')."<br>";
  if($phraseNumber == 3) $holder_string = get_option('lsp-intro-text3')."<br>";
  if($phraseNumber == 4) $holder_string = get_option('lsp-intro-text4')."<br>";
  if($phraseNumber == 5) $holder_string = get_option('lsp-intro-text5')."<br>";
  if($phraseNumber == 6) $holder_string = get_option('lsp-intro-text6')."<br>";
  if($phraseNumber == 7) $holder_string = get_option('lsp-intro-text7')."<br>";
  if($phraseNumber == 8) $holder_string = get_option('lsp-intro-text8')."<br>";
  if($phraseNumber == 9) $holder_string = get_option('lsp-intro-text9')."<br>";
  if($phraseNumber == 10) $holder_string = get_option('lsp-intro-text10')."<br>";

  if($city=="list" && $state == "all"){
    $holder_string = "";
  }

  $holder_string = str_replace("[city]",ucwords($city), $holder_string);
  $holder_string = str_replace("[state]",ucwords($state), $holder_string);
  $holder_string = str_replace("[City]",ucwords($city), $holder_string);
  $holder_string = str_replace("[CITY]",ucwords($city), $holder_string);
  $holder_string = str_replace("[State]",ucwords($state), $holder_string);
  $holder_string = str_replace("[STATE]",ucwords($state), $holder_string);
  $returnStr .= $holder_string;

  if($_POST['personnme'] && $_POST['personemil']){
//    print_r(explode(",",get_option('lsp-email-addresses')));
    wp_mail(explode(",",get_option('lsp-email-addresses')),__('Portfolio Contact Form','lsp_text_domain'),__('Name: ','lsp_text_domain').$_POST['personnme'].__(' Email: ','lsp_text_domain').$_POST['personemil'].__(' Phone: ','lsp_text_domain').$_POST['personphne'].__(' Message: ','lsp_text_domain').$_POST['lspmessage']);
  }
if(get_option('lsp-contact-form')=="yes")$returnStr .= "<center>";
if(get_option('lsp-contact-form')=="yes" && $_POST['personnme'])$returnStr .= "Message sent!";
 if(get_option('lsp-contact-form')=="yes")$returnStr .= "<h4><font color='".get_option('lsp-header-color')."'>".get_option('lsp-form-header')."</font></h4>";
  if(get_option('lsp-contact-form')=="yes")$returnStr .= "<form action='' method='post'>".__('Your Name:','lsp_text_domain')."<input name='personnme' type='text'><br>".__('Your Email:','lsp_text_domain')."<input name='personemil' type='text'><br>".__('Your Phone:','lsp_text_domain')."<input name='personphne' type='text'><br>".__('Message: ','lsp_text_domain')."<br><textarea name='lspmessage' rows='2' cols='50'></textarea><br><input type='submit' value='".__('Send','lsp_text_domain')."'></form></center><br>";

  $postidscounter = 0;
  foreach($postids as $postid){
    $postidscounter++;
    global $post;
  	$post = get_post($postid->ID);
    $thispostid = $postid->ID;
    if(!($postid->ID)){
      $post = get_post($postid);
      $thispostid = $postid;
    } 
    //  $returnStr .= "<h2>".$post->post_title."</h2>";
  	

    if($phraseNumber == 1){
      $headline_option = get_option('lsp-hide-headlines');
      $explodedTags = explode(",",get_post_meta( $thispostid, 'lsp_post_tags', true ));
      $compiledTags = "";
      $tagCounter = 0;
      foreach ($explodedTags as $explodedTag) {
        $tagCounter++;
        if((count($explodedTags) != $tagCounter) && (count($explodedTags) != ($tagCounter-1))){
          if(count($explodedTags) != ($tagCounter+1)) $compiledTags .= $explodedTag . ", ";
          else $compiledTags .= $explodedTag . "";
        }
        else if((count($explodedTags)>1)) $compiledTags.= " & " .$explodedTag;
      }
      $cityMatch = "";
      if($tagCounter==1)$compiledTags = get_post_meta( $thispostid, 'lsp_post_tags', true );
      if(ucwords(get_post_meta( $thispostid, 'lsp_post_city', true ))== ucwords($city))$cityMatch = "yes";
      if($headline_option == "tags" && $cityMatch == "yes")$item_headline = "<h4><font color='".get_option('lsp-header-color')."'>".ucwords(get_post_meta( $thispostid, 'lsp_post_city', true )).__(", ","lsp_text_domain"). ucwords(get_post_meta( $thispostid, 'lsp_post_state', true )). " " . ucwords($compiledTags) ."</font></h4>";
      if($headline_option == "tags" && $cityMatch != "yes")$item_headline = "<h4><font color='".get_option('lsp-header-color')."'>". ucwords($compiledTags) .__(" near ","lsp_text_domain").ucwords($city).", " . ucwords($state)."</font></h4>";
      if($headline_option == "title")$item_headline = "<h4><font color='".get_option('lsp-header-color')."'>".get_the_title($thispostid)."</font></h4>";
      if($headline_option == "none")$item_headline = "";
      if($city=="list" && $state=="all")$item_headline = "<h4><font color='".get_option('lsp-header-color')."'>".get_the_title($thispostid)."</font></h4>";
    }

    if($phraseNumber > 1){
      $headline_option = get_option('lsp-hide-headlines'.$phraseNumber);
      $explodedTags = explode(",",get_post_meta( $thispostid, 'lsp_post_tags', true ));
      $compiledTags = "";
      $tagCounter = 0;
      foreach ($explodedTags as $explodedTag) {
        $tagCounter++;
        if((count($explodedTags) != $tagCounter) && (count($explodedTags) != ($tagCounter-1))){
          if(count($explodedTags) != ($tagCounter+1)) $compiledTags .= $explodedTag . ", ";
          else $compiledTags .= $explodedTag . "";
        }
        else if((count($explodedTags)>1)) $compiledTags.= " & " .$explodedTag;
      }
      $cityMatch = "";
      if($tagCounter==1)$compiledTags = get_post_meta( $thispostid, 'lsp_post_tags', true );
      if(ucwords(get_post_meta( $thispostid, 'lsp_post_city', true ))== ucwords($city))$cityMatch = "yes";
      if($headline_option == "tags" && $cityMatch == "yes")$item_headline = "<h4><font color='#".get_option('lsp-header-color')."'>".ucwords(get_post_meta( $thispostid, 'lsp_post_city', true ))." " . ucwords(get_post_meta( $thispostid, 'lsp_post_state', true )). " " . ucwords(get_post_meta( $thispostid, 'lsp_post_tags', true )) ."</h4>";
      if($headline_option == "tags" && $cityMatch != "yes")$item_headline = "<h4><font color='#".get_option('lsp-header-color')."'>".ucwords(get_post_meta( $thispostid, 'lsp_post_city', true ))." " . ucwords(get_post_meta( $thispostid, 'lsp_post_state', true )). " " . ucwords(get_post_meta( $thispostid, 'lsp_post_tags', true )) ."</h4>";
      if($headline_option == "title")$item_headline = "<h4><font color='#".get_option('lsp-header-color')."'>".get_the_title($thispostid)."</h4>";
      if($headline_option == "none")$item_headline = "";
      if($city=="list" && $state=="all")$item_headline = "<h4><font color='".get_option('lsp-header-color')."'>".get_the_title($thispostid)."</font></h4>";

    }
//    $lsp_hide_headlines
 //   get_option('lsp-hide-headlines')

    $returnStr .= $item_headline;

    $returnStr .= __("Client Name: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_client_name', true )."";
  	if($post->post_content)$returnStr .= "<br>".__("Description: ","lsp_text_domain").$post->post_content;
  	$returnStr .= "<br>".__("City: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_city', true );
  	$returnStr .= "<br>".__("State: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_state', true );
    //	$returnStr .= get_post_meta( $thispostid, 'lsp_post_country', true );
  	$returnStr .= "<br>".__("Services Used: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_tags', true );
  	if(get_post_meta( $thispostid, 'lsp_post_industry', true )) $returnStr .= "<br>".__("Industry / Industries: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_industry', true );
  	if(get_post_meta( $thispostid, 'lsp_post_testimonial', true )) $returnStr .= "<br>".__("Testimonial: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_testimonial', true );
    if(get_post_meta( $thispostid, 'lsp_post_client_phone', true )) $returnStr .= "<br>".__("Client Phone Number: ","lsp_text_domain") . get_post_meta( $thispostid, 'lsp_post_client_phone', true );
    if(get_post_meta( $thispostid, 'lsp_post_client_website', true )){
      $theURL = "";
      if(!strstr(strtolower(get_post_meta( $thispostid, 'lsp_post_client_website', true )),"http")) $theURL .= "http://";

      $theURL .= strtolower(get_post_meta( $thispostid, 'lsp_post_client_website', true ));

      $returnStr .= "<br>".__("Client Website/URL: ","lsp_text_domain")."<a href='" . $theURL ."' target='_blank'>".get_post_meta( $thispostid, 'lsp_post_client_website', true )."</a>";
    }
//    $returnStr .= "Latitude,Longitude:" ;
//    $returnStr .= get_post_meta( $thispostid, 'lsp_post_latitude', true ) . ",". get_post_meta( $thispostid, 'lsp_post_longitude', true );
    $returnStr .= "<hr>";
  }


  wp_reset_query();

/*  $test = curlfallback("http://www.instawowlocalseo.com");
  $returnStr .= $test;


 */ 

  if($postidscounter==0)$returnStr.= __("Our portfolio for this is currently under construction.","lsp_text_domain")." ";


  if($city=="list" && $state=="all")return $returnStr;

  $myKey = get_option('lsp-api-key');
//  $returnStr = "Latitude,Longitude:" . curlfallback("http://www.instawowlocalseo.com/". '?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$city.'&state='.$state.'&country='.$country.'&request=latitude');
    $city = str_replace("-"," ",$city);

    $state = str_replace("-"," ",$state);



    $cityHome = "";
    $stateHome = "";
    $radiusHome = "";
    $localLimit = "";
    $nationalLimit = "";
    $internationalLimit = "";
    $addchar = "";
    $setType = "";
    $main_portfolio_term = "";

    if($phraseNumber== 1){
      $cityHome = get_option( 'lsp-city' );
      $stateHome = get_option( 'lsp-state' );
      $radiusHome = get_option( 'lsp-radius' );
      $localLimit = get_option( 'lsp-local-population-limit' );
      $nationalLimit = get_option( 'lsp-national-population-limit' );
      $internationalLimit = get_option( 'lsp-international-population-limit' );
      $setType = get_option( 'lsp-set-type' );
      $main_portfolio_term = get_option('lsp-keyphrase');
      if(get_option('lsp-keyphrase-override')) $main_portfolio_term = get_option('lsp-keyphrase-override');
    }
    if($phraseNumber > 1){
      $addchar = $phraseNumber;
      $cityHome = get_option( 'lsp-city'.$phraseNumber );
      $stateHome = get_option( 'lsp-state'.$phraseNumber );
      $radiusHome = get_option( 'lsp-radius'.$phraseNumber );
      $localLimit = get_option( 'lsp-local-population-limit'.$phraseNumber );
      $nationalLimit = get_option( 'lsp-national-population-limit'.$phraseNumber );
      $internationalLimit = get_option( 'lsp-international-population-limit'.$phraseNumber );
      $setType = get_option( 'lsp-set-type'.$phraseNumber );
      $main_portfolio_term = get_option('lsp-keyphrase'.$phraseNumber);
      if(get_option('lsp-keyphrase-override'.$phraseNumber)) $main_portfolio_term = get_option('lsp-keyphrase-override'.$phraseNumber);
    }


if(get_option('lsp-linking-sentence')!="") $returnStr .= get_option('lsp-linking-sentence');
else $returnStr .= __("Other portfolio sections for our work which we've done near ","lsp_text_domain").ucwords($city).", ".ucwords($state).__(" include ","lsp_text_domain");


  //echo 'http://www.instawowlocalseo.com/?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'?key='.get_option('lsp-api-key').'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso'.'&radius='.urlencode($radiusHome).'&exclude='.urlencode(get_option('lsp-exclude-cities')).'&count=20';
   
  ///INSERT LATEST

  //.'&lplimit='.get_option('lsp-local-population-limit').'&splimit='.get_option('lsp-state-population-limit').'&nplimit='.get_option('lsp-national-population-limit').'&iplimit='.get_option('lsp-international-population-limit').'&lpmaxlimit='.get_option('lsp-local-max-limit').'&spmaxlimit='.get_option('lsp-state-max-limit').'&npmaxlimit='.get_option('lsp-national-max-limit').'&ipmaxlimit='.get_option('lsp-international-max-limit').'&addcities='.get_option('lsp-add-cities').'&excludecities='.get_option('lsp-exclude-cities').'&addstates='.get_option('lsp-add-states').'&excludestates='.get_option('lsp-exclude-states').'&addcountries='.get_option('lsp-add-countries').'&localfocus='.get_option('lsp-local-focus').'&statefocus='.get_option('lsp-state-focus').'&countryfocus='.get_option('lsp-country-focus').'&internationalfocus='.get_option('lsp-international-focus')
  
  $i = "";
  if($phraseNumber>1)$i=$phraseNumber;

  ///HEREITIS SELECT a.meta_value, b.meta_valueFROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta cWHERE c.meta_value LIKE '%%web design%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND a.post_id = b.post_id AND b.post_id = c.post_id
global $wpdb;
    $query2 = "SELECT a.meta_value as city, b.meta_value as state, d.meta_value as country FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$k)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND d.meta_key='lsp_post_country' AND a.post_id = b.post_id AND b.post_id = c.post_id";

//   $query2 = "SELECT a.meta_value as city, b.meta_value as state FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$i)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND a.post_id = b.post_id AND b.post_id = c.post_id";
      //echo $query2;
      //  $query2 = $wpdb->prepare($query2);
      global $wpdb;
      $citystates = $wpdb->get_results($query2);
      $projectsCounter = 0;
      $projectsString .= "";
      foreach ($citystates as $citystate) {
        if($projectsCounter>100) break;
        $projectArray[$projectsCounter]= $citystate->city.",".$citystate->state;
        $projectsString .= $citystate->city.",".$citystate->state.",".$citystate->country."|";
        $projectsCounter++;
      }

      $z = "1";
      if($i>1)$z=$i;
      $projectsString = site_url()."/?portfolioquery=".$z;

     // echo $projectsString;
      $blah = 0;
      $blah = $_SERVER['HTTP_REFERER'] ."|". site_url();

  ///NEEDSWORK -- needs additional fields added, needs "only cities I serve, etc figured out above this, and hooked in", and $i needs to be figured out as well
  //echo 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;
//echo 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;
  
  $geo_string = curlfallback('http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah);
 // echo 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;
 // echo $geo_string;

  if($geo_string == "This account has reached its limit of requests for the Local SEO Portfolio plugin"){
    //echo "";
    die(__("This account has reached its pageview request limit with ","lsp_text_domain")."<a href='http://www.instawowlocalseo.com'>".__("Local SEO Portfolio","lsp_text_domain")."</a>.");
  }
  $geo_array = explode("|",$geo_string);
  $geo_string_final = "";
  
  
  $len = count($geo_array);
  $i = 0;
  foreach ($geo_array as $geo){
    $explodedgeo = explode(",",$geo);
    if($geo=="")break;


//$geo_string_final .= $i . $len;

    if($i != $len -2){
      if(get_option('lsp-portfolio-format')=="sectiontitles" || get_option('lsp-portfolio-format')=="") $geo_string_final .= '<a href="'. home_url()."/".strtolower(trim($explodedgeo[3]))."/".str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].", ".$explodedgeo[1]." ".ucwords($main_portfolio_term).'</a>, ';
      if(get_option('lsp-portfolio-format')=="citiesstateslist") $geo_string_final .= '<a href="'. home_url()."/".strtolower(trim($explodedgeo[3]))."/".str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].", ".$explodedgeo[1].'</a>, ';
      if(get_option('lsp-portfolio-format')=="citieslist") $geo_string_final .= '<a href="'. home_url()."/".strtolower(trim($explodedgeo[3]))."/".str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].'</a>, ';
    }else{
      if(get_option('lsp-portfolio-format')=="sectiontitles" || get_option('lsp-portfolio-format')=="") $geo_string_final .= __(' and ','lsp_text_domain').'<a href="'. home_url()."/".strtolower(trim($explodedgeo[3]))."/".str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].", ".$explodedgeo[1]." ".ucwords($main_portfolio_term).'</a>.';
      if(get_option('lsp-portfolio-format')=="citiesstateslist") $geo_string_final .=  __(' and ','lsp_text_domain').'<a href="'. home_url()."/".strtolower(trim($explodedgeo[3]))."/".str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].", ".$explodedgeo[1].'</a>.';
      if(get_option('lsp-portfolio-format')=="citieslist") $geo_string_final .= __(' and ','lsp_text_domain').'<a href="'. home_url()."/".strtolower(trim($explodedgeo[3]))."/".str_replace(" ","-",$main_portfolio_term)."/".str_replace(" ","-",strtolower(trim($explodedgeo[0])))."/".str_replace(" ","-",strtolower(trim($explodedgeo[1])))."/".'">'.$explodedgeo[0].'</a>.';
   
    }
     $i++;
  }
//  $returnStr.= 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;
  $returnStr .= $geo_string_final;

  //echo 'http://www.instawowlocalseo.com/?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'?key='.get_option('lsp-api-key').'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso'.'&radius='.urlencode($radiusHome).'&exclude='.urlencode(get_option('lsp-exclude-cities')).'&count=20';
   
  ///INSERT LATEST

  //.'&lplimit='.get_option('lsp-local-population-limit').'&splimit='.get_option('lsp-state-population-limit').'&nplimit='.get_option('lsp-national-population-limit').'&iplimit='.get_option('lsp-international-population-limit').'&lpmaxlimit='.get_option('lsp-local-max-limit').'&spmaxlimit='.get_option('lsp-state-max-limit').'&npmaxlimit='.get_option('lsp-national-max-limit').'&ipmaxlimit='.get_option('lsp-international-max-limit').'&addcities='.get_option('lsp-add-cities').'&excludecities='.get_option('lsp-exclude-cities').'&addstates='.get_option('lsp-add-states').'&excludestates='.get_option('lsp-exclude-states').'&addcountries='.get_option('lsp-add-countries').'&localfocus='.get_option('lsp-local-focus').'&statefocus='.get_option('lsp-state-focus').'&countryfocus='.get_option('lsp-country-focus').'&internationalfocus='.get_option('lsp-international-focus')
  
  $i = "";
  if($phraseNumber>1)$i=$phraseNumber;

  ///HEREITIS SELECT a.meta_value, b.meta_valueFROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta cWHERE c.meta_value LIKE '%%web design%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND a.post_id = b.post_id AND b.post_id = c.post_id
global $wpdb;
    $query2 = "SELECT a.meta_value as city, b.meta_value as state, d.meta_value as country FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c, ".$wpdb->prefix."postmeta d WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$k)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND d.meta_key='lsp_post_country' AND a.post_id = b.post_id AND b.post_id = c.post_id";

//   $query2 = "SELECT a.meta_value as city, b.meta_value as state FROM ".$wpdb->prefix."postmeta a, ".$wpdb->prefix."postmeta b, ".$wpdb->prefix."postmeta c WHERE c.meta_value LIKE '%%".get_option('lsp-keyphrase'.$i)."%%' AND a.meta_key='lsp_post_city' AND b.meta_key='lsp_post_state' AND c.meta_key='lsp_post_tags' AND a.post_id = b.post_id AND b.post_id = c.post_id";
      //echo $query2;
      //  $query2 = $wpdb->prepare($query2);
      global $wpdb;
      $citystates = $wpdb->get_results($query2);
      $projectsCounter = 0;
      $projectsString .= "";
      foreach ($citystates as $citystate) {
        if($projectsCounter>100) break;
        $projectArray[$projectsCounter]= $citystate->city.",".$citystate->state;
        $projectsString .= $citystate->city.",".$citystate->state.",".$citystate->country."|";
        $projectsCounter++;
      }

      $z = "1";
      if($i>1)$z=$i;
      $projectsString = site_url()."/?portfolioquery=".$z;

     // echo $projectsString;
     $blah = 0;
     $blah = $_SERVER['HTTP_REFERER'] ."|". site_url();

  ///NEEDSWORK -- needs additional fields added, needs "only cities I serve, etc figured out above this, and hooked in", and $i needs to be figured out as well
  //echo 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&splimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&nplimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&iplimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&lpmaxlimit='.urlencode(get_option('lsp-local-max-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-max-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-max-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-max-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;


//        echo 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit=&splimit=&nplimit=&iplimit=&lpmaxlimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;


     //echo 'http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit=&splimit=&nplimit=&iplimit=&lpmaxlimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah;

$geo_string = curlfallback('http://www.instawowlocalseo.com/index3.php?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.get_option('lsp-api-key').'&setType='.urlencode($setType).'&city='.urlencode($city).'&state='.urlencode($state).'&cityHome='.urlencode($cityHome).'&stateHome='.urlencode($stateHome).'&request=citiesAlso&count=20'.'&radius='.get_option('lsp-radius'.$i).'&ua='.urlencode($_SERVER['HTTP_USER_AGENT']).'&exclude='.urlencode(get_option('lsp-exclude-cities'.$i)).'&count='.$cities_per_portfolio.'&lplimit=&splimit=&nplimit=&iplimit=&lpmaxlimit='.urlencode(get_option('lsp-local-population-limit'.$i)).'&spmaxlimit='.urlencode(get_option('lsp-state-population-limit'.$i)).'&npmaxlimit='.urlencode(get_option('lsp-national-population-limit'.$i)).'&ipmaxlimit='.urlencode(get_option('lsp-international-population-limit'.$i)).'&addcities='.urlencode(get_option('lsp-add-cities'.$i)).'&excludecities='.urlencode(get_option('lsp-exclude-cities'.$i)).'&addstates='.urlencode(get_option('lsp-add-states'.$i)).'&excludestates='.urlencode(get_option('lsp-exclude-states'.$i)).'&addcountries='.urlencode(get_option('lsp-add-countries'.$i)).'&localfocus='.urlencode(get_option('lsp-local-focus'.$i)).'&statefocus='.urlencode(get_option('lsp-state-focus'.$i)).'&countryfocus='.urlencode(get_option('lsp-country-focus'.$i)).'&internationalfocus='.urlencode(get_option('lsp-international-focus'.$i)).'&onlycities='.urlencode($onlyCities).'&onlystates='.urlencode($onlyStates).'&onlycountries='.urlencode($onlyCountries).'&projectsString='.urlencode($projectsString).'&huh='.$blah); // echo $geo_string;

  $geo_array = explode("|",$geo_string);
  $geo_string_final = ""; 

  $getMore = 0;
  if(get_option('lsp-smaller-cities')=="yes" &&(get_option('lsp-local-population-limit'.$i) || get_option('lsp-state-population-limit'.$i) || get_option('lsp-national-international-limit'.$i) || get_option('lsp-local-population-limit'.$i))){
    if(!(strstr($setType,"ities"))){
      
      if(get_option('lsp-served-sentence')!="") $returnStr .= get_option('lsp-served-sentence');
      else $returnStr .= __(" Even though they did not get their own portfolio section, we do also serve the nearby cities of ","lsp_text_domain");
    
    }
    $getMore = 1;
  }

  
  $len = count($geo_array);
  $i = 0;
  foreach ($geo_array as $geo){
    $explodedgeo = explode(",",$geo);
    if($geo=="")break;
    if($i != $len -2)
    $geo_string_final .= $explodedgeo[0] .', ';
    else
    $geo_string_final .=  __('and','lsp_text_domain') .' '.$explodedgeo[0].'.';
    $i++;
  }


  if(get_option('lsp-smaller-cities')=="yes" && $getMore==1)$returnStr .= $geo_string_final;


//  $rawCities = curlfallback('http://www.instawowlocalseo.com/?lang='.urlencode(substr(get_bloginfo('language'),0,2)).'&key='.$myKey.'&city='.$city.'&state='.$state.'&request=cities'.'&range='.get_option('lsp_radius').'&exclude='.get_option('lsp_exclude_cities').'&add='.get_option('lsp_add_cities'));
  //$returnStr .= $rawCities;

  $returnStr .= "";
//  if(get_option('lsp-city4')) $returnStr .= "The main services we offer are x, y, z, a, b & c.";

  return $returnStr;

}


wp_enqueue_script('lsp-color-picker',plugins_url('jscolor.js', __FILE__));






?>
